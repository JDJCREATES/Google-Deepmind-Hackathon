import{r as mo,g as w1,R as $,a as k}from"./react-icons-B-Va5VYq.js";var Ju={exports:{}},Wu={};var n0;function Wp(){return n0||(n0=1,(function(e){function t(N,Y){var B=N.length;N.push(Y);t:for(;0<B;){var D=B-1>>>1,K=N[D];if(0<l(K,Y))N[D]=Y,N[B]=K,B=D;else break t}}function i(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var Y=N[0],B=N.pop();if(B!==Y){N[0]=B;t:for(var D=0,K=N.length,F=K>>>1;D<F;){var tt=2*(D+1)-1,ut=N[tt],ct=tt+1,gt=N[ct];if(0>l(ut,B))ct<K&&0>l(gt,ut)?(N[D]=gt,N[ct]=B,D=ct):(N[D]=ut,N[tt]=B,D=tt);else if(ct<K&&0>l(gt,B))N[D]=gt,N[ct]=B,D=ct;else break t}}return Y}function l(N,Y){var B=N.sortIndex-Y.sortIndex;return B!==0?B:N.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],d=[],m=1,y=null,v=3,_=!1,S=!1,b=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function M(N){for(var Y=i(d);Y!==null;){if(Y.callback===null)s(d);else if(Y.startTime<=N)s(d),Y.sortIndex=Y.expirationTime,t(f,Y);else break;Y=i(d)}}function G(N){if(b=!1,M(N),!S)if(i(f)!==null)S=!0,H||(H=!0,j());else{var Y=i(d);Y!==null&&O(G,Y.startTime-N)}}var H=!1,X=-1,q=5,P=-1;function I(){return C?!0:!(e.unstable_now()-P<q)}function J(){if(C=!1,H){var N=e.unstable_now();P=N;var Y=!0;try{t:{S=!1,b&&(b=!1,A(X),X=-1),_=!0;var B=v;try{e:{for(M(N),y=i(f);y!==null&&!(y.expirationTime>N&&I());){var D=y.callback;if(typeof D=="function"){y.callback=null,v=y.priorityLevel;var K=D(y.expirationTime<=N);if(N=e.unstable_now(),typeof K=="function"){y.callback=K,M(N),Y=!0;break e}y===i(f)&&s(f),M(N)}else s(f);y=i(f)}if(y!==null)Y=!0;else{var F=i(d);F!==null&&O(G,F.startTime-N),Y=!1}}break t}finally{y=null,v=B,_=!1}Y=void 0}}finally{Y?j():H=!1}}}var j;if(typeof w=="function")j=function(){w(J)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,T=W.port2;W.port1.onmessage=J,j=function(){T.postMessage(null)}}else j=function(){x(J,0)};function O(N,Y){X=x(function(){N(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(N){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var B=v;v=Y;try{return N()}finally{v=B}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(N,Y){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var B=v;v=N;try{return Y()}finally{v=B}},e.unstable_scheduleCallback=function(N,Y,B){var D=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?D+B:D):B=D,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,N={id:m++,callback:Y,priorityLevel:N,startTime:B,expirationTime:K,sortIndex:-1},B>D?(N.sortIndex=B,t(d,N),i(f)===null&&N===i(d)&&(b?(A(X),X=-1):b=!0,O(G,B-D))):(N.sortIndex=K,t(f,N),S||_||(S=!0,H||(H=!0,j()))),N},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(N){var Y=v;return function(){var B=v;v=Y;try{return N.apply(this,arguments)}finally{v=B}}}})(Wu)),Wu}var i0;function z1(){return i0||(i0=1,Ju.exports=Wp()),Ju.exports}var $u={exports:{}},Me={};var a0;function $p(){if(a0)return Me;a0=1;var e=mo();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:d,implementation:m}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Me.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,m)},Me.flushSync=function(f){var d=u.T,m=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=m,s.d.f()}},Me.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},Me.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Me.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,y=h(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&s.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Me.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=h(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},Me.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=h(m,d.crossOrigin);s.d.L(f,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Me.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=h(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},Me.requestFormReset=function(f){s.d.r(f)},Me.unstable_batchedUpdates=function(f,d){return f(d)},Me.useFormState=function(f,d,m){return u.H.useFormState(f,d,m)},Me.useFormStatus=function(){return u.H.useHostTransitionStatus()},Me.version="19.2.3",Me}var s0;function t5(){if(s0)return $u.exports;s0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$u.exports=$p(),$u.exports}var Y_=t5();const e5=Math.PI/180;function n5(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const ca=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},rt={_global:ca,version:"10.0.12",isBrowser:n5(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return rt.angleDeg?e*e5:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return rt.DD.isDragging},isTransforming(){var e,t;return(t=(e=rt.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!rt.DD.node},releaseCanvasOnDestroy:!0,document:ca.document,_injectGlobal(e){typeof ca.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),ca.Konva=e}},Jt=e=>{rt[e.prototype.getClassName()]=e};rt._injectGlobal(rt);const i5=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,l0=()=>{if(typeof document>"u")throw new Error(i5)};let En=class D1{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new D1(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),l=this.m[0]*i+this.m[2]*s,o=this.m[1]*i+this.m[3]*s,u=this.m[0]*-s+this.m[2]*i,h=this.m[1]*-s+this.m[3]*i;return this.m[0]=l,this.m[1]=o,this.m[2]=u,this.m[3]=h,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){const s=this.m[0]+this.m[2]*i,l=this.m[1]+this.m[3]*i,o=this.m[2]+this.m[0]*t,u=this.m[3]+this.m[1]*t;return this.m[0]=s,this.m[1]=l,this.m[2]=o,this.m[3]=u,this}multiply(t){const i=this.m[0]*t.m[0]+this.m[2]*t.m[1],s=this.m[1]*t.m[0]+this.m[3]*t.m[1],l=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],u=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],h=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=s,this.m[2]=l,this.m[3]=o,this.m[4]=u,this.m[5]=h,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,s=-this.m[1]*t,l=-this.m[2]*t,o=this.m[0]*t,u=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),h=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=s,this.m[2]=l,this.m[3]=o,this.m[4]=u,this.m[5]=h,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],s=this.m[2],l=this.m[3],o=this.m[4],u=this.m[5],h=t*l-i*s,f={x:o,y:u,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){const d=Math.sqrt(t*t+i*i);f.rotation=i>0?Math.acos(t/d):-Math.acos(t/d),f.scaleX=d,f.scaleY=h/d,f.skewX=(t*s+i*l)/h,f.skewY=0}else if(s!=0||l!=0){const d=Math.sqrt(s*s+l*l);f.rotation=Math.PI/2-(l>0?Math.acos(-s/d):-Math.acos(s/d)),f.scaleX=h/d,f.scaleY=d,f.skewX=0,f.skewY=(t*s+i*l)/h}return f.rotation=U._getRotation(f.rotation),f}};const a5="[object Array]",s5="[object Number]",l5="[object String]",r5="[object Boolean]",o5=Math.PI/180,u5=180/Math.PI,Ws="#",c5="",h5="0",f5="Konva warning: ",r0="Konva error: ",d5="rgb(",tc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g5=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Mr=[],$s=null;const m5=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,60)},U={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===a5},_isNumber(e){return Object.prototype.toString.call(e)===s5&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===l5},_isBoolean(e){return Object.prototype.toString.call(e)===r5},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){Mr.push(e),Mr.length===1&&m5(function(){const t=Mr;Mr=[],t.forEach(function(i){i()})})},createCanvasElement(){l0();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return l0(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const i=U.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(Ws,c5);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=h5+e;return Ws+e},isCanvasFarblingActive(){if($s!==null)return $s;if(typeof document>"u")return $s=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let l=0;l<100;l++)if(i[l*4]!==40||i[l*4+1]!==40||i[l*4+2]!==40||i[l*4+3]!==255){s=!0;break}return $s=s,this.releaseCanvas(e),$s},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,i){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,i=Math.round(i/5)*5),Ws+this._rgbToHex(e,t,i)},getSnappedHexColor(e){const t=this._hexToRgb(e);return Ws+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in tc?(t=tc[e],{r:t[0],g:t[1],b:t[2]}):e[0]===Ws?this._hexToRgb(e.substring(1)):e.substr(0,4)===d5?(t=g5.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",U._namedColorToRBA(e)||U._hex3ColorToRGBA(e)||U._hex4ColorToRGBA(e)||U._hex6ColorToRGBA(e)||U._hex8ColorToRGBA(e)||U._rgbColorToRGBA(e)||U._rgbaColorToRGBA(e)||U._hslColorToRGBA(e)},_namedColorToRBA(e){const t=tc[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((i,s)=>i.slice(-1)==="%"?s===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),s=Number(i[0])/360,l=Number(i[1])/100,o=Number(i[2])/100;let u,h,f;if(l===0)return f=o*255,{r:Math.round(f),g:Math.round(f),b:Math.round(f),a:1};o<.5?u=o*(1+l):u=o+l-o*l;const d=2*o-u,m=[0,0,0];for(let y=0;y<3;y++)h=s+1/3*-(y-1),h<0&&h++,h>1&&h--,6*h<1?f=d+(u-d)*6*h:2*h<1?f=u:3*h<2?f=d+(u-d)*(2/3-h)*6:f=d,m[y]=f*255;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*o5},radToDeg(e){return e*u5},_degToRad(e){return U.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),U.degToRad(e)},_radToDeg(e){return U.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),U.radToDeg(e)},_getRotation(e){return rt.angleDeg?U.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(r0+e)},error(e){console.error(r0+e)},warn(e){rt.showWarnings&&console.warn(f5+e)},each(e,t){for(const i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,s,l,o){let u,h,f;const d=(e-i)*(e-i)+(t-s)*(t-s);if(d==0)u=e,h=t,f=(l-i)*(l-i)+(o-s)*(o-s);else{const m=((l-e)*(i-e)+(o-t)*(s-t))/d;m<0?(u=e,h=t,f=(e-l)*(e-l)+(t-o)*(t-o)):m>1?(u=i,h=s,f=(i-l)*(i-l)+(s-o)*(s-o)):(u=e+m*(i-e),h=t+m*(s-t),f=(u-l)*(u-l)+(h-o)*(h-o))}return[u,h,f]},_getProjectionToLine(e,t,i){const s=U.cloneObject(e);let l=Number.MAX_VALUE;return t.forEach(function(o,u){if(!i&&u===t.length-1)return;const h=t[(u+1)%t.length],f=U._getProjectionToSegment(o.x,o.y,h.x,h.y,e.x,e.y),d=f[0],m=f[1],y=f[2];y<l&&(s.x=d,s.y=m,l=y)}),s},_prepareArrayForTween(e,t,i){const s=[],l=[];if(e.length>t.length){const u=t;t=e,e=u}for(let u=0;u<e.length;u+=2)s.push({x:e[u],y:e[u+1]});for(let u=0;u<t.length;u+=2)l.push({x:t[u],y:t[u+1]});const o=[];return l.forEach(function(u){const h=U._getProjectionToLine(u,s,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const i in e)if(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object"){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||U._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(U._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){rt.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,i,s){let l=t<0?t:0,o=i<0?i:0;t=Math.abs(t),i=Math.abs(i);let u=0,h=0,f=0,d=0;typeof s=="number"?u=h=f=d=Math.min(s,t/2,i/2):(u=Math.min(s[0]||0,t/2,i/2),h=Math.min(s[1]||0,t/2,i/2),d=Math.min(s[2]||0,t/2,i/2),f=Math.min(s[3]||0,t/2,i/2)),e.moveTo(l+u,o),e.lineTo(l+t-h,o),e.arc(l+t-h,o+h,h,Math.PI*3/2,0,!1),e.lineTo(l+t,o+i-d),e.arc(l+t-d,o+i-d,d,0,Math.PI/2,!1),e.lineTo(l+f,o+i),e.arc(l+f,o+i-f,f,Math.PI/2,Math.PI,!1),e.lineTo(l,o+u),e.arc(l+u,o+u,u,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,i,s,l){s=Math.abs(s);for(let o=0;o<i;o++){const u=t[(o-1+i)%i],h=t[o],f=t[(o+1)%i],d={x:h.x-u.x,y:h.y-u.y},m={x:f.x-h.x,y:f.y-h.y},y=Math.hypot(d.x,d.y),v=Math.hypot(m.x,m.y);let _;typeof l=="number"?_=l:_=o<l.length?l[o]:0,_=s*Math.cos(Math.PI/i)*Math.min(1,_/s*2);const b={x:d.x/y,y:d.y/y},C={x:m.x/v,y:m.y/v},x={x:h.x-b.x*_,y:h.y-b.y*_},A={x:h.x+C.x*_,y:h.y+C.y*_};o===0?e.moveTo(x.x,x.y):e.lineTo(x.x,x.y),e.arcTo(h.x,h.y,A.x,A.y,_)}}};function p5(e){const t=[],i=e.length,s=U;for(let l=0;l<i;l++){let o=e[l];s._isNumber(o)?o=Math.round(o*1e3)/1e3:s._isString(o)||(o=o+""),t.push(o)}return t}const o0=",",y5="(",v5=")",_5="([",S5="])",E5=";",x5="()",b5="=",u0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],C5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],T5=100;let Rr=null;function c0(){if(Rr!==null)return Rr;try{const t=U.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Rr=!1,!1)}catch{return Rr=!1,!1}}class po{constructor(t){this.canvas=t,rt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let s=this.traceArr,l=s.length,o="",u,h,f,d;for(u=0;u<l;u++)h=s[u],f=h.method,f?(d=h.args,o+=f,t?o+=x5:U._isArray(d[0])?o+=_5+d.join(o0)+S5:(i&&(d=d.map(m=>typeof m=="number"?Math.floor(m):m)),o+=y5+d.join(o0)+v5)):(o+=h.property,t||(o+=b5+h.val)),o+=E5;return o}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,s;i.push(t),s=i.length,s>=T5&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}_applyMiterLimit(t){const i=t.attrs.miterLimit;i!=null&&this.setAttr("miterLimit",i)}setAttr(t,i){this._context[t]=i}arc(t,i,s,l,o,u){this._context.arc(t,i,s,l,o,u)}arcTo(t,i,s,l,o){this._context.arcTo(t,i,s,l,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,s,l,o,u){this._context.bezierCurveTo(t,i,s,l,o,u)}clearRect(t,i,s,l){this._context.clearRect(t,i,s,l)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const s=arguments;if(s.length===2)return this._context.createImageData(t,i);if(s.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,s,l){return this._context.createLinearGradient(t,i,s,l)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,s,l,o,u){return this._context.createRadialGradient(t,i,s,l,o,u)}drawImage(t,i,s,l,o,u,h,f,d){const m=arguments,y=this._context;m.length===3?y.drawImage(t,i,s):m.length===5?y.drawImage(t,i,s,l,o):m.length===9&&y.drawImage(t,i,s,l,o,u,h,f,d)}ellipse(t,i,s,l,o,u,h,f){this._context.ellipse(t,i,s,l,o,u,h,f)}isPointInPath(t,i,s,l){return s?this._context.isPointInPath(s,t,i,l):this._context.isPointInPath(t,i,l)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,s,l){this._context.fillRect(t,i,s,l)}strokeRect(t,i,s,l){this._context.strokeRect(t,i,s,l)}fillText(t,i,s,l){l?this._context.fillText(t,i,s,l):this._context.fillText(t,i,s)}measureText(t){return this._context.measureText(t)}getImageData(t,i,s,l){return this._context.getImageData(t,i,s,l)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,s,l){this._context.rect(t,i,s,l)}roundRect(t,i,s,l,o){this._context.roundRect(t,i,s,l,o)}putImageData(t,i,s){this._context.putImageData(t,i,s)}quadraticCurveTo(t,i,s,l){this._context.quadraticCurveTo(t,i,s,l)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,s,l,o,u){this._context.setTransform(t,i,s,l,o,u)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,s,l){this._context.strokeText(t,i,s,l)}transform(t,i,s,l,o,u){this._context.transform(t,i,s,l,o,u)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=u0.length,s=this.setAttr,l,o;const u=function(h){let f=t[h],d;t[h]=function(){return o=p5(Array.prototype.slice.call(arguments,0)),d=f.apply(t,arguments),t._trace({method:h,args:o}),d}};for(l=0;l<i;l++)u(u0[l]);t.setAttr=function(){s.apply(t,arguments);const h=arguments[0];let f=arguments[1];(h==="shadowOffsetX"||h==="shadowOffsetY"||h==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),t._trace({property:h,val:f})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}C5.forEach(function(e){Object.defineProperty(po.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class N5 extends po{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),s=t.getFillPriority();if(i&&s==="color"){this._fillColor(t);return}const l=t.getFillPatternImage();if(l&&s==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&s==="linear-gradient"){this._fillLinearGradient(t);return}const u=t.getFillRadialGradientColorStops();if(u&&s==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):l?this._fillPattern(t):o?this._fillLinearGradient(t):u&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),s=t.getStrokeLinearGradientEndPoint(),l=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(i.x,i.y,s.x,s.y);if(l){for(let u=0;u<l.length;u+=2)o.addColorStop(l[u],l[u+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const i=t.dash(),s=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!s){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),s||this.restore()}}_applyShadow(t){var i,s,l;const o=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",u=(s=t.getShadowBlur())!==null&&s!==void 0?s:5,h=(l=t.getShadowOffset())!==null&&l!==void 0?l:{x:0,y:0},f=t.getAbsoluteScale(),d=this.canvas.getPixelRatio(),m=f.x*d,y=f.y*d;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",u*Math.min(Math.abs(m),Math.abs(y))),this.setAttr("shadowOffsetX",h.x*m),this.setAttr("shadowOffsetY",h.y*y)}}class A5 extends po{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const s=t.hitStrokeWidth(),l=s==="auto"?t.strokeWidth():s;this.setAttr("lineWidth",l),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}let wr;function M5(){if(wr)return wr;const e=U.createCanvasElement(),t=e.getContext("2d");return wr=(function(){const i=rt._global.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s})(),U.releaseCanvas(e),wr}class Wc{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const s=(t||{}).pixelRatio||rt.pixelRatio||M5();this.pixelRatio=s,this._canvas=U.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(l){return U.error("Unable to get data URL. "+l.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class zi extends Wc{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new N5(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class $c extends Wc{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new A5(this),this.setSize(t.width,t.height)}}const Gt={get isDragging(){let e=!1;return Gt._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return Gt._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];Gt._dragElements.forEach((i,s)=>{const{node:l}=i,o=l.getStage();o.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=U._getFirstPointerId(e));const u=o._changedPointerPositions.find(h=>h.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){const h=l.dragDistance();if(Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y))<h||(l.startDrag({evt:e}),!l.isDragging()))return}l._setDragPosition(e,i),t.push(l)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];Gt._dragElements.forEach(i=>{const{node:s}=i,l=s.getStage();if(e&&l.setPointersPositions(e),!l._changedPointerPositions.find(h=>h.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(Gt.justDragged=!0,rt._mouseListenClick=!1,rt._touchListenClick=!1,rt._pointerListenClick=!1,i.dragStatus="stopped");const u=i.node.getLayer()||i.node instanceof rt.Stage&&i.node;u&&t.indexOf(u)===-1&&t.push(u)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){Gt._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&Gt._dragElements.delete(i)})}};rt.isBrowser&&(window.addEventListener("mouseup",Gt._endDragBefore,!0),window.addEventListener("touchend",Gt._endDragBefore,!0),window.addEventListener("touchcancel",Gt._endDragBefore,!0),window.addEventListener("mousemove",Gt._drag),window.addEventListener("touchmove",Gt._drag),window.addEventListener("mouseup",Gt._endDragAfter,!1),window.addEventListener("touchend",Gt._endDragAfter,!1),window.addEventListener("touchcancel",Gt._endDragAfter,!1));function Gi(e){return U._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||U._isBoolean(e)?e:Object.prototype.toString.call(e)}function O1(e){return e>255?255:e<0?0:Math.round(e)}function lt(){if(rt.isUnminified)return function(e,t){return U._isNumber(e)||U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function yo(e){if(rt.isUnminified)return function(t,i){let s=U._isNumber(t),l=U._isArray(t)&&t.length==e;return!s&&!l&&U.warn(Gi(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function th(){if(rt.isUnminified)return function(e,t){return U._isNumber(e)||e==="auto"||U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function ya(){if(rt.isUnminified)return function(e,t){return U._isString(e)||U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function H1(){if(rt.isUnminified)return function(e,t){const i=U._isString(e),s=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||s||U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function R5(){if(rt.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(U._isArray(e)?e.forEach(function(s){U._isNumber(s)||U.warn('"'+t+'" attribute has non numeric element '+s+". Make sure that all elements are numbers.")}):U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function Tn(){if(rt.isUnminified)return function(e,t){return e===!0||e===!1||U.warn(Gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function w5(e){if(rt.isUnminified)return function(t,i){return t==null||U.isObject(t)||U.warn(Gi(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}const tl="get",el="set",R={addGetterSetter(e,t,i,s,l){R.addGetter(e,t,i),R.addSetter(e,t,s,l),R.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){const s=tl+U._capitalize(t);e.prototype[s]=e.prototype[s]||function(){const l=this.attrs[t];return l===void 0?i:l}},addSetter(e,t,i,s){const l=el+U._capitalize(t);e.prototype[l]||R.overWriteSetter(e,t,i,s)},overWriteSetter(e,t,i,s){const l=el+U._capitalize(t);e.prototype[l]=function(o){return i&&o!==void 0&&o!==null&&(o=i.call(this,o,t)),this._setAttr(t,o),s&&s.call(this),this}},addComponentsGetterSetter(e,t,i,s,l){const o=i.length,u=U._capitalize,h=tl+u(t),f=el+u(t);e.prototype[h]=function(){const m={};for(let y=0;y<o;y++){const v=i[y];m[v]=this.getAttr(t+u(v))}return m};const d=w5(i);e.prototype[f]=function(m){const y=this.attrs[t];s&&(m=s.call(this,m,t)),d&&d.call(this,m,t);for(const v in m)m.hasOwnProperty(v)&&this._setAttr(t+u(v),m[v]);return m||i.forEach(v=>{this._setAttr(t+u(v),void 0)}),this._fireChangeEvent(t,y,m),l&&l.call(this),this},R.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const i=U._capitalize(t),s=el+i,l=tl+i;e.prototype[t]=function(){return arguments.length?(this[s](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(e,t,i,s){U.error("Adding deprecated "+t);const l=tl+U._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[l]=function(){U.error(o);const u=this.attrs[t];return u===void 0?i:u},R.addSetter(e,t,s,function(){U.error(o)}),R.addOverloadedGetterSetter(e,t)},backCompat(e,t){U.each(t,function(i,s){const l=e.prototype[s],o=tl+U._capitalize(i),u=el+U._capitalize(i);function h(){l.apply(this,arguments),U.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+s+'" instead.')}e.prototype[i]=h,e.prototype[o]=h,e.prototype[u]=h})},afterSetFilter(){this._filterUpToDate=!1}};function z5(e){const t=/(\w+)\(([^)]+)\)/g;let i;for(;(i=t.exec(e))!==null;){const[,s,l]=i;switch(s){case"blur":{const o=parseFloat(l.replace("px",""));return function(u){this.blurRadius(o*.5);const h=rt.Filters;h&&h.Blur&&h.Blur.call(this,u)}}case"brightness":{const o=l.includes("%")?parseFloat(l)/100:parseFloat(l);return function(u){this.brightness(o);const h=rt.Filters;h&&h.Brightness&&h.Brightness.call(this,u)}}case"contrast":{const o=parseFloat(l);return function(u){const h=100*(Math.sqrt(o)-1);this.contrast(h);const f=rt.Filters;f&&f.Contrast&&f.Contrast.call(this,u)}}case"grayscale":return function(o){const u=rt.Filters;u&&u.Grayscale&&u.Grayscale.call(this,o)};case"sepia":return function(o){const u=rt.Filters;u&&u.Sepia&&u.Sepia.call(this,o)};case"invert":return function(o){const u=rt.Filters;u&&u.Invert&&u.Invert.call(this,o)};default:U.warn(`CSS filter "${s}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Fr="absoluteOpacity",zr="allEventListeners",ri="absoluteTransform",h0="absoluteScale",oa="canvas",D5="Change",O5="children",H5="konva",Tc="listening",G5="mouseenter",B5="mouseleave",U5="pointerenter",L5="pointerleave",Y5="touchenter",X5="touchleave",f0="set",d0="Shape",Ir=" ",g0="stage",Mi="transform",V5="Stage",Nc="visible",q5=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ir);let P5=1;class st{constructor(t){this._id=P5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Mi||t===ri)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let s=this._cache.get(t);return(s===void 0||(t===Mi||t===ri)&&s.dirty===!0)&&(s=i.call(this),this._cache.set(t,s)),s}_calculate(t,i,s){if(!this._attachedDepsListeners.get(t)){const l=i.map(o=>o+"Change.konva").join(Ir);this.on(l,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,s)}_getCanvasCache(){return this._cache.get(oa)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ri&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(oa)){const{scene:t,filter:i,hit:s,buffer:l}=this._cache.get(oa);U.releaseCanvas(t,i,s,l),this._cache.delete(oa)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let s={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let l=Math.ceil(i.width||s.width),o=Math.ceil(i.height||s.height),u=i.pixelRatio,h=i.x===void 0?Math.floor(s.x):i.x,f=i.y===void 0?Math.floor(s.y):i.y,d=i.offset||0,m=i.drawBorder||!1,y=i.hitCanvasPixelRatio||1;if(!l||!o){U.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const v=Math.abs(Math.round(s.x)-h)>.5?1:0,_=Math.abs(Math.round(s.y)-f)>.5?1:0;l+=d*2+v,o+=d*2+_,h-=d,f-=d;const S=new zi({pixelRatio:u,width:l,height:o}),b=new zi({pixelRatio:u,width:0,height:0,willReadFrequently:!0}),C=new $c({pixelRatio:y,width:l,height:o}),x=S.getContext(),A=C.getContext(),w=new zi({width:S.width/S.pixelRatio+Math.abs(h),height:S.height/S.pixelRatio+Math.abs(f),pixelRatio:S.pixelRatio}),M=w.getContext();return C.isCache=!0,S.isCache=!0,this._cache.delete(oa),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),x.save(),A.save(),M.save(),x.translate(-h,-f),A.translate(-h,-f),M.translate(-h,-f),w.x=h,w.y=f,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Fr),this._clearSelfAndDescendantCache(h0),this.drawScene(S,this,w),this.drawHit(C,this),this._isUnderCache=!1,x.restore(),A.restore(),m&&(x.save(),x.beginPath(),x.rect(0,0,l,o),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(oa,{scene:S,filter:b,hit:C,buffer:w,x:h,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(oa)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let l=1/0,o=1/0,u=-1/0,h=-1/0;const f=this.getAbsoluteTransform(i);return s.forEach(function(d){const m=f.point(d);l===void 0&&(l=u=m.x,o=h=m.y),l=Math.min(l,m.x),o=Math.min(o,m.y),u=Math.max(u,m.x),h=Math.max(h,m.y)}),{x:l,y:o,width:u-l,height:h-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const s=this._getCachedSceneCanvas(),l=s.pixelRatio;t.drawImage(s._canvas,0,0,s.width/l,s.height/l),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),s=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(s._canvas,0,0,s.width/s.pixelRatio,s.height/s.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),s=i.scene,l=i.filter,o=l.getContext(),u,h,f,d;if(!t||t.length===0)return s;if(this._filterUpToDate)return l;let m=!0;for(let v=0;v<t.length;v++)if(typeof t[v]=="string"&&c0(),typeof t[v]!="string"||!c0()){m=!1;break}const y=s.pixelRatio;if(l.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio),m){const v=t.join(" ");return o.save(),o.setAttr("filter",v),o.drawImage(s._canvas,0,0,s.getWidth()/y,s.getHeight()/y),o.restore(),this._filterUpToDate=!0,l}try{for(u=t.length,o.clear(),o.drawImage(s._canvas,0,0,s.getWidth()/y,s.getHeight()/y),h=o.getImageData(0,0,l.getWidth(),l.getHeight()),f=0;f<u;f++)d=t[f],typeof d=="string"&&(d=z5(d)),d.call(this,h),o.putImageData(h,0,0)}catch(v){U.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,l}on(t,i){if(this._cache&&this._cache.delete(zr),arguments.length===3)return this._delegate.apply(this,arguments);const s=t.split(Ir);for(let l=0;l<s.length;l++){const u=s[l].split("."),h=u[0],f=u[1]||"";this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:f,handler:i})}return this}off(t,i){let s=(t||"").split(Ir),l=s.length,o,u,h,f,d,m;if(this._cache&&this._cache.delete(zr),!t)for(u in this.eventListeners)this._off(u);for(o=0;o<l;o++)if(h=s[o],f=h.split("."),d=f[0],m=f[1],d)this.eventListeners[d]&&this._off(d,m,i);else for(u in this.eventListeners)this._off(u,m,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(s){i.call(this,s.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,s){const l=this;this.on(t,function(o){const u=o.target.findAncestors(i,!0,l);for(let h=0;h<u.length;h++)o=U.cloneObject(o),o.currentTarget=u[h],s.call(u[h],o)})}remove(){return this.isDragging()&&this.stopDrag(),Gt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ri),this._clearSelfAndDescendantCache(Fr),this._clearSelfAndDescendantCache(h0),this._clearSelfAndDescendantCache(g0),this._clearSelfAndDescendantCache(Nc),this._clearSelfAndDescendantCache(Tc)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+U._capitalize(t);return U._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,s;if(!t)return this;for(i in t)i!==O5&&(s=f0+U._capitalize(i),U._isFunction(this[s])?this[s](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Tc,this._isListening)}_isListening(t){if(!this.listening())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isListening(t):!0}isVisible(){return this._getCache(Nc,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const s=this.getLayer();let l=!1;Gt._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(u.node.nodeType==="Stage"||u.node.getLayer()===s)&&(l=!0)});const o=!i&&!rt.hitOnDragEnabled&&(l||rt.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,s=0,l,o,u,h;function f(m){for(l=[],o=m.length,u=0;u<o;u++)h=m[u],s++,h.nodeType!==d0&&(l=l.concat(h.getChildren().slice())),h._id===i._id&&(u=o);l.length>0&&l[0].getDepth()<=t&&f(l)}const d=this.getStage();return i.nodeType!==V5&&d&&f(d.getChildren()),s}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Mi),this._clearSelfAndDescendantCache(ri)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const s=this.getAbsoluteTransform().copy();return s.invert(),s.point(i)}getAbsolutePosition(t){let i=!1,s=this.parent;for(;s;){if(s.isCached()){i=!0;break}s=s.parent}i&&!t&&(t=!0);const l=this.getAbsoluteTransform(t).getMatrix(),o=new En,u=this.offset();return o.m=l.slice(),o.translate(u.x,u.y),o.getTranslation()}setAbsolutePosition(t){const{x:i,y:s,...l}=this._clearTransform();this.attrs.x=i,this.attrs.y=s,this._clearCache(Mi);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(l),this.setPosition({x:t.x,y:t.y}),this._clearCache(Mi),this._clearSelfAndDescendantCache(ri),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,s=t.y,l=this.x(),o=this.y();return i!==void 0&&(l+=i),s!==void 0&&(o+=s),this.setPosition({x:l,y:o}),this}_eachAncestorReverse(t,i){let s=[],l=this.getParent(),o,u;if(!(i&&i._id===this._id)){for(s.unshift(this);l&&(!i||l._id!==i._id);)s.unshift(l),l=l.parent;for(o=s.length,u=0;u<o;u++)t(s[u])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return U.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return U.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return U.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return U.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return U.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&U.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Fr,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,s,l,o,u;const h={attrs:{},className:this.getClassName()};for(i in t)s=t[i],u=U.isObject(s)&&!U._isPlainObject(s)&&!U._isArray(s),!u&&(l=typeof this[i]=="function"&&this[i],delete t[i],o=l?l.call(this):null,t[i]=s,o!==s&&(h.attrs[i]=s));return U._prepareToStringify(h)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,s){const l=[];i&&this._isMatch(t)&&l.push(this);let o=this.parent;for(;o;){if(o===s)return l;o._isMatch(t)&&l.push(o),o=o.parent}return l}isAncestorOf(t){return!1}findAncestor(t,i,s){return this.findAncestors(t,i,s)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),s=i.length,l,o;for(l=0;l<s;l++)if(o=i[l],U.isValidSelector(o)||(U.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),U.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),U.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(g0,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},s){return i.target=i.target||this,s?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ri,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new En,this._eachAncestorReverse(function(s){const l=s.transformsEnabled();l==="all"?i.multiply(s.getTransform()):l==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),i;{i=this._cache.get(ri)||new En,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const s=this.transformsEnabled();if(s==="all")i.multiply(this.getTransform());else if(s==="position"){const l=this.attrs.x||0,o=this.attrs.y||0,u=this.attrs.offsetX||0,h=this.attrs.offsetY||0;i.translate(l-u,o-h)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const l=this.getAbsoluteTransform(t).decompose();return{x:l.scaleX,y:l.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Mi,this._getTransform)}_getTransform(){var t,i;const s=this._cache.get(Mi)||new En;s.reset();const l=this.x(),o=this.y(),u=rt.getAngle(this.rotation()),h=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,f=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,d=this.attrs.skewX||0,m=this.attrs.skewY||0,y=this.attrs.offsetX||0,v=this.attrs.offsetY||0;return(l!==0||o!==0)&&s.translate(l,o),u!==0&&s.rotate(u),(d!==0||m!==0)&&s.skew(d,m),(h!==1||f!==1)&&s.scale(h,f),(y!==0||v!==0)&&s.translate(-1*y,-1*v),s.dirty=!1,s}clone(t){let i=U.cloneObject(this.attrs),s,l,o,u,h;for(s in t)i[s]=t[s];const f=new this.constructor(i);for(s in this.eventListeners)for(l=this.eventListeners[s],o=l.length,u=0;u<o;u++)h=l[u],h.name.indexOf(H5)<0&&(f.eventListeners[s]||(f.eventListeners[s]=[]),f.eventListeners[s].push(h));return f}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),s=this.getStage(),l=t.x!==void 0?t.x:Math.floor(i.x),o=t.y!==void 0?t.y:Math.floor(i.y),u=t.pixelRatio||1,h=new zi({width:t.width||Math.ceil(i.width)||(s?s.width():0),height:t.height||Math.ceil(i.height)||(s?s.height():0),pixelRatio:u}),f=h.getContext(),d=new zi({width:h.width/h.pixelRatio+Math.abs(l),height:h.height/h.pixelRatio+Math.abs(o),pixelRatio:h.pixelRatio});return t.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(l||o)&&f.translate(-1*l,-1*o),this.drawScene(h,void 0,d),f.restore(),h}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,s=t.quality||null,l=this._toKonvaCanvas(t).toDataURL(i,s);return t.callback&&t.callback(l),l}toImage(t){return new Promise((i,s)=>{try{const l=t?.callback;l&&delete t.callback,U._urlToImage(this.toDataURL(t),function(o){i(o),l?.(o)})}catch(l){s(l)}})}toBlob(t){return new Promise((i,s)=>{try{const l=t?.callback;l&&delete t.callback,this.toCanvas(t).toBlob(o=>{i(o),l?.(o)},t?.mimeType,t?.quality)}catch(l){s(l)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():rt.dragDistance}_off(t,i,s){let l=this.eventListeners[t],o,u,h;for(o=0;o<l.length;o++)if(u=l[o].name,h=l[o].handler,(u!=="konva"||i==="konva")&&(!i||u===i)&&(!s||s===h)){if(l.splice(o,1),l.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,i,s){this._fire(t+D5,{oldVal:i,newVal:s})}addName(t){if(!this.hasName(t)){const i=this.name(),s=i?i+" "+t:t;this.name(s)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),s=i.indexOf(t);return s!==-1&&(i.splice(s,1),this.name(i.join(" "))),this}setAttr(t,i){const s=this[f0+U._capitalize(t)];return U._isFunction(s)?s.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(rt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,i){const s=this.attrs[t];s===i&&!U.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,s,i),this._requestDraw())}_setComponentAttr(t,i,s){let l;s!==void 0&&(l=this.attrs[t],l||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=s,this._fireChangeEvent(t,l,s))}_fireAndBubble(t,i,s){i&&this.nodeType===d0&&(i.target=this);const l=[G5,B5,U5,L5,Y5,X5];if(!(l.indexOf(t)!==-1&&(s&&(this===s||this.isAncestorOf&&this.isAncestorOf(s))||this.nodeType==="Stage"&&!s))){this._fire(t,i);const u=l.indexOf(t)!==-1&&s&&s.isAncestorOf&&s.isAncestorOf(this)&&!s.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!u&&(s&&s.parent?this._fireAndBubble.call(this.parent,t,i,s):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,s,l;const o=(i=this._cache.get(zr))!==null&&i!==void 0?i:{};let u=o?.[t];if(u===void 0){u=[];let h=Object.getPrototypeOf(this);for(;h;){const f=(l=(s=h.eventListeners)===null||s===void 0?void 0:s[t])!==null&&l!==void 0?l:[];u.push(...f),h=Object.getPrototypeOf(h)}o[t]=u,this._cache.set(zr,o)}return u}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const s=this._getProtoListeners(t);if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,i);const l=this.eventListeners[t];if(l)for(let o=0;o<l.length;o++)l[o].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,s=this.getStage(),l=this.getAbsolutePosition();if(!s)return;const o=s._getPointerById(i)||s._changedPointerPositions[0]||l;Gt._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-l.x,y:o.y-l.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){Gt._dragElements.has(this._id)||this._createDragElement(t);const s=Gt._dragElements.get(this._id);s.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const s=this.getStage()._getPointerById(i.pointerId);if(!s)return;let l={x:s.x-i.offset.x,y:s.y-i.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const u=o.call(this,l,t);u?l=u:U.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==l.x||this._lastPos.y!==l.y)&&(this.setAbsolutePosition(l),this._requestDraw()),this._lastPos=l}stopDrag(t){const i=Gt._dragElements.get(this._id);i&&(i.dragStatus="stopped"),Gt._endDragBefore(t),Gt._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=Gt._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||rt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let l=!1;Gt._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(l=!0)}),l||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=Gt._dragElements.get(this._id),s=i&&i.dragStatus==="dragging",l=i&&i.dragStatus==="ready";s?this.stopDrag():l&&Gt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const s={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return U.haveIntersection(s,this.getClientRect())}static create(t,i){return U._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let s=st.prototype.getClassName.call(t),l=t.children,o,u,h;i&&(t.attrs.container=i),rt[s]||(U.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");const f=rt[s];if(o=new f(t.attrs),l)for(u=l.length,h=0;h<u;h++)o.add(st._createNode(l[h]));return o}}st.prototype.nodeType="Node";st.prototype._attrsAffectingSize=[];st.prototype.eventListeners={};st.prototype.on.call(st.prototype,q5,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Mi),this._clearSelfAndDescendantCache(ri)});st.prototype.on.call(st.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Nc)});st.prototype.on.call(st.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Tc)});st.prototype.on.call(st.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Fr)});const Xt=R.addGetterSetter;Xt(st,"zIndex");Xt(st,"absolutePosition");Xt(st,"position");Xt(st,"x",0,lt());Xt(st,"y",0,lt());Xt(st,"globalCompositeOperation","source-over",ya());Xt(st,"opacity",1,lt());Xt(st,"name","",ya());Xt(st,"id","",ya());Xt(st,"rotation",0,lt());R.addComponentsGetterSetter(st,"scale",["x","y"]);Xt(st,"scaleX",1,lt());Xt(st,"scaleY",1,lt());R.addComponentsGetterSetter(st,"skew",["x","y"]);Xt(st,"skewX",0,lt());Xt(st,"skewY",0,lt());R.addComponentsGetterSetter(st,"offset",["x","y"]);Xt(st,"offsetX",0,lt());Xt(st,"offsetY",0,lt());Xt(st,"dragDistance",void 0,lt());Xt(st,"width",0,lt());Xt(st,"height",0,lt());Xt(st,"listening",!0,Tn());Xt(st,"preventDefault",!0,Tn());Xt(st,"filters",void 0,function(e){return this._filterUpToDate=!1,e});Xt(st,"visible",!0,Tn());Xt(st,"transformsEnabled","all",ya());Xt(st,"size");Xt(st,"dragBoundFunc");Xt(st,"draggable",!1,Tn());R.backCompat(st,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class We extends st{constructor(){super(...arguments),this.children=[]}getChildren(t){const i=this.children||[];return t?i.filter(t):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let s=0;s<t.length;s++)this.add(t[s]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const s=[];return this._descendants(l=>{const o=l._isMatch(t);return o&&s.push(l),!!(o&&i)}),s}_descendants(t){let i=!1;const s=this.getChildren();for(const l of s){if(i=t(l),i)return!0;if(l.hasChildren()&&(i=l._descendants(t),i))return!0}return!1}toObject(){const t=st.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=st.prototype.clone.call(this,t);return this.getChildren().forEach(function(s){i.add(s.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(t)&&i.push(s)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(s){s._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,s){i.index=s}),this._requestDraw()}drawScene(t,i,s){const l=this.getLayer(),o=t||l&&l.getCanvas(),u=o&&o.getContext(),h=this._getCanvasCache(),f=h&&h.scene,d=o&&o.isCache;if(!this.isVisible()&&!d)return this;if(f){u.save();const m=this.getAbsoluteTransform(i).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(u),u.restore()}else this._drawChildren("drawScene",o,i,s);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const s=this.getLayer(),l=t||s&&s.hitCanvas,o=l&&l.getContext(),u=this._getCanvasCache();if(u&&u.hit){o.save();const f=this.getAbsoluteTransform(i).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",l,i);return this}_drawChildren(t,i,s,l){var o;const u=i&&i.getContext(),h=this.clipWidth(),f=this.clipHeight(),d=this.clipFunc(),m=typeof h=="number"&&typeof f=="number"||d,y=s===this;if(m){u.save();const _=this.getAbsoluteTransform(s);let S=_.getMatrix();u.transform(S[0],S[1],S[2],S[3],S[4],S[5]),u.beginPath();let b;if(d)b=d.call(this,u,this);else{const C=this.clipX(),x=this.clipY();u.rect(C||0,x||0,h,f)}u.clip.apply(u,b),S=_.copy().invert().getMatrix(),u.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";v&&(u.save(),u._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(_){_[t](i,s,l)}),v&&u.restore(),m&&u.restore()}getClientRect(t={}){var i;const s=t.skipTransform,l=t.relativeTo;let o,u,h,f,d={x:1/0,y:1/0,width:0,height:0};const m=this;(i=this.children)===null||i===void 0||i.forEach(function(_){if(!_.visible())return;const S=_.getClientRect({relativeTo:m,skipShadow:t.skipShadow,skipStroke:t.skipStroke});S.width===0&&S.height===0||(o===void 0?(o=S.x,u=S.y,h=S.x+S.width,f=S.y+S.height):(o=Math.min(o,S.x),u=Math.min(u,S.y),h=Math.max(h,S.x+S.width),f=Math.max(f,S.y+S.height)))});const y=this.find("Shape");let v=!1;for(let _=0;_<y.length;_++)if(y[_]._isVisible(this)){v=!0;break}return v&&o!==void 0?d={x:o,y:u,width:h-o,height:f-u}:d={x:0,y:0,width:0,height:0},s?d:this._transformedRect(d,l)}}R.addComponentsGetterSetter(We,"clip",["x","y","width","height"]);R.addGetterSetter(We,"clipX",void 0,lt());R.addGetterSetter(We,"clipY",void 0,lt());R.addGetterSetter(We,"clipWidth",void 0,lt());R.addGetterSetter(We,"clipHeight",void 0,lt());R.addGetterSetter(We,"clipFunc");const Sl=new Map,G1=rt._global.PointerEvent!==void 0;function ec(e){return Sl.get(e)}function eh(e){return{evt:e,pointerId:e.pointerId}}function B1(e,t){return Sl.get(e)===t}function U1(e,t){pl(e),t.getStage()&&(Sl.set(e,t),G1&&t._fire("gotpointercapture",eh(new PointerEvent("gotpointercapture"))))}function pl(e,t){const i=Sl.get(e);if(!i)return;const s=i.getStage();s&&s.content,Sl.delete(e),G1&&i._fire("lostpointercapture",eh(new PointerEvent("lostpointercapture")))}const K5="Stage",Q5="string",m0="px",Z5="mouseout",L1="mouseleave",Y1="mouseover",X1="mouseenter",V1="mousemove",q1="mousedown",P1="mouseup",ul="pointermove",cl="pointerdown",os="pointerup",hl="pointercancel",k5="lostpointercapture",Dr="pointerout",fl="pointerleave",Or="pointerover",Hr="pointerenter",Ac="contextmenu",K1="touchstart",Q1="touchend",Z1="touchmove",k1="touchcancel",Mc="wheel",j5=5,F5=[[X1,"_pointerenter"],[q1,"_pointerdown"],[V1,"_pointermove"],[P1,"_pointerup"],[L1,"_pointerleave"],[K1,"_pointerdown"],[Z1,"_pointermove"],[Q1,"_pointerup"],[k1,"_pointercancel"],[Y1,"_pointerover"],[Mc,"_wheel"],[Ac,"_contextmenu"],[cl,"_pointerdown"],[ul,"_pointermove"],[os,"_pointerup"],[hl,"_pointercancel"],[fl,"_pointerleave"],[k5,"_lostpointercapture"]],nc={mouse:{[Dr]:Z5,[fl]:L1,[Or]:Y1,[Hr]:X1,[ul]:V1,[cl]:q1,[os]:P1,[hl]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Dr]:"touchout",[fl]:"touchleave",[Or]:"touchover",[Hr]:"touchenter",[ul]:Z1,[cl]:K1,[os]:Q1,[hl]:k1,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Dr]:Dr,[fl]:fl,[Or]:Or,[Hr]:Hr,[ul]:ul,[cl]:cl,[os]:os,[hl]:hl,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},dl=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",ns=e=>{const t=dl(e);if(t==="pointer")return rt.pointerEventsEnabled&&nc.pointer;if(t==="touch")return nc.touch;if(t==="mouse")return nc.mouse};function p0(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&U.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const I5="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",yl=[];let vo=class extends We{constructor(t){super(p0(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),yl.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{p0(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",s=t.getType()==="FastLayer";i||s||U.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Q5){let i;if(t.charAt(0)==="."){const s=t.slice(1);t=document.getElementsByClassName(s)[0]}else t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i);if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,i=t.length;for(let s=0;s<i;s++)t[s].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),We.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&U._isInDocument(t)&&this.container().removeChild(t);const i=yl.indexOf(this);return i>-1&&yl.splice(i,1),U.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(U.warn(I5),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const i=new zi({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),s=i.getContext()._context,l=this.children;return(t.x||t.y)&&s.translate(-1*t.x,-1*t.y),l.forEach(function(o){if(!o.isVisible())return;const u=o._toKonvaCanvas(t);s.drawImage(u._canvas,t.x,t.y,u.getWidth()/u.getPixelRatio(),u.getHeight()/u.getPixelRatio())}),i}getIntersection(t){if(!t)return null;const i=this.children,s=i.length,l=s-1;for(let o=l;o>=0;o--){const u=i[o].getIntersection(t);if(u)return u}return null}_resizeDOM(){const t=this.width(),i=this.height();this.content&&(this.content.style.width=t+m0,this.content.style.height=i+m0),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(s=>{s.setSize({width:t,height:i}),s.draw()})}add(t,...i){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}super.add(t);const s=this.children.length;return s>j5&&U.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),rt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return B1(t,this)}setPointerCapture(t){U1(t,this)}releaseCapture(t){pl(t)}getLayers(){return this.children}_bindContentEvents(){rt.isBrowser&&F5.forEach(([t,i])=>{this.content.addEventListener(t,s=>{this[i](s)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=ns(t.type);i&&this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=ns(t.type);i&&this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=ns(t.type),s=dl(t.type);if(!i)return;this.setPointersPositions(t);const l=this._getTargetShape(s),o=!(rt.isDragging()||rt.isTransforming())||rt.hitOnDragEnabled;l&&o?(l._fireAndBubble(i.pointerout,{evt:t}),l._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[s+"targetShape"]=null):o&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const i=ns(t.type),s=dl(t.type);if(!i)return;this.setPointersPositions(t);let l=!1;this._changedPointerPositions.forEach(o=>{const u=this.getIntersection(o);if(Gt.justDragged=!1,rt["_"+s+"ListenClick"]=!0,!u||!u.isListening()){this[s+"ClickStartShape"]=void 0;return}rt.capturePointerEventsEnabled&&u.setPointerCapture(o.id),this[s+"ClickStartShape"]=u,u._fireAndBubble(i.pointerdown,{evt:t,pointerId:o.id}),l=!0;const h=t.type.indexOf("touch")>=0;u.preventDefault()&&t.cancelable&&h&&t.preventDefault()}),l||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const i=ns(t.type),s=dl(t.type);if(!i)return;const l=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(rt.isDragging()&&Gt.node.preventDefault()&&t.cancelable&&l&&t.preventDefault(),this.setPointersPositions(t),!(!(rt.isDragging()||rt.isTransforming())||rt.hitOnDragEnabled))return;const u={};let h=!1;const f=this._getTargetShape(s);this._changedPointerPositions.forEach(d=>{const m=ec(d.id)||this.getIntersection(d),y=d.id,v={evt:t,pointerId:y},_=f!==m;if(_&&f&&(f._fireAndBubble(i.pointerout,{...v},m),f._fireAndBubble(i.pointerleave,{...v},m)),m){if(u[m._id])return;u[m._id]=!0}m&&m.isListening()?(h=!0,_&&(m._fireAndBubble(i.pointerover,{...v},f),m._fireAndBubble(i.pointerenter,{...v},f),this[s+"targetShape"]=m),m._fireAndBubble(i.pointermove,{...v})):f&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:y}),this[s+"targetShape"]=null)}),h||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=ns(t.type),s=dl(t.type);if(!i)return;this.setPointersPositions(t);const l=this[s+"ClickStartShape"],o=this[s+"ClickEndShape"],u={};let h=!1;this._changedPointerPositions.forEach(f=>{const d=ec(f.id)||this.getIntersection(f);if(d){if(d.releaseCapture(f.id),u[d._id])return;u[d._id]=!0}const m=f.id,y={evt:t,pointerId:m};let v=!1;rt["_"+s+"InDblClickWindow"]?(v=!0,clearTimeout(this[s+"DblTimeout"])):Gt.justDragged||(rt["_"+s+"InDblClickWindow"]=!0,clearTimeout(this[s+"DblTimeout"])),this[s+"DblTimeout"]=setTimeout(function(){rt["_"+s+"InDblClickWindow"]=!1},rt.dblClickWindow),d&&d.isListening()?(h=!0,this[s+"ClickEndShape"]=d,d._fireAndBubble(i.pointerup,{...y}),rt["_"+s+"ListenClick"]&&l&&l===d&&(d._fireAndBubble(i.pointerclick,{...y}),v&&o&&o===d&&d._fireAndBubble(i.pointerdblclick,{...y}))):(this[s+"ClickEndShape"]=null,h||(this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),h=!0),rt["_"+s+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:m}),v&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:m}))}),h||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),rt["_"+s+"ListenClick"]=!1,t.cancelable&&s!=="touch"&&s!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Ac,{evt:t}):this._fire(Ac,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Mc,{evt:t}):this._fire(Mc,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=ec(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(os,eh(t)),pl(t.pointerId)}_lostpointercapture(t){pl(t.pointerId)}setPointersPositions(t){const i=this._getContentPosition();let s=null,l=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-i.left)/i.scaleX,y:(o.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-i.left)/i.scaleX,y:(o.clientY-i.top)/i.scaleY})})):(s=(t.clientX-i.left)/i.scaleX,l=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:s,y:l},this._pointerPositions=[{x:s,y:l,id:U._getFirstPointerId(t)}],this._changedPointerPositions=[{x:s,y:l,id:U._getFirstPointerId(t)}])}_setPointerPosition(t){U.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new zi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new $c({pixelRatio:1,width:this.width(),height:this.height()}),!rt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return U.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};vo.prototype.nodeType=K5;Jt(vo);R.addGetterSetter(vo,"container");rt.isBrowser&&document.addEventListener("visibilitychange",()=>{yl.forEach(e=>{e.batchDraw()})});const j1="hasShadow",F1="shadowRGBA",I1="patternImage",J1="linearGradient",W1="radialGradient";let Gr;function ic(){return Gr||(Gr=U.createCanvasElement().getContext("2d"),Gr)}const vl={};function J5(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function W5(e){e.stroke()}function $5(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function t3(e){e.stroke()}function e3(){this._clearCache(j1)}function n3(){this._clearCache(F1)}function i3(){this._clearCache(I1)}function a3(){this._clearCache(J1)}function s3(){this._clearCache(W1)}class nt extends st{constructor(t){super(t);let i,s=0;for(;i=U.getHitColor(),!(i&&!(i in vl));)if(s++,s>=1e4){U.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),i=U.getRandomColor();break}this.colorKey=i,vl[i]=this}getContext(){return U.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return U.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(j1,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(I1,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const i=ic().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const s=new En;s.translate(this.fillPatternX(),this.fillPatternY()),s.rotate(rt.getAngle(this.fillPatternRotation())),s.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),s.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const l=s.getMatrix(),o=typeof DOMMatrix>"u"?{a:l[0],b:l[1],c:l[2],d:l[3],e:l[4],f:l[5]}:new DOMMatrix(l);i.setTransform(o)}return i}}_getLinearGradient(){return this._getCache(J1,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const i=ic(),s=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),o=i.createLinearGradient(s.x,s.y,l.x,l.y);for(let u=0;u<t.length;u+=2)o.addColorStop(t[u],t[u+1]);return o}}_getRadialGradient(){return this._getCache(W1,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const i=ic(),s=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),o=i.createRadialGradient(s.x,s.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let u=0;u<t.length;u+=2)o.addColorStop(t[u],t[u+1]);return o}}getShadowRGBA(){return this._getCache(F1,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=U.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const i=this.getStage();if(!i)return!1;const s=i.bufferHitCanvas;return s.getContext().clear(),this.drawHit(s,void 0,!0),s.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return st.prototype.destroy.call(this),delete vl[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const l=t||this.hasFill(),o=this.hasStroke(),u=this.getAbsoluteOpacity()!==1;if(l&&o&&u)return!0;const h=this.hasShadow(),f=this.shadowForStrokeEnabled();return!!(l&&o&&h&&f)}setStrokeHitEnabled(t){U.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let i=!1,s=this.getParent();for(;s;){if(s.isCached()){i=!0;break}s=s.getParent()}const l=t.skipTransform,o=t.relativeTo||i&&this.getStage()||void 0,u=this.getSelfRect(),f=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,d=u.width+f,m=u.height+f,y=!t.skipShadow&&this.hasShadow(),v=y?this.shadowOffsetX():0,_=y?this.shadowOffsetY():0,S=d+Math.abs(v),b=m+Math.abs(_),C=y&&this.shadowBlur()||0,x=S+C*2,A=b+C*2,w={width:x,height:A,x:-(f/2+C)+Math.min(v,0)+u.x,y:-(f/2+C)+Math.min(_,0)+u.y};return l?w:this._transformedRect(w,o)}drawScene(t,i,s){const l=this.getLayer(),o=t||l.getCanvas(),u=o.getContext(),h=this._getCanvasCache(),f=this.getSceneFunc(),d=this.hasShadow();let m;const y=i===this;if(!this.isVisible()&&!y)return this;if(h){u.save();const v=this.getAbsoluteTransform(i).getMatrix();return u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(u),u.restore(),this}if(!f)return this;if(u.save(),this._useBufferCanvas()){m=this.getStage();const v=s||m.bufferCanvas,_=v.getContext();_.clear(),_.save(),_._applyLineJoin(this),_._applyMiterLimit(this);const S=this.getAbsoluteTransform(i).getMatrix();_.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.call(this,_,this),_.restore();const b=v.pixelRatio;d&&u._applyShadow(this),y||(u._applyOpacity(this),u._applyGlobalCompositeOperation(this)),u.drawImage(v._canvas,v.x||0,v.y||0,v.width/b,v.height/b)}else{if(u._applyLineJoin(this),u._applyMiterLimit(this),!y){const v=this.getAbsoluteTransform(i).getMatrix();u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),u._applyOpacity(this),u._applyGlobalCompositeOperation(this)}d&&u._applyShadow(this),f.call(this,u,this)}return u.restore(),this}drawHit(t,i,s=!1){if(!this.shouldDrawHit(i,s))return this;const l=this.getLayer(),o=t||l.hitCanvas,u=o&&o.getContext(),h=this.hitFunc()||this.sceneFunc(),f=this._getCanvasCache(),d=f&&f.hit;if(this.colorKey||U.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),d){u.save();const y=this.getAbsoluteTransform(i).getMatrix();return u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(u),u.restore(),this}if(!h)return this;if(u.save(),u._applyLineJoin(this),u._applyMiterLimit(this),!(this===i)){const y=this.getAbsoluteTransform(i).getMatrix();u.transform(y[0],y[1],y[2],y[3],y[4],y[5])}return h.call(this,u,this),u.restore(),this}drawHitFromCache(t=0){const i=this._getCanvasCache(),s=this._getCachedSceneCanvas(),l=i.hit,o=l.getContext(),u=l.getWidth(),h=l.getHeight();o.clear(),o.drawImage(s._canvas,0,0,u,h);try{const f=o.getImageData(0,0,u,h),d=f.data,m=d.length,y=U._hexToRgb(this.colorKey);for(let v=0;v<m;v+=4)d[v+3]>t?(d[v]=y.r,d[v+1]=y.g,d[v+2]=y.b,d[v+3]=255):d[v+3]=0;o.putImageData(f,0,0)}catch(f){U.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this}hasPointerCapture(t){return B1(t,this)}setPointerCapture(t){U1(t,this)}releaseCapture(t){pl(t)}}nt.prototype._fillFunc=J5;nt.prototype._strokeFunc=W5;nt.prototype._fillFuncHit=$5;nt.prototype._strokeFuncHit=t3;nt.prototype._centroid=!1;nt.prototype.nodeType="Shape";Jt(nt);nt.prototype.eventListeners={};nt.prototype.on.call(nt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",e3);nt.prototype.on.call(nt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",n3);nt.prototype.on.call(nt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",i3);nt.prototype.on.call(nt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",a3);nt.prototype.on.call(nt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",s3);R.addGetterSetter(nt,"stroke",void 0,H1());R.addGetterSetter(nt,"strokeWidth",2,lt());R.addGetterSetter(nt,"fillAfterStrokeEnabled",!1);R.addGetterSetter(nt,"hitStrokeWidth","auto",th());R.addGetterSetter(nt,"strokeHitEnabled",!0,Tn());R.addGetterSetter(nt,"perfectDrawEnabled",!0,Tn());R.addGetterSetter(nt,"shadowForStrokeEnabled",!0,Tn());R.addGetterSetter(nt,"lineJoin");R.addGetterSetter(nt,"lineCap");R.addGetterSetter(nt,"miterLimit");R.addGetterSetter(nt,"sceneFunc");R.addGetterSetter(nt,"hitFunc");R.addGetterSetter(nt,"dash");R.addGetterSetter(nt,"dashOffset",0,lt());R.addGetterSetter(nt,"shadowColor",void 0,ya());R.addGetterSetter(nt,"shadowBlur",0,lt());R.addGetterSetter(nt,"shadowOpacity",1,lt());R.addComponentsGetterSetter(nt,"shadowOffset",["x","y"]);R.addGetterSetter(nt,"shadowOffsetX",0,lt());R.addGetterSetter(nt,"shadowOffsetY",0,lt());R.addGetterSetter(nt,"fillPatternImage");R.addGetterSetter(nt,"fill",void 0,H1());R.addGetterSetter(nt,"fillPatternX",0,lt());R.addGetterSetter(nt,"fillPatternY",0,lt());R.addGetterSetter(nt,"fillLinearGradientColorStops");R.addGetterSetter(nt,"strokeLinearGradientColorStops");R.addGetterSetter(nt,"fillRadialGradientStartRadius",0);R.addGetterSetter(nt,"fillRadialGradientEndRadius",0);R.addGetterSetter(nt,"fillRadialGradientColorStops");R.addGetterSetter(nt,"fillPatternRepeat","repeat");R.addGetterSetter(nt,"fillEnabled",!0);R.addGetterSetter(nt,"strokeEnabled",!0);R.addGetterSetter(nt,"shadowEnabled",!0);R.addGetterSetter(nt,"dashEnabled",!0);R.addGetterSetter(nt,"strokeScaleEnabled",!0);R.addGetterSetter(nt,"fillPriority","color");R.addComponentsGetterSetter(nt,"fillPatternOffset",["x","y"]);R.addGetterSetter(nt,"fillPatternOffsetX",0,lt());R.addGetterSetter(nt,"fillPatternOffsetY",0,lt());R.addComponentsGetterSetter(nt,"fillPatternScale",["x","y"]);R.addGetterSetter(nt,"fillPatternScaleX",1,lt());R.addGetterSetter(nt,"fillPatternScaleY",1,lt());R.addComponentsGetterSetter(nt,"fillLinearGradientStartPoint",["x","y"]);R.addComponentsGetterSetter(nt,"strokeLinearGradientStartPoint",["x","y"]);R.addGetterSetter(nt,"fillLinearGradientStartPointX",0);R.addGetterSetter(nt,"strokeLinearGradientStartPointX",0);R.addGetterSetter(nt,"fillLinearGradientStartPointY",0);R.addGetterSetter(nt,"strokeLinearGradientStartPointY",0);R.addComponentsGetterSetter(nt,"fillLinearGradientEndPoint",["x","y"]);R.addComponentsGetterSetter(nt,"strokeLinearGradientEndPoint",["x","y"]);R.addGetterSetter(nt,"fillLinearGradientEndPointX",0);R.addGetterSetter(nt,"strokeLinearGradientEndPointX",0);R.addGetterSetter(nt,"fillLinearGradientEndPointY",0);R.addGetterSetter(nt,"strokeLinearGradientEndPointY",0);R.addComponentsGetterSetter(nt,"fillRadialGradientStartPoint",["x","y"]);R.addGetterSetter(nt,"fillRadialGradientStartPointX",0);R.addGetterSetter(nt,"fillRadialGradientStartPointY",0);R.addComponentsGetterSetter(nt,"fillRadialGradientEndPoint",["x","y"]);R.addGetterSetter(nt,"fillRadialGradientEndPointX",0);R.addGetterSetter(nt,"fillRadialGradientEndPointY",0);R.addGetterSetter(nt,"fillPatternRotation",0);R.addGetterSetter(nt,"fillRule",void 0,ya());R.backCompat(nt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const l3="beforeDraw",r3="draw",$1=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],o3=$1.length;let va=class extends We{constructor(t){super(t),this.canvas=new zi,this.hitCanvas=new $c({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){st.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!st.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(st.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(st.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return st.prototype.remove.call(this),t&&t.parentNode&&U._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&U.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),st.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){U.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){U.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,U.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,s=!1;for(;;){for(let l=0;l<o3;l++){const o=$1[l],u=this._getIntersection({x:t.x+o.x*i,y:t.y+o.y*i}),h=u.shape;if(h)return h;if(s=!!u.antialiased,!u.antialiased)break}if(s)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,s=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,l=s[3];if(l===255){const o=U.getHitColorKey(s[0],s[1],s[2]),u=vl[o];return u?{shape:u}:{antialiased:!0}}else if(l>0)return{antialiased:!0};return{}}drawScene(t,i,s){const l=this.getLayer(),o=t||l&&l.getCanvas();return this._fire(l3,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),We.prototype.drawScene.call(this,o,i,s),this._fire(r3,{node:this}),this}drawHit(t,i){const s=this.getLayer(),l=t||s&&s.hitCanvas;return s&&s.clearBeforeDraw()&&s.getHitCanvas().getContext().clear(),We.prototype.drawHit.call(this,l,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){U.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return U.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return U.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};va.prototype.nodeType="Layer";Jt(va);R.addGetterSetter(va,"imageSmoothingEnabled",!0);R.addGetterSetter(va,"clearBeforeDraw",!0);R.addGetterSetter(va,"hitGraphEnabled",!0,Tn());class nh extends va{constructor(t){super(t),this.listening(!1),U.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}nh.prototype.nodeType="FastLayer";Jt(nh);let gs=class extends We{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&U.throw("You may only add groups and shapes to groups.")}};gs.prototype.nodeType="Group";Jt(gs);const ac=(function(){return ca.performance&&ca.performance.now?function(){return ca.performance.now()}:function(){return new Date().getTime()}})();class cn{constructor(t,i){this.id=cn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ac(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,s=i.length;for(let l=0;l<s;l++)if(i[l]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=cn.animations,s=i.length;for(let l=0;l<s;l++)if(i[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ac(),cn._addAnimation(this),this}stop(){return cn._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,s=this.animations,l=s.length;for(let o=0;o<l;o++)if(s[o].id===i){this.animations.splice(o,1);break}}static _runFrames(){const t={},i=this.animations;for(let s=0;s<i.length;s++){const l=i[s],o=l.layers,u=l.func;l._updateFrameObject(ac());const h=o.length;let f;if(u?f=u.call(l,l.frame)!==!1:f=!0,!!f)for(let d=0;d<h;d++){const m=o[d];m._id!==void 0&&(t[m._id]=m)}}for(const s in t)t.hasOwnProperty(s)&&t[s].batchDraw()}static _animationLoop(){const t=cn;t.animations.length?(t._runFrames(),U.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,U.requestAnimFrame(this._animationLoop))}}cn.animations=[];cn.animIdCounter=0;cn.animRunning=!1;const u3={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c3=1,y0=2,v0=3,_0=["fill","stroke","shadowColor"];let h3=0;class f3{constructor(t,i,s,l,o,u,h){this.prop=t,this.propFunc=i,this.begin=l,this._pos=l,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=h,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=s,this._change=o-this.begin,this.pause()}fire(t){const i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=y0,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=v0,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===y0?this.setTime(t):this.state===v0&&this.setTime(this.duration-t)}pause(){this.state=c3,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Vt{constructor(t){const i=this,s=t.node,l=s._id,o=t.easing||_l.Linear,u=!!t.yoyo;let h,f;typeof t.duration>"u"?h=.3:t.duration===0?h=.001:h=t.duration,this.node=s,this._id=h3++;const d=s.getLayer()||(s instanceof rt.Stage?s.getLayers():null);d||U.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new cn(function(){i.tween.onEnterFrame()},d),this.tween=new f3(f,function(m){i._tweenFunc(m)},o,0,1,h*1e3,u),this._addListeners(),Vt.attrs[l]||(Vt.attrs[l]={}),Vt.attrs[l][this._id]||(Vt.attrs[l][this._id]={}),Vt.tweens[l]||(Vt.tweens[l]={});for(f in t)u3[f]===void 0&&this._addAttr(f,t[f]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){const s=this.node,l=s._id;let o,u,h,f,d;const m=Vt.tweens[l][t];m&&delete Vt.attrs[l][m][t];let y=s.getAttr(t);if(U._isArray(i))if(o=[],u=Math.max(i.length,y.length),t==="points"&&i.length!==y.length&&(i.length>y.length?(f=y,y=U._prepareArrayForTween(y,i,s.closed())):(h=i,i=U._prepareArrayForTween(i,y,s.closed()))),t.indexOf("fill")===0)for(let v=0;v<u;v++)if(v%2===0)o.push(i[v]-y[v]);else{const _=U.colorToRGBA(y[v]);d=U.colorToRGBA(i[v]),y[v]=_,o.push({r:d.r-_.r,g:d.g-_.g,b:d.b-_.b,a:d.a-_.a})}else for(let v=0;v<u;v++)o.push(i[v]-y[v]);else _0.indexOf(t)!==-1?(y=U.colorToRGBA(y),d=U.colorToRGBA(i),o={r:d.r-y.r,g:d.g-y.g,b:d.b-y.b,a:d.a-y.a}):o=i-y;Vt.attrs[l][this._id][t]={start:y,diff:o,end:i,trueEnd:h,trueStart:f},Vt.tweens[l][t]=this._id}_tweenFunc(t){const i=this.node,s=Vt.attrs[i._id][this._id];let l,o,u,h,f,d,m,y;for(l in s){if(o=s[l],u=o.start,h=o.diff,y=o.end,U._isArray(u))if(f=[],m=Math.max(u.length,y.length),l.indexOf("fill")===0)for(d=0;d<m;d++)d%2===0?f.push((u[d]||0)+h[d]*t):f.push("rgba("+Math.round(u[d].r+h[d].r*t)+","+Math.round(u[d].g+h[d].g*t)+","+Math.round(u[d].b+h[d].b*t)+","+(u[d].a+h[d].a*t)+")");else for(d=0;d<m;d++)f.push((u[d]||0)+h[d]*t);else _0.indexOf(l)!==-1?f="rgba("+Math.round(u.r+h.r*t)+","+Math.round(u.g+h.g*t)+","+Math.round(u.b+h.b*t)+","+(u.a+h.a*t)+")":f=u+h*t;i.setAttr(l,f)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,i=Vt.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,i=Vt.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,i=this._id,s=Vt.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const l in s)delete Vt.tweens[t][l];delete Vt.attrs[t][i],Vt.tweens[t]&&(Object.keys(Vt.tweens[t]).length===0&&delete Vt.tweens[t],Object.keys(Vt.attrs[t]).length===0&&delete Vt.attrs[t])}}Vt.attrs={};Vt.tweens={};st.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Vt(e).play()};const _l={BackEaseIn(e,t,i,s){return i*(e/=s)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,i,s){return i*((e=e/s-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,i,s){let l=1.70158;return(e/=s/2)<1?i/2*(e*e*(((l*=1.525)+1)*e-l))+t:i/2*((e-=2)*e*(((l*=1.525)+1)*e+l)+2)+t},ElasticEaseIn(e,t,i,s,l,o){let u=0;return e===0?t:(e/=s)===1?t+i:(o||(o=s*.3),!l||l<Math.abs(i)?(l=i,u=o/4):u=o/(2*Math.PI)*Math.asin(i/l),-(l*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/o))+t)},ElasticEaseOut(e,t,i,s,l,o){let u=0;return e===0?t:(e/=s)===1?t+i:(o||(o=s*.3),!l||l<Math.abs(i)?(l=i,u=o/4):u=o/(2*Math.PI)*Math.asin(i/l),l*Math.pow(2,-10*e)*Math.sin((e*s-u)*(2*Math.PI)/o)+i+t)},ElasticEaseInOut(e,t,i,s,l,o){let u=0;return e===0?t:(e/=s/2)===2?t+i:(o||(o=s*(.3*1.5)),!l||l<Math.abs(i)?(l=i,u=o/4):u=o/(2*Math.PI)*Math.asin(i/l),e<1?-.5*(l*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/o))+t:l*Math.pow(2,-10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/o)*.5+i+t)},BounceEaseOut(e,t,i,s){return(e/=s)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,s){return i-_l.BounceEaseOut(s-e,0,i,s)+t},BounceEaseInOut(e,t,i,s){return e<s/2?_l.BounceEaseIn(e*2,0,i,s)*.5+t:_l.BounceEaseOut(e*2-s,0,i,s)*.5+i*.5+t},EaseIn(e,t,i,s){return i*(e/=s)*e+t},EaseOut(e,t,i,s){return-i*(e/=s)*(e-2)+t},EaseInOut(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,s){return i*(e/=s)*e*e*e*e+t},StrongEaseOut(e,t,i,s){return i*((e=e/s-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,s){return i*e/s+t}},ms=U._assign(rt,{Util:U,Transform:En,Node:st,Container:We,Stage:vo,stages:yl,Layer:va,FastLayer:nh,Group:gs,DD:Gt,Shape:nt,shapes:vl,Animation:cn,Tween:Vt,Easings:_l,Context:po,Canvas:Wc});class hi extends nt{_sceneFunc(t){const i=rt.getAngle(this.angle()),s=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,s),t.arc(0,0,this.innerRadius(),i,0,!s),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),s=this.clockwise(),l=rt.getAngle(s?360-this.angle():this.angle()),o=Math.cos(Math.min(l,Math.PI)),u=1,h=Math.sin(Math.min(Math.max(Math.PI,l),3*Math.PI/2)),f=Math.sin(Math.min(l,Math.PI/2)),d=o*(o>0?t:i),m=u*i,y=h*(h>0?t:i),v=f*(f>0?i:t);return{x:d,y:s?-1*v:y,width:m-d,height:v-y}}}hi.prototype._centroid=!0;hi.prototype.className="Arc";hi.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Jt(hi);R.addGetterSetter(hi,"innerRadius",0,lt());R.addGetterSetter(hi,"outerRadius",0,lt());R.addGetterSetter(hi,"angle",0,lt());R.addGetterSetter(hi,"clockwise",!1,Tn());function Rc(e,t,i,s,l,o,u){const h=Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2)),f=Math.sqrt(Math.pow(l-i,2)+Math.pow(o-s,2)),d=u*h/(h+f),m=u*f/(h+f),y=i-d*(l-e),v=s-d*(o-t),_=i+m*(l-e),S=s+m*(o-t);return[y,v,_,S]}function S0(e,t){const i=e.length,s=[];for(let l=2;l<i-2;l+=2){const o=Rc(e[l-2],e[l-1],e[l],e[l+1],e[l+2],e[l+3],t);isNaN(o[0])||(s.push(o[0]),s.push(o[1]),s.push(e[l]),s.push(e[l+1]),s.push(o[2]),s.push(o[3]))}return s}class fi extends nt{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const i=this.points(),s=i.length,l=this.tension(),o=this.closed(),u=this.bezier();if(!s)return;let h=0;if(t.beginPath(),t.moveTo(i[0],i[1]),l!==0&&s>4){const f=this.getTensionPoints(),d=f.length;for(h=o?0:4,o||t.quadraticCurveTo(f[0],f[1],f[2],f[3]);h<d-2;)t.bezierCurveTo(f[h++],f[h++],f[h++],f[h++],f[h++],f[h++]);o||t.quadraticCurveTo(f[d-2],f[d-1],i[s-2],i[s-1])}else if(u)for(h=2;h<s;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<s;h+=2)t.lineTo(i[h],i[h+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():S0(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,s=this.tension(),l=Rc(t[i-2],t[i-1],t[0],t[1],t[2],t[3],s),o=Rc(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],s),u=S0(t,s);return[l[2],l[3]].concat(u).concat([o[0],o[1],t[i-2],t[i-1],o[2],o[3],l[0],l[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],s=t[0],l=t[1],o=t[1],u,h;for(let f=0;f<t.length/2;f++)u=t[f*2],h=t[f*2+1],i=Math.min(i,u),s=Math.max(s,u),l=Math.min(l,h),o=Math.max(o,h);return{x:i,y:l,width:s-i,height:o-l}}}fi.prototype.className="Line";fi.prototype._attrsAffectingSize=["points","bezier","tension"];Jt(fi);R.addGetterSetter(fi,"closed",!1);R.addGetterSetter(fi,"bezier",!1);R.addGetterSetter(fi,"tension",0,lt());R.addGetterSetter(fi,"points",[],R5());const d3=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],g3=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],m3=[[1],[1,1],[1,2,1],[1,3,3,1]],E0=(e,t,i)=>{let s,l;const u=i/2;s=0;for(let h=0;h<20;h++)l=u*d3[20][h]+u,s+=g3[20][h]*p3(e,t,l);return u*s},x0=(e,t,i)=>{i===void 0&&(i=1);const s=e[0]-2*e[1]+e[2],l=t[0]-2*t[1]+t[2],o=2*e[1]-2*e[0],u=2*t[1]-2*t[0],h=4*(s*s+l*l),f=4*(s*o+l*u),d=o*o+u*u;if(h===0)return i*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const m=f/(2*h),y=d/h,v=i+m,_=y-m*m,S=v*v+_>0?Math.sqrt(v*v+_):0,b=m*m+_>0?Math.sqrt(m*m+_):0,C=m+Math.sqrt(m*m+_)!==0?_*Math.log(Math.abs((v+S)/(m+b))):0;return Math.sqrt(h)/2*(v*S-m*b+C)};function p3(e,t,i){const s=wc(1,i,e),l=wc(1,i,t),o=s*s+l*l;return Math.sqrt(o)}const wc=(e,t,i)=>{const s=i.length-1;let l,o;if(s===0)return 0;if(e===0){o=0;for(let u=0;u<=s;u++)o+=m3[s][u]*Math.pow(1-t,s-u)*Math.pow(t,u)*i[u];return o}else{l=new Array(s);for(let u=0;u<s;u++)l[u]=s*(i[u+1]-i[u]);return wc(e-1,t,l)}},b0=(e,t,i)=>{let s=1,l=e/t,o=(e-i(l))/t,u=0;for(;s>.001;){const h=i(l+o),f=Math.abs(e-h)/t;if(f<s)s=f,l+=o;else{const d=i(l-o),m=Math.abs(e-d)/t;m<s?(s=m,l-=o):o/=2}if(u++,u>500)break}return l};class qt extends nt{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=qt.parsePathData(this.data()),this.pathLength=qt.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let s=!1;for(let l=0;l<i.length;l++){const o=i[l].command,u=i[l].points;switch(o){case"L":t.lineTo(u[0],u[1]);break;case"M":t.moveTo(u[0],u[1]);break;case"C":t.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"Q":t.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case"A":const h=u[0],f=u[1],d=u[2],m=u[3],y=u[4],v=u[5],_=u[6],S=u[7],b=d>m?d:m,C=d>m?1:d/m,x=d>m?m/d:1;t.translate(h,f),t.rotate(_),t.scale(C,x),t.arc(0,0,b,y,y+v,1-S),t.scale(1/C,1/x),t.rotate(-_),t.translate(-h,-f);break;case"z":s=!0,t.closePath();break}}!s&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(f){if(f.command==="A"){const d=f.points[4],m=f.points[5],y=f.points[4]+m;let v=Math.PI/180;if(Math.abs(d-y)<v&&(v=Math.abs(d-y)),m<0)for(let _=d-v;_>y;_-=v){const S=qt.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],_,0);t.push(S.x,S.y)}else for(let _=d+v;_<y;_+=v){const S=qt.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],_,0);t.push(S.x,S.y)}}else if(f.command==="C")for(let d=0;d<=1;d+=.01){const m=qt.getPointOnCubicBezier(d,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(m.x,m.y)}else t=t.concat(f.points)});let i=t[0],s=t[0],l=t[1],o=t[1],u,h;for(let f=0;f<t.length/2;f++)u=t[f*2],h=t[f*2+1],isNaN(u)||(i=Math.min(i,u),s=Math.max(s,u)),isNaN(h)||(l=Math.min(l,h),o=Math.max(o,h));return{x:i,y:l,width:s-i,height:o-l}}getLength(){return this.pathLength}getPointAtLength(t){return qt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,s,l){return Math.sqrt((s-t)*(s-t)+(l-i)*(l-i))}static getPathLength(t){let i=0;for(let s=0;s<t.length;++s)i+=t[s].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let s,l=0,o=i.length;if(!o)return null;for(;l<o&&t>i[l].pathLength;)t-=i[l].pathLength,++l;if(l===o)return s=i[l-1].points.slice(-2),{x:s[0],y:s[1]};if(t<.01)return i[l].command==="M"?(s=i[l].points.slice(0,2),{x:s[0],y:s[1]}):{x:i[l].start.x,y:i[l].start.y};const u=i[l],h=u.points;switch(u.command){case"L":return qt.getPointOnLine(t,u.start.x,u.start.y,h[0],h[1]);case"C":return qt.getPointOnCubicBezier(b0(t,qt.getPathLength(i),b=>E0([u.start.x,h[0],h[2],h[4]],[u.start.y,h[1],h[3],h[5]],b)),u.start.x,u.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return qt.getPointOnQuadraticBezier(b0(t,qt.getPathLength(i),b=>x0([u.start.x,h[0],h[2]],[u.start.y,h[1],h[3]],b)),u.start.x,u.start.y,h[0],h[1],h[2],h[3]);case"A":const f=h[0],d=h[1],m=h[2],y=h[3],v=h[5],_=h[6];let S=h[4];return S+=v*t/u.pathLength,qt.getPointOnEllipticalArc(f,d,m,y,S,_)}return null}static getPointOnLine(t,i,s,l,o,u,h){u=u??i,h=h??s;const f=this.getLineLength(i,s,l,o);if(f<1e-10)return{x:i,y:s};if(l===i)return{x:u,y:h+(o>s?t:-t)};const d=(o-s)/(l-i),m=Math.sqrt(t*t/(1+d*d))*(l<i?-1:1),y=d*m;if(Math.abs(h-s-d*(u-i))<1e-10)return{x:u+m,y:h+y};const v=((u-i)*(l-i)+(h-s)*(o-s))/(f*f),_=i+v*(l-i),S=s+v*(o-s),b=this.getLineLength(u,h,_,S),C=Math.sqrt(t*t-b*b),x=Math.sqrt(C*C/(1+d*d))*(l<i?-1:1),A=d*x;return{x:_+x,y:S+A}}static getPointOnCubicBezier(t,i,s,l,o,u,h,f,d){function m(C){return C*C*C}function y(C){return 3*C*C*(1-C)}function v(C){return 3*C*(1-C)*(1-C)}function _(C){return(1-C)*(1-C)*(1-C)}const S=f*m(t)+u*y(t)+l*v(t)+i*_(t),b=d*m(t)+h*y(t)+o*v(t)+s*_(t);return{x:S,y:b}}static getPointOnQuadraticBezier(t,i,s,l,o,u,h){function f(_){return _*_}function d(_){return 2*_*(1-_)}function m(_){return(1-_)*(1-_)}const y=u*f(t)+l*d(t)+i*m(t),v=h*f(t)+o*d(t)+s*m(t);return{x:y,y:v}}static getPointOnEllipticalArc(t,i,s,l,o,u){const h=Math.cos(u),f=Math.sin(u),d={x:s*Math.cos(o),y:l*Math.sin(o)};return{x:t+(d.x*h-d.y*f),y:i+(d.x*f+d.y*h)}}static parsePathData(t){if(!t)return[];let i=t;const s=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let y=0;y<s.length;y++)i=i.replace(new RegExp(s[y],"g"),"|"+s[y]);const l=i.split("|"),o=[],u=[];let h=0,f=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(let y=1;y<l.length;y++){let v=l[y],_=v.charAt(0);for(v=v.slice(1),u.length=0;m=d.exec(v);)u.push(m[0]);let S=[],b=_==="A"||_==="a"?0:-1;for(let C=0,x=u.length;C<x;C++){const A=u[C];if(A==="00"){S.push(0,0),b>=0&&(b+=2,b>=7&&(b-=7));continue}if(b>=0){if(b===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(A)){S.push(parseInt(A[0],10)),S.push(parseInt(A[1],10)),S.push(parseFloat(A.slice(2))),b+=3,b>=7&&(b-=7);continue}if(A==="11"||A==="10"||A==="01"){S.push(parseInt(A[0],10)),S.push(parseInt(A[1],10)),b+=2,b>=7&&(b-=7);continue}if(A==="0"||A==="1"){S.push(parseInt(A,10)),b+=1,b>=7&&(b-=7);continue}}else if(b===4){if(/^[01]\d+(?:\.\d+)?$/.test(A)){S.push(parseInt(A[0],10)),S.push(parseFloat(A.slice(1))),b+=2,b>=7&&(b-=7);continue}if(A==="0"||A==="1"){S.push(parseInt(A,10)),b+=1,b>=7&&(b-=7);continue}}const w=parseFloat(A);isNaN(w)?S.push(0):S.push(w),b+=1,b>=7&&(b-=7)}else{const w=parseFloat(A);isNaN(w)?S.push(0):S.push(w)}}for(;S.length>0&&!isNaN(S[0]);){let C="",x=[];const A=h,w=f;let M,G,H,X,q,P,I,J,j,W;switch(_){case"l":h+=S.shift(),f+=S.shift(),C="L",x.push(h,f);break;case"L":h=S.shift(),f=S.shift(),x.push(h,f);break;case"m":const T=S.shift(),O=S.shift();if(h+=T,f+=O,C="M",o.length>2&&o[o.length-1].command==="z"){for(let N=o.length-2;N>=0;N--)if(o[N].command==="M"){h=o[N].points[0]+T,f=o[N].points[1]+O;break}}x.push(h,f),_="l";break;case"M":h=S.shift(),f=S.shift(),C="M",x.push(h,f),_="L";break;case"h":h+=S.shift(),C="L",x.push(h,f);break;case"H":h=S.shift(),C="L",x.push(h,f);break;case"v":f+=S.shift(),C="L",x.push(h,f);break;case"V":f=S.shift(),C="L",x.push(h,f);break;case"C":x.push(S.shift(),S.shift(),S.shift(),S.shift()),h=S.shift(),f=S.shift(),x.push(h,f);break;case"c":x.push(h+S.shift(),f+S.shift(),h+S.shift(),f+S.shift()),h+=S.shift(),f+=S.shift(),C="C",x.push(h,f);break;case"S":G=h,H=f,M=o[o.length-1],M.command==="C"&&(G=h+(h-M.points[2]),H=f+(f-M.points[3])),x.push(G,H,S.shift(),S.shift()),h=S.shift(),f=S.shift(),C="C",x.push(h,f);break;case"s":G=h,H=f,M=o[o.length-1],M.command==="C"&&(G=h+(h-M.points[2]),H=f+(f-M.points[3])),x.push(G,H,h+S.shift(),f+S.shift()),h+=S.shift(),f+=S.shift(),C="C",x.push(h,f);break;case"Q":x.push(S.shift(),S.shift()),h=S.shift(),f=S.shift(),x.push(h,f);break;case"q":x.push(h+S.shift(),f+S.shift()),h+=S.shift(),f+=S.shift(),C="Q",x.push(h,f);break;case"T":G=h,H=f,M=o[o.length-1],M.command==="Q"&&(G=h+(h-M.points[0]),H=f+(f-M.points[1])),h=S.shift(),f=S.shift(),C="Q",x.push(G,H,h,f);break;case"t":G=h,H=f,M=o[o.length-1],M.command==="Q"&&(G=h+(h-M.points[0]),H=f+(f-M.points[1])),h+=S.shift(),f+=S.shift(),C="Q",x.push(G,H,h,f);break;case"A":X=S.shift(),q=S.shift(),P=S.shift(),I=S.shift(),J=S.shift(),j=h,W=f,h=S.shift(),f=S.shift(),C="A",x=this.convertEndpointToCenterParameterization(j,W,h,f,I,J,X,q,P);break;case"a":X=S.shift(),q=S.shift(),P=S.shift(),I=S.shift(),J=S.shift(),j=h,W=f,h+=S.shift(),f+=S.shift(),C="A",x=this.convertEndpointToCenterParameterization(j,W,h,f,I,J,X,q,P);break}o.push({command:C||_,points:x,start:{x:A,y:w},pathLength:this.calcLength(A,w,C||_,x)})}(_==="z"||_==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,i,s,l){let o,u,h,f;const d=qt;switch(s){case"L":return d.getLineLength(t,i,l[0],l[1]);case"C":return E0([t,l[0],l[2],l[4]],[i,l[1],l[3],l[5]],1);case"Q":return x0([t,l[0],l[2]],[i,l[1],l[3]],1);case"A":o=0;const m=l[4],y=l[5],v=l[4]+y;let _=Math.PI/180;if(Math.abs(m-v)<_&&(_=Math.abs(m-v)),u=d.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),y<0)for(f=m-_;f>v;f-=_)h=d.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],f,0),o+=d.getLineLength(u.x,u.y,h.x,h.y),u=h;else for(f=m+_;f<v;f+=_)h=d.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],f,0),o+=d.getLineLength(u.x,u.y,h.x,h.y),u=h;return h=d.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],v,0),o+=d.getLineLength(u.x,u.y,h.x,h.y),o}return 0}static convertEndpointToCenterParameterization(t,i,s,l,o,u,h,f,d){const m=d*(Math.PI/180),y=Math.cos(m)*(t-s)/2+Math.sin(m)*(i-l)/2,v=-1*Math.sin(m)*(t-s)/2+Math.cos(m)*(i-l)/2,_=y*y/(h*h)+v*v/(f*f);_>1&&(h*=Math.sqrt(_),f*=Math.sqrt(_));let S=Math.sqrt((h*h*(f*f)-h*h*(v*v)-f*f*(y*y))/(h*h*(v*v)+f*f*(y*y)));o===u&&(S*=-1),isNaN(S)&&(S=0);const b=S*h*v/f,C=S*-f*y/h,x=(t+s)/2+Math.cos(m)*b-Math.sin(m)*C,A=(i+l)/2+Math.sin(m)*b+Math.cos(m)*C,w=function(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])},M=function(I,J){return(I[0]*J[0]+I[1]*J[1])/(w(I)*w(J))},G=function(I,J){return(I[0]*J[1]<I[1]*J[0]?-1:1)*Math.acos(M(I,J))},H=G([1,0],[(y-b)/h,(v-C)/f]),X=[(y-b)/h,(v-C)/f],q=[(-1*y-b)/h,(-1*v-C)/f];let P=G(X,q);return M(X,q)<=-1&&(P=Math.PI),M(X,q)>=1&&(P=0),u===0&&P>0&&(P=P-2*Math.PI),u===1&&P<0&&(P=P+2*Math.PI),[x,A,h,f,H,P,m,u]}}qt.prototype.className="Path";qt.prototype._attrsAffectingSize=["data"];Jt(qt);R.addGetterSetter(qt,"data");class _a extends fi{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,s=this.points();let l=s;const o=this.tension()!==0&&s.length>4;o&&(l=this.getTensionPoints());const u=this.pointerLength(),h=s.length;let f,d;if(o){const v=[l[l.length-4],l[l.length-3],l[l.length-2],l[l.length-1],s[h-2],s[h-1]],_=qt.calcLength(l[l.length-4],l[l.length-3],"C",v),S=qt.getPointOnQuadraticBezier(Math.min(1,1-u/_),v[0],v[1],v[2],v[3],v[4],v[5]);f=s[h-2]-S.x,d=s[h-1]-S.y}else f=s[h-2]-s[h-4],d=s[h-1]-s[h-3];const m=(Math.atan2(d,f)+i)%i,y=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(s[h-2],s[h-1]),t.rotate(m),t.moveTo(0,0),t.lineTo(-u,y/2),t.lineTo(-u,-y/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(s[0],s[1]),o?(f=(l[0]+l[2])/2-s[0],d=(l[1]+l[3])/2-s[1]):(f=s[2]-s[0],d=s[3]-s[1]),t.rotate((Math.atan2(-d,-f)+i)%i),t.moveTo(0,0),t.lineTo(-u,y/2),t.lineTo(-u,-y/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x,y:t.y-i,width:t.width,height:t.height+i*2}}}_a.prototype.className="Arrow";Jt(_a);R.addGetterSetter(_a,"pointerLength",10,lt());R.addGetterSetter(_a,"pointerWidth",10,lt());R.addGetterSetter(_a,"pointerAtBeginning",!1);R.addGetterSetter(_a,"pointerAtEnding",!0);let _s=class extends nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};_s.prototype._centroid=!0;_s.prototype.className="Circle";_s.prototype._attrsAffectingSize=["radius"];Jt(_s);R.addGetterSetter(_s,"radius",0,lt());class Bi extends nt{_sceneFunc(t){const i=this.radiusX(),s=this.radiusY();t.beginPath(),t.save(),i!==s&&t.scale(1,s/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Bi.prototype.className="Ellipse";Bi.prototype._centroid=!0;Bi.prototype._attrsAffectingSize=["radiusX","radiusY"];Jt(Bi);R.addComponentsGetterSetter(Bi,"radius",["x","y"]);R.addGetterSetter(Bi,"radiusX",0,lt());R.addGetterSetter(Bi,"radiusY",0,lt());class tn extends nt{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),s=this.getHeight(),l=this.cornerRadius(),o=this.attrs.image;let u;if(o){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?u=[o,this.cropX(),this.cropY(),h,f,0,0,i,s]:u=[o,0,0,i,s]}(this.hasFill()||this.hasStroke()||l)&&(t.beginPath(),l?U.drawRoundedRectPath(t,i,s,l):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)),o&&(l&&t.clip(),t.drawImage.apply(t,u))}_hitFunc(t){const i=this.width(),s=this.height(),l=this.cornerRadius();t.beginPath(),l?U.drawRoundedRectPath(t,i,s,l):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i,s;return(s=(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width)!==null&&s!==void 0?s:0}getHeight(){var t,i,s;return(s=(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:0}static fromURL(t,i,s=null){const l=U.createImageElement();l.onload=function(){const o=new tn({image:l});i(o)},l.onerror=s,l.crossOrigin="Anonymous",l.src=t}}tn.prototype.className="Image";tn.prototype._attrsAffectingSize=["image"];Jt(tn);R.addGetterSetter(tn,"cornerRadius",0,yo(4));R.addGetterSetter(tn,"image");R.addComponentsGetterSetter(tn,"crop",["x","y","width","height"]);R.addGetterSetter(tn,"cropX",0,lt());R.addGetterSetter(tn,"cropY",0,lt());R.addGetterSetter(tn,"cropWidth",0,lt());R.addGetterSetter(tn,"cropHeight",0,lt());const t2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],y3="Change.konva",v3="none",zc="up",Dc="right",Oc="down",Hc="left",_3=t2.length;class ih extends gs{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,s;const l=function(){i._sync()};for(s=0;s<_3;s++)t.on(t2[s]+y3,l)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),s,l,o,u,h,f,d;if(t&&i){switch(s=t.width(),l=t.height(),o=i.pointerDirection(),u=i.pointerWidth(),d=i.pointerHeight(),h=0,f=0,o){case zc:h=s/2,f=-1*d;break;case Dc:h=s+u,f=l/2;break;case Oc:h=s/2,f=l+d;break;case Hc:h=-1*u,f=l/2;break}i.setAttrs({x:-1*h,y:-1*f,width:s,height:l}),t.setAttrs({x:-1*h,y:-1*f})}}}ih.prototype.className="Label";Jt(ih);class Sa extends nt{_sceneFunc(t){const i=this.width(),s=this.height(),l=this.pointerDirection(),o=this.pointerWidth(),u=this.pointerHeight(),h=this.cornerRadius();let f=0,d=0,m=0,y=0;typeof h=="number"?f=d=m=y=Math.min(h,i/2,s/2):(f=Math.min(h[0]||0,i/2,s/2),d=Math.min(h[1]||0,i/2,s/2),y=Math.min(h[2]||0,i/2,s/2),m=Math.min(h[3]||0,i/2,s/2)),t.beginPath(),t.moveTo(f,0),l===zc&&(t.lineTo((i-o)/2,0),t.lineTo(i/2,-1*u),t.lineTo((i+o)/2,0)),t.lineTo(i-d,0),t.arc(i-d,d,d,Math.PI*3/2,0,!1),l===Dc&&(t.lineTo(i,(s-u)/2),t.lineTo(i+o,s/2),t.lineTo(i,(s+u)/2)),t.lineTo(i,s-y),t.arc(i-y,s-y,y,0,Math.PI/2,!1),l===Oc&&(t.lineTo((i+o)/2,s),t.lineTo(i/2,s+u),t.lineTo((i-o)/2,s)),t.lineTo(m,s),t.arc(m,s-m,m,Math.PI/2,Math.PI,!1),l===Hc&&(t.lineTo(0,(s+u)/2),t.lineTo(-1*o,s/2),t.lineTo(0,(s-u)/2)),t.lineTo(0,f),t.arc(f,f,f,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,s=this.pointerWidth(),l=this.pointerHeight(),o=this.pointerDirection(),u=this.width(),h=this.height();return o===zc?(i-=l,h+=l):o===Oc?h+=l:o===Hc?(t-=s*1.5,u+=s):o===Dc&&(u+=s*1.5),{x:t,y:i,width:u,height:h}}}Sa.prototype.className="Tag";Jt(Sa);R.addGetterSetter(Sa,"pointerDirection",v3);R.addGetterSetter(Sa,"pointerWidth",0,lt());R.addGetterSetter(Sa,"pointerHeight",0,lt());R.addGetterSetter(Sa,"cornerRadius",0,yo(4));let Al=class extends nt{_sceneFunc(t){const i=this.cornerRadius(),s=this.width(),l=this.height();t.beginPath(),i?U.drawRoundedRectPath(t,s,l,i):t.rect(0,0,s,l),t.closePath(),t.fillStrokeShape(this)}};Al.prototype.className="Rect";Jt(Al);R.addGetterSetter(Al,"cornerRadius",0,yo(4));class Ui extends nt{_sceneFunc(t){const i=this._getPoints(),s=this.radius(),l=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)U.drawRoundedPolygonPath(t,i,l,s,o);else{t.moveTo(i[0].x,i[0].y);for(let u=1;u<i.length;u++)t.lineTo(i[u].x,i[u].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,s=[];for(let l=0;l<t;l++)s.push({x:i*Math.sin(l*2*Math.PI/t),y:-1*i*Math.cos(l*2*Math.PI/t)});return s}getSelfRect(){const t=this._getPoints();let i=t[0].x,s=t[0].x,l=t[0].y,o=t[0].y;return t.forEach(u=>{i=Math.min(i,u.x),s=Math.max(s,u.x),l=Math.min(l,u.y),o=Math.max(o,u.y)}),{x:i,y:l,width:s-i,height:o-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ui.prototype.className="RegularPolygon";Ui.prototype._centroid=!0;Ui.prototype._attrsAffectingSize=["radius"];Jt(Ui);R.addGetterSetter(Ui,"radius",0,lt());R.addGetterSetter(Ui,"sides",0,lt());R.addGetterSetter(Ui,"cornerRadius",0,yo(4));const C0=Math.PI*2;class Ea extends nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,C0,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),C0,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ea.prototype.className="Ring";Ea.prototype._centroid=!0;Ea.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Jt(Ea);R.addGetterSetter(Ea,"innerRadius",0,lt());R.addGetterSetter(Ea,"outerRadius",0,lt());class Vn extends nt{constructor(t){super(t),this._updated=!0,this.anim=new cn(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),s=this.frameIndex(),l=s*4,o=this.animations()[i],u=this.frameOffsets(),h=o[l+0],f=o[l+1],d=o[l+2],m=o[l+3],y=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,d,m),t.closePath(),t.fillStrokeShape(this)),y)if(u){const v=u[i],_=s*2;t.drawImage(y,h,f,d,m,v[_+0],v[_+1],d,m)}else t.drawImage(y,h,f,d,m,0,0,d,m)}_hitFunc(t){const i=this.animation(),s=this.frameIndex(),l=s*4,o=this.animations()[i],u=this.frameOffsets(),h=o[l+2],f=o[l+3];if(t.beginPath(),u){const d=u[i],m=s*2;t.rect(d[m+0],d[m+1],h,f)}else t.rect(0,0,h,f);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),s=this.animations(),l=s[i],o=l.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}Vn.prototype.className="Sprite";Jt(Vn);R.addGetterSetter(Vn,"animation");R.addGetterSetter(Vn,"animations");R.addGetterSetter(Vn,"frameOffsets");R.addGetterSetter(Vn,"image");R.addGetterSetter(Vn,"frameIndex",0,lt());R.addGetterSetter(Vn,"frameRate",17,lt());R.backCompat(Vn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Li extends nt{_sceneFunc(t){const i=this.innerRadius(),s=this.outerRadius(),l=this.numPoints();t.beginPath(),t.moveTo(0,0-s);for(let o=1;o<l*2;o++){const u=o%2===0?s:i,h=u*Math.sin(o*Math.PI/l),f=-1*u*Math.cos(o*Math.PI/l);t.lineTo(h,f)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Li.prototype.className="Star";Li.prototype._centroid=!0;Li.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Jt(Li);R.addGetterSetter(Li,"numPoints",5,lt());R.addGetterSetter(Li,"innerRadius",0,lt());R.addGetterSetter(Li,"outerRadius",0,lt());function Ri(e){return[...e].reduce((t,i,s,l)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const o=l[s+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(i+o),l[s+1]=""):t.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(l[s+1]||""))?t.push(i+l[s+1]):s>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:i&&t.push(i);return t},[])}const is="auto",S3="center",e2="inherit",nl="justify",E3="Change.konva",x3="2d",T0="-",n2="left",b3="text",C3="Text",T3="top",N3="bottom",N0="middle",i2="normal",A3="px ",Br=" ",M3="right",A0="rtl",R3="word",w3="char",M0="none",sc="",a2=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],z3=a2.length;function D3(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,s=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!s&&(t=`"${t}"`),t}).join(", ")}let Ur;function lc(){return Ur||(Ur=U.createCanvasElement().getContext(x3),Ur)}function O3(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function H3(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function G3(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let Qt=class extends nt{constructor(t){super(G3(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<z3;i++)this.on(a2[i]+E3,this._setTextData);this._setTextData()}_sceneFunc(t){var i,s;const l=this.textArr,o=l.length;if(!this.text())return;let u=this.padding(),h=this.fontSize(),f=this.lineHeight()*h,d=this.verticalAlign(),m=this.direction(),y=0,v=this.align(),_=this.getWidth(),S=this.letterSpacing(),b=this.charRenderFunc(),C=this.fill(),x=this.textDecoration(),A=x.indexOf("underline")!==-1,w=x.indexOf("line-through")!==-1,M;m=m===e2?t.direction:m;let G=f/2,H=N0;if(!rt.legacyTextRendering){const X=this.measureSize("M");H="alphabetic";const q=(i=X.fontBoundingBoxAscent)!==null&&i!==void 0?i:X.actualBoundingBoxAscent,P=(s=X.fontBoundingBoxDescent)!==null&&s!==void 0?s:X.actualBoundingBoxDescent;G=(q-P)/2+f/2}for(m===A0&&t.setAttr("direction",m),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",H),t.setAttr("textAlign",n2),d===N0?y=(this.getHeight()-o*f-u*2)/2:d===N3&&(y=this.getHeight()-o*f-u*2),t.translate(u,y+u),M=0;M<o;M++){let X=0,q=0;const P=l[M],I=P.text,J=P.width,j=P.lastInParagraph;if(t.save(),v===M3?X+=_-J-u*2:v===S3&&(X+=(_-J-u*2)/2),A){t.save(),t.beginPath();const T=rt.legacyTextRendering?Math.round(h/2):Math.round(h/4),O=X,N=G+q+T;t.moveTo(O,N);const Y=v===nl&&!j?_-u*2:J;t.lineTo(O+Math.round(Y),N),t.lineWidth=h/15;const B=this._getLinearGradient();t.strokeStyle=B||C,t.stroke(),t.restore()}const W=X;if(m!==A0&&(S!==0||v===nl||b)){const T=I.split(" ").length-1,O=Ri(I);for(let N=0;N<O.length;N++){const Y=O[N];if(Y===" "&&!j&&v===nl&&(X+=(_-u*2-J)/T),this._partialTextX=X,this._partialTextY=G+q,this._partialText=Y,b){t.save();const D=l.slice(0,M).reduce((F,tt)=>F+Ri(tt.text).length,0),K=N+D;b({char:Y,index:K,x:X,y:G+q,lineIndex:M,column:N,isLastInLine:j,width:this.measureSize(Y).width,context:t})}t.fillStrokeShape(this),b&&t.restore(),X+=this.measureSize(Y).width+S}}else S!==0&&t.setAttr("letterSpacing",`${S}px`),this._partialTextX=X,this._partialTextY=G+q,this._partialText=I,t.fillStrokeShape(this);if(w){t.save(),t.beginPath();const T=rt.legacyTextRendering?0:-Math.round(h/4),O=W;t.moveTo(O,G+q+T);const N=v===nl&&!j?_-u*2:J;t.lineTo(O+Math.round(N),G+q+T),t.lineWidth=h/15;const Y=this._getLinearGradient();t.strokeStyle=Y||C,t.stroke(),t.restore()}t.restore(),o>1&&(G+=f)}}_hitFunc(t){const i=this.getWidth(),s=this.getHeight();t.beginPath(),t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=U._isString(t)?t:t==null?"":t+"";return this._setAttr(b3,i),this}getWidth(){return this.attrs.width===is||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===is||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return U.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,s,l,o,u,h,f,d,m,y,v;let _=lc(),S=this.fontSize(),b;_.save(),_.font=this._getContextFont(),b=_.measureText(t),_.restore();const C=S/100;return{actualBoundingBoxAscent:(i=b.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*C,actualBoundingBoxDescent:(s=b.actualBoundingBoxDescent)!==null&&s!==void 0?s:0,actualBoundingBoxLeft:(l=b.actualBoundingBoxLeft)!==null&&l!==void 0?l:-7.421875*C,actualBoundingBoxRight:(o=b.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*C,alphabeticBaseline:(u=b.alphabeticBaseline)!==null&&u!==void 0?u:0,emHeightAscent:(h=b.emHeightAscent)!==null&&h!==void 0?h:100*C,emHeightDescent:(f=b.emHeightDescent)!==null&&f!==void 0?f:-20*C,fontBoundingBoxAscent:(d=b.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*C,fontBoundingBoxDescent:(m=b.fontBoundingBoxDescent)!==null&&m!==void 0?m:21*C,hangingBaseline:(y=b.hangingBaseline)!==null&&y!==void 0?y:72.80000305175781*C,ideographicBaseline:(v=b.ideographicBaseline)!==null&&v!==void 0?v:-21*C,width:b.width,height:S}}_getContextFont(){return this.fontStyle()+Br+this.fontVariant()+Br+(this.fontSize()+A3)+D3(this.fontFamily())}_addTextLine(t){this.align()===nl&&(t=t.trim());const s=this._getTextWidth(t);return this.textArr.push({text:t,width:s,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),s=t.length;return lc().measureText(t).width+i*s}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),s=0,l=this.lineHeight()*i,o=this.attrs.width,u=this.attrs.height,h=o!==is&&o!==void 0,f=u!==is&&u!==void 0,d=this.padding(),m=o-d*2,y=u-d*2,v=0,_=this.wrap(),S=_!==M0,b=_!==w3&&S,C=this.ellipsis();this.textArr=[],lc().font=this._getContextFont();const x=C?this._getTextWidth(sc):0;for(let A=0,w=t.length;A<w;++A){let M=t[A],G=this._getTextWidth(M);if(h&&G>m)for(;M.length>0;){let H=0,X=Ri(M).length,q="",P=0;for(;H<X;){const I=H+X>>>1,J=Ri(M),j=J.slice(0,I+1).join(""),W=this._getTextWidth(j);(C&&f&&v+l>y?W+x:W)<=m?(H=I+1,q=j,P=W):X=I}if(q){if(b){const j=Ri(M),W=Ri(q),T=j[W.length],O=T===Br||T===T0;let N;if(O&&P<=m)N=W.length;else{const Y=W.lastIndexOf(Br),B=W.lastIndexOf(T0);N=Math.max(Y,B)+1}N>0&&(H=N,q=j.slice(0,H).join(""),P=this._getTextWidth(q))}if(q=q.trimRight(),this._addTextLine(q),s=Math.max(s,P),v+=l,this._shouldHandleEllipsis(v)){this._tryToAddEllipsisToLastLine();break}if(M=Ri(M).slice(H).join("").trimLeft(),M.length>0&&(G=this._getTextWidth(M),G<=m)){this._addTextLine(M),v+=l,s=Math.max(s,G);break}}else break}else this._addTextLine(M),v+=l,s=Math.max(s,G),this._shouldHandleEllipsis(v)&&A<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&v+l>y)break}this.textHeight=i,this.textWidth=s}_shouldHandleEllipsis(t){const i=+this.fontSize(),s=this.lineHeight()*i,l=this.attrs.height,o=l!==is&&l!==void 0,u=this.padding(),h=l-u*2;return!(this.wrap()!==M0)||o&&t+s>h}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==is&&t!==void 0,s=this.padding(),l=t-s*2,o=this.ellipsis(),u=this.textArr[this.textArr.length-1];!u||!o||(i&&(this._getTextWidth(u.text+sc)<l||(u.text=u.text.slice(0,u.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(u.text+sc))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}};Qt.prototype._fillFunc=O3;Qt.prototype._strokeFunc=H3;Qt.prototype.className=C3;Qt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Jt(Qt);R.overWriteSetter(Qt,"width",th());R.overWriteSetter(Qt,"height",th());R.addGetterSetter(Qt,"direction",e2);R.addGetterSetter(Qt,"fontFamily","Arial");R.addGetterSetter(Qt,"fontSize",12,lt());R.addGetterSetter(Qt,"fontStyle",i2);R.addGetterSetter(Qt,"fontVariant",i2);R.addGetterSetter(Qt,"padding",0,lt());R.addGetterSetter(Qt,"align",n2);R.addGetterSetter(Qt,"verticalAlign",T3);R.addGetterSetter(Qt,"lineHeight",1,lt());R.addGetterSetter(Qt,"wrap",R3);R.addGetterSetter(Qt,"ellipsis",!1,Tn());R.addGetterSetter(Qt,"letterSpacing",0,lt());R.addGetterSetter(Qt,"text","",ya());R.addGetterSetter(Qt,"textDecoration","");R.addGetterSetter(Qt,"charRenderFunc",void 0);const B3="",s2="normal";function l2(e){e.fillText(this.partialText,0,0)}function r2(e){e.strokeText(this.partialText,0,0)}class de extends nt{constructor(t){super(t),this.dummyCanvas=U.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return qt.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t>i?null:qt.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=qt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),s=this.fill(),l=this.fontSize(),o=this.glyphInfo,u=i.indexOf("underline")!==-1,h=i.indexOf("line-through")!==-1;u&&t.beginPath();for(let f=0;f<o.length;f++){t.save();const d=o[f].p0;t.translate(d.x,d.y),t.rotate(o[f].rotation),this.partialText=o[f].text,t.fillStrokeShape(this),u&&(f===0&&t.moveTo(0,l/2+1),t.lineTo(o[f].width,l/2+1)),t.restore()}if(u&&(t.strokeStyle=s,t.lineWidth=l/20,t.stroke()),h){t.beginPath();for(let f=0;f<o.length;f++){t.save();const d=o[f].p0;t.translate(d.x,d.y),t.rotate(o[f].rotation),f===0&&t.moveTo(0,0),t.lineTo(o[f].width,0),t.restore()}t.strokeStyle=s,t.lineWidth=l/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const s=i[0].p0;t.moveTo(s.x,s.y)}for(let s=0;s<i.length;s++){const l=i[s].p1;t.lineTo(l.x,l.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return U.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Qt.prototype.setText.call(this,t)}_getContextFont(){return Qt.prototype._getContextFont.call(this)}_getTextSize(t){const s=this.dummyCanvas.getContext("2d");s.save(),s.font=this._getContextFont();const l=s.measureText(t);return s.restore(),{width:l.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Ri(this.text()),i=[];let s=0;for(let y=0;y<t.length;y++)i.push({char:t[y],width:this._getTextSize(t[y]).width}),s+=i[y].width;const{height:l}=this._getTextSize(this.attrs.text);if(this.textWidth=s,this.textHeight=l,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),u=this.align(),h=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let d=0;u==="center"&&(d=Math.max(0,this.pathLength/2-f/2)),u==="right"&&(d=Math.max(0,this.pathLength-f));let m=d;for(let y=0;y<i.length;y++){const v=this._getPointAtLength(m);if(!v)return;const _=i[y].char;let S=i[y].width+o;if(_===" "&&u==="justify"){const M=this.text().split(" ").length-1;S+=(this.pathLength-f)/M}const b=this._getPointAtLength(m+S);if(!b)return;const C=qt.getLineLength(v.x,v.y,b.x,b.y);let x=0;if(h)try{x=h(i[y-1].char,_)*this.fontSize()}catch{x=0}v.x+=x,b.x+=x,this.textWidth+=x;const A=qt.getPointOnLine(x+C/2,v.x,v.y,b.x,b.y),w=Math.atan2(b.y-v.y,b.x-v.x);this.glyphInfo.push({transposeX:A.x,transposeY:A.y,text:t[y],rotation:w,p0:v,p1:b,width:C}),m+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(d){t.push(d.p0.x),t.push(d.p0.y),t.push(d.p1.x),t.push(d.p1.y)});let i=t[0]||0,s=t[0]||0,l=t[1]||0,o=t[1]||0,u,h;for(let d=0;d<t.length/2;d++)u=t[d*2],h=t[d*2+1],i=Math.min(i,u),s=Math.max(s,u),l=Math.min(l,h),o=Math.max(o,h);const f=this.fontSize();return{x:i-f/2,y:l-f/2,width:s-i+f,height:o-l+f}}destroy(){return U.releaseCanvas(this.dummyCanvas),super.destroy()}}de.prototype._fillFunc=l2;de.prototype._strokeFunc=r2;de.prototype._fillFuncHit=l2;de.prototype._strokeFuncHit=r2;de.prototype.className="TextPath";de.prototype._attrsAffectingSize=["text","fontSize","data"];Jt(de);R.addGetterSetter(de,"data");R.addGetterSetter(de,"fontFamily","Arial");R.addGetterSetter(de,"fontSize",12,lt());R.addGetterSetter(de,"fontStyle",s2);R.addGetterSetter(de,"align","left");R.addGetterSetter(de,"letterSpacing",0,lt());R.addGetterSetter(de,"textBaseline","middle");R.addGetterSetter(de,"fontVariant",s2);R.addGetterSetter(de,"text",B3);R.addGetterSetter(de,"textDecoration","");R.addGetterSetter(de,"kerningFunc",void 0);const o2="tr-konva",U3=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${o2}`).join(" "),R0="nodesRect",L3=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],Y3={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},X3="ontouchstart"in rt._global;function V3(e,t,i){if(e==="rotater")return i;t+=U.degToRad(Y3[e]||0);const s=(U.radToDeg(t)%360+360)%360;return U._inRange(s,315+22.5,360)||U._inRange(s,0,22.5)?"ns-resize":U._inRange(s,45-22.5,45+22.5)?"nesw-resize":U._inRange(s,90-22.5,90+22.5)?"ew-resize":U._inRange(s,135-22.5,135+22.5)?"nwse-resize":U._inRange(s,180-22.5,180+22.5)?"ns-resize":U._inRange(s,225-22.5,225+22.5)?"nesw-resize":U._inRange(s,270-22.5,270+22.5)?"ew-resize":U._inRange(s,315-22.5,315+22.5)?"nwse-resize":(U.error("Transformer has unknown angle for cursor detection: "+s),"pointer")}const eo=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function q3(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function u2(e,t,i){const s=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),l=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:s,y:l}}function P3(e,t){const i=q3(e);return u2(e,t,i)}function K3(e,t,i){let s=t;for(let l=0;l<e.length;l++){const o=rt.getAngle(e[l]),u=Math.abs(o-t)%(Math.PI*2);Math.min(u,Math.PI*2-u)<i&&(s=o)}return s}let Gc=0;class Mt extends gs{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(U3,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return U.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return o2+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(l=>l.isAncestorOf(this)?(U.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(l=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(l._attrsAffectingSize.length){const u=l._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");l.on(u,o)}l.on(L3.map(u=>u+`.${this._getEventNamespace()}`).join(" "),o),l.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(l)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,s=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(s,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,s=>{if(!i)return;const l=t.getAbsolutePosition(),o=l.x-i.x,u=l.y-i.y;this.nodes().forEach(h=>{if(h===t||h.isDragging())return;const f=h.getAbsolutePosition();h.setAbsolutePosition({x:f.x+o,y:f.y+u}),h.startDrag(s)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R0),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R0,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),s){const l=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(s),u=t.getAbsolutePosition(s),h=l.x*o.x-t.offsetX()*o.x,f=l.y*o.y-t.offsetY()*o.y,d=(rt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:u.x+h*Math.cos(d)+f*Math.sin(-d),y:u.y+f*Math.cos(d)+h*Math.sin(d),width:l.width*o.x,height:l.height*o.y,rotation:d};return u2(m,-rt.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(d=>{const m=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),y=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],v=d.getAbsoluteTransform();y.forEach(function(_){const S=v.point(_);i.push(S)})});const s=new En;s.rotate(-rt.getAngle(this.rotation()));let l=1/0,o=1/0,u=-1/0,h=-1/0;i.forEach(function(d){const m=s.point(d);l===void 0&&(l=u=m.x,o=h=m.y),l=Math.min(l,m.x),o=Math.min(o,m.y),u=Math.max(u,m.x),h=Math.max(h,m.y)}),s.invert();const f=s.point({x:l,y:o});return{x:f.x,y:f.y,width:u-l,height:h-o,rotation:rt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),eo.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new Al({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:X3?10:"auto"}),s=this;i.on("mousedown touchstart",function(l){s._handleMouseDown(l)}),i.on("dragstart",l=>{i.stopDrag(),l.cancelBubble=!0}),i.on("dragend",l=>{l.cancelBubble=!0}),i.on("mouseenter",()=>{const l=rt.getAngle(this.rotation()),o=this.rotateAnchorCursor(),u=V3(t,l,o);i.getStage().content&&(i.getStage().content.style.cursor=u),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new nt({name:"back",width:0,height:0,sceneFunc(i,s){const l=s.getParent(),o=l.padding();i.beginPath(),i.rect(-o,-o,s.width()+o*2,s.height()+o*2),i.moveTo(s.width()/2,-o),l.rotateEnabled()&&l.rotateLineVisible()&&i.lineTo(s.width()/2,-l.rotateAnchorOffset()*U._sign(s.height())-o),i.fillStrokeShape(s)},hitFunc:(i,s)=>{if(!this.shouldOverdrawWholeArea())return;const l=this.padding();i.beginPath(),i.rect(-l,-l,s.width()+l*2,s.height()+l*2),i.fillStrokeShape(s)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),s=i.width,l=i.height,o=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));this.sin=Math.abs(l/o),this.cos=Math.abs(s/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const u=t.target.getAbsolutePosition(),h=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:h.x-u.x,y:h.y-u.y},Gc++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:t.evt,target:f})})}_handleMouseMove(t){let i,s,l;const o=this.findOne("."+this._movingAnchorName),u=o.getStage();u.setPointersPositions(t);const h=u.getPointerPosition();let f={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const d=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(d,f,t)),o.setAbsolutePosition(f);const m=o.getAbsolutePosition();if(d.x===m.x&&d.y===m.y)return;if(this._movingAnchorName==="rotater"){const A=this._getNodeRect();i=o.x()-A.width/2,s=-o.y()+A.height/2;let w=Math.atan2(-s,i)+Math.PI/2;A.height<0&&(w-=Math.PI);const G=rt.getAngle(this.rotation())+w,H=rt.getAngle(this.rotationSnapTolerance()),q=K3(this.rotationSnaps(),G,H)-A.rotation,P=P3(A,q);this._fitNodesInto(P,t);return}const y=this.shiftBehavior();let v;y==="inverted"?v=this.keepRatio()&&!t.shiftKey:y==="none"?v=this.keepRatio():v=this.keepRatio()||t.shiftKey;let _=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(v){const A=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};l=Math.sqrt(Math.pow(A.x-o.x(),2)+Math.pow(A.y-o.y(),2));const w=this.findOne(".top-left").x()>A.x?-1:1,M=this.findOne(".top-left").y()>A.y?-1:1;i=l*this.cos*w,s=l*this.sin*M,this.findOne(".top-left").x(A.x-i),this.findOne(".top-left").y(A.y-s)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(v){const A=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};l=Math.sqrt(Math.pow(o.x()-A.x,2)+Math.pow(A.y-o.y(),2));const w=this.findOne(".top-right").x()<A.x?-1:1,M=this.findOne(".top-right").y()>A.y?-1:1;i=l*this.cos*w,s=l*this.sin*M,this.findOne(".top-right").x(A.x+i),this.findOne(".top-right").y(A.y-s)}var S=o.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(v){const A=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};l=Math.sqrt(Math.pow(A.x-o.x(),2)+Math.pow(o.y()-A.y,2));const w=A.x<o.x()?-1:1,M=o.y()<A.y?-1:1;i=l*this.cos*w,s=l*this.sin*M,o.x(A.x-i),o.y(A.y+s)}S=o.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(v){const A=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};l=Math.sqrt(Math.pow(o.x()-A.x,2)+Math.pow(o.y()-A.y,2));const w=this.findOne(".bottom-right").x()<A.x?-1:1,M=this.findOne(".bottom-right").y()<A.y?-1:1;i=l*this.cos*w,s=l*this.sin*M,this.findOne(".bottom-right").x(A.x+i),this.findOne(".bottom-right").y(A.y+s)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(_=this.centeredScaling()||t.altKey,_){const A=this.findOne(".top-left"),w=this.findOne(".bottom-right"),M=A.x(),G=A.y(),H=this.getWidth()-w.x(),X=this.getHeight()-w.y();w.move({x:-M,y:-G}),A.move({x:H,y:X})}const b=this.findOne(".top-left").getAbsolutePosition();i=b.x,s=b.y;const C=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),x=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:s,width:C,height:x,rotation:rt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const s=this.getNode();Gc--,this._fire("transformend",{evt:t,target:s}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),s&&this._nodes.forEach(l=>{var o;l._fire("transformend",{evt:t,target:l}),(o=l.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const s=this._getNodeRect(),l=1;if(U._inRange(t.width,-this.padding()*2-l,l)){this.update();return}if(U._inRange(t.height,-this.padding()*2-l,l)){this.update();return}const o=new En;if(o.rotate(rt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const v=o.point({x:-this.padding()*2,y:0});t.x+=v.x,t.y+=v.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const v=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const v=o.point({x:0,y:-this.padding()*2});t.x+=v.x,t.y+=v.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const v=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const v=this.boundBoxFunc()(s,t);v?t=v:U.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const u=1e7,h=new En;h.translate(s.x,s.y),h.rotate(s.rotation),h.scale(s.width/u,s.height/u);const f=new En,d=t.width/u,m=t.height/u;this.flipEnabled()===!1?(f.translate(t.x,t.y),f.rotate(t.rotation),f.translate(t.width<0?t.width:0,t.height<0?t.height:0),f.scale(Math.abs(d),Math.abs(m))):(f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(d,m));const y=f.multiply(h.invert());this._nodes.forEach(v=>{var _;if(!v.getStage())return;const S=v.getParent().getAbsoluteTransform(),b=v.getTransform().copy();b.translate(v.offsetX(),v.offsetY());const C=new En;C.multiply(S.copy().invert()).multiply(y).multiply(S).multiply(b);const x=C.decompose();v.setAttrs(x),(_=v.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(U._getRotation(t.rotation)),this._nodes.forEach(v=>{this._fire("transform",{evt:i,target:v}),v._fire("transform",{evt:i,target:v})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(U._getRotation(i.rotation));const s=i.width,l=i.height,o=this.enabledAnchors(),u=this.resizeEnabled(),h=this.padding(),f=this.anchorSize(),d=this.find("._anchor");d.forEach(y=>{y.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+h,offsetY:f/2+h,visible:u&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:s/2,y:0,offsetY:f/2+h,visible:u&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:s,y:0,offsetX:f/2-h,offsetY:f/2+h,visible:u&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:l/2,offsetX:f/2+h,visible:u&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:s,y:l/2,offsetX:f/2-h,visible:u&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:l,offsetX:f/2+h,offsetY:f/2-h,visible:u&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:s/2,y:l,offsetY:f/2-h,visible:u&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:s,y:l,offsetX:f/2-h,offsetY:f/2-h,visible:u&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:s/2,y:-this.rotateAnchorOffset()*U._sign(l)-h,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:s,height:l,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(y=>y.draggable()),x:0,y:0});const m=this.anchorStyleFunc();m&&d.forEach(y=>{m(y)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),gs.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return st.prototype.toObject.call(this)}clone(t){return st.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Mt.isTransforming=()=>Gc>0;function Q3(e){return e instanceof Array||U.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){eo.indexOf(t)===-1&&U.warn("Unknown anchor name: "+t+". Available names are: "+eo.join(", "))}),e||[]}Mt.prototype.className="Transformer";Jt(Mt);R.addGetterSetter(Mt,"enabledAnchors",eo,Q3);R.addGetterSetter(Mt,"flipEnabled",!0,Tn());R.addGetterSetter(Mt,"resizeEnabled",!0);R.addGetterSetter(Mt,"anchorSize",10,lt());R.addGetterSetter(Mt,"rotateEnabled",!0);R.addGetterSetter(Mt,"rotateLineVisible",!0);R.addGetterSetter(Mt,"rotationSnaps",[]);R.addGetterSetter(Mt,"rotateAnchorOffset",50,lt());R.addGetterSetter(Mt,"rotateAnchorCursor","crosshair");R.addGetterSetter(Mt,"rotationSnapTolerance",5,lt());R.addGetterSetter(Mt,"borderEnabled",!0);R.addGetterSetter(Mt,"anchorStroke","rgb(0, 161, 255)");R.addGetterSetter(Mt,"anchorStrokeWidth",1,lt());R.addGetterSetter(Mt,"anchorFill","white");R.addGetterSetter(Mt,"anchorCornerRadius",0,lt());R.addGetterSetter(Mt,"borderStroke","rgb(0, 161, 255)");R.addGetterSetter(Mt,"borderStrokeWidth",1,lt());R.addGetterSetter(Mt,"borderDash");R.addGetterSetter(Mt,"keepRatio",!0);R.addGetterSetter(Mt,"shiftBehavior","default");R.addGetterSetter(Mt,"centeredScaling",!1);R.addGetterSetter(Mt,"ignoreStroke",!1);R.addGetterSetter(Mt,"padding",0,lt());R.addGetterSetter(Mt,"nodes");R.addGetterSetter(Mt,"node");R.addGetterSetter(Mt,"boundBoxFunc");R.addGetterSetter(Mt,"anchorDragBoundFunc");R.addGetterSetter(Mt,"anchorStyleFunc");R.addGetterSetter(Mt,"shouldOverdrawWholeArea",!1);R.addGetterSetter(Mt,"useSingleNodeRotation",!0);R.backCompat(Mt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});let di=class extends nt{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,rt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}};di.prototype.className="Wedge";di.prototype._centroid=!0;di.prototype._attrsAffectingSize=["radius"];Jt(di);R.addGetterSetter(di,"radius",0,lt());R.addGetterSetter(di,"angle",0,lt());R.addGetterSetter(di,"clockwise",!1);R.backCompat(di,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function w0(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Z3=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],k3=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function j3(e,t){const i=e.data,s=e.width,l=e.height;let o,u,h,f,d,m,y,v,_,S,b,C,x,A,w,M,G,H,X,q;const P=t+t+1,I=s-1,J=l-1,j=t+1,W=j*(j+1)/2,T=new w0,O=Z3[t],N=k3[t];let Y=null,B=T,D=null,K=null;for(let F=1;F<P;F++)B=B.next=new w0,F===j&&(Y=B);B.next=T,h=u=0;for(let F=0;F<l;F++){C=x=A=w=f=d=m=y=0,v=j*(M=i[u]),_=j*(G=i[u+1]),S=j*(H=i[u+2]),b=j*(X=i[u+3]),f+=W*M,d+=W*G,m+=W*H,y+=W*X,B=T;for(let tt=0;tt<j;tt++)B.r=M,B.g=G,B.b=H,B.a=X,B=B.next;for(let tt=1;tt<j;tt++)o=u+((I<tt?I:tt)<<2),f+=(B.r=M=i[o])*(q=j-tt),d+=(B.g=G=i[o+1])*q,m+=(B.b=H=i[o+2])*q,y+=(B.a=X=i[o+3])*q,C+=M,x+=G,A+=H,w+=X,B=B.next;D=T,K=Y;for(let tt=0;tt<s;tt++)i[u+3]=X=y*O>>N,X!==0?(X=255/X,i[u]=(f*O>>N)*X,i[u+1]=(d*O>>N)*X,i[u+2]=(m*O>>N)*X):i[u]=i[u+1]=i[u+2]=0,f-=v,d-=_,m-=S,y-=b,v-=D.r,_-=D.g,S-=D.b,b-=D.a,o=h+((o=tt+t+1)<I?o:I)<<2,C+=D.r=i[o],x+=D.g=i[o+1],A+=D.b=i[o+2],w+=D.a=i[o+3],f+=C,d+=x,m+=A,y+=w,D=D.next,v+=M=K.r,_+=G=K.g,S+=H=K.b,b+=X=K.a,C-=M,x-=G,A-=H,w-=X,K=K.next,u+=4;h+=s}for(let F=0;F<s;F++){x=A=w=C=d=m=y=f=0,u=F<<2,v=j*(M=i[u]),_=j*(G=i[u+1]),S=j*(H=i[u+2]),b=j*(X=i[u+3]),f+=W*M,d+=W*G,m+=W*H,y+=W*X,B=T;for(let ut=0;ut<j;ut++)B.r=M,B.g=G,B.b=H,B.a=X,B=B.next;let tt=s;for(let ut=1;ut<=t;ut++)u=tt+F<<2,f+=(B.r=M=i[u])*(q=j-ut),d+=(B.g=G=i[u+1])*q,m+=(B.b=H=i[u+2])*q,y+=(B.a=X=i[u+3])*q,C+=M,x+=G,A+=H,w+=X,B=B.next,ut<J&&(tt+=s);u=F,D=T,K=Y;for(let ut=0;ut<l;ut++)o=u<<2,i[o+3]=X=y*O>>N,X>0?(X=255/X,i[o]=(f*O>>N)*X,i[o+1]=(d*O>>N)*X,i[o+2]=(m*O>>N)*X):i[o]=i[o+1]=i[o+2]=0,f-=v,d-=_,m-=S,y-=b,v-=D.r,_-=D.g,S-=D.b,b-=D.a,o=F+((o=ut+j)<J?o:J)*s<<2,f+=C+=D.r=i[o],d+=x+=D.g=i[o+1],m+=A+=D.b=i[o+2],y+=w+=D.a=i[o+3],D=D.next,v+=M=K.r,_+=G=K.g,S+=H=K.b,b+=X=K.a,C-=M,x-=G,A-=H,w-=X,K=K.next,u+=s}}const F3=function(t){const i=Math.round(this.blurRadius());i>0&&j3(t,i)};R.addGetterSetter(st,"blurRadius",0,lt(),R.afterSetFilter);const I3=function(e){const t=this.brightness()*255,i=e.data,s=i.length;for(let l=0;l<s;l+=4)i[l]+=t,i[l+1]+=t,i[l+2]+=t};R.addGetterSetter(st,"brightness",0,lt(),R.afterSetFilter);const J3=function(e){const t=this.brightness(),i=e.data,s=i.length;for(let l=0;l<s;l+=4)i[l]=Math.min(255,i[l]*t),i[l+1]=Math.min(255,i[l+1]*t),i[l+2]=Math.min(255,i[l+2]*t)},W3=function(e){const t=Math.pow((this.contrast()+100)/100,2),i=e.data,s=i.length;let l=150,o=150,u=150;for(let h=0;h<s;h+=4)l=i[h],o=i[h+1],u=i[h+2],l/=255,l-=.5,l*=t,l+=.5,l*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,u/=255,u-=.5,u*=t,u+=.5,u*=255,l=l<0?0:l>255?255:l,o=o<0?0:o>255?255:o,u=u<0?0:u>255?255:u,i[h]=l,i[h+1]=o,i[h+2]=u};R.addGetterSetter(st,"contrast",0,lt(),R.afterSetFilter);const $3=function(e){var t,i,s,l,o,u,h,f,d;const m=e.data,y=e.width,v=e.height,_=Math.min(1,Math.max(0,(i=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&i!==void 0?i:.5)),S=Math.min(1,Math.max(0,(l=(s=this.embossWhiteLevel)===null||s===void 0?void 0:s.call(this))!==null&&l!==void 0?l:.5)),C=(h={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(u=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&u!==void 0?u:"top-left"])!==null&&h!==void 0?h:315,x=!!((d=(f=this.embossBlend)===null||f===void 0?void 0:f.call(this))!==null&&d!==void 0&&d),A=_*10,w=S*255,M=C*Math.PI/180,G=Math.cos(M),H=Math.sin(M),X=128/1020*A,q=new Uint8ClampedArray(m),P=new Float32Array(y*v);for(let T=0,O=0;O<m.length;O+=4,T++)P[T]=.2126*q[O]+.7152*q[O+1]+.0722*q[O+2];const I=[-1,0,1,-2,0,2,-1,0,1],J=[-1,-2,-1,0,0,0,1,2,1],j=[-y-1,-y,-y+1,-1,0,1,y-1,y,y+1],W=T=>T<0?0:T>255?255:T;for(let T=1;T<v-1;T++)for(let O=1;O<y-1;O++){const N=T*y+O;let Y=0,B=0;Y+=P[N+j[0]]*I[0],B+=P[N+j[0]]*J[0],Y+=P[N+j[1]]*I[1],B+=P[N+j[1]]*J[1],Y+=P[N+j[2]]*I[2],B+=P[N+j[2]]*J[2],Y+=P[N+j[3]]*I[3],B+=P[N+j[3]]*J[3],Y+=P[N+j[5]]*I[5],B+=P[N+j[5]]*J[5],Y+=P[N+j[6]]*I[6],B+=P[N+j[6]]*J[6],Y+=P[N+j[7]]*I[7],B+=P[N+j[7]]*J[7],Y+=P[N+j[8]]*I[8],B+=P[N+j[8]]*J[8];const D=G*Y+H*B,K=W(w+D*X),F=N*4;if(x){const tt=K-w;m[F]=W(q[F]+tt),m[F+1]=W(q[F+1]+tt),m[F+2]=W(q[F+2]+tt),m[F+3]=q[F+3]}else m[F]=m[F+1]=m[F+2]=K,m[F+3]=q[F+3]}for(let T=0;T<y;T++){let O=T*4,N=((v-1)*y+T)*4;m[O]=q[O],m[O+1]=q[O+1],m[O+2]=q[O+2],m[O+3]=q[O+3],m[N]=q[N],m[N+1]=q[N+1],m[N+2]=q[N+2],m[N+3]=q[N+3]}for(let T=1;T<v-1;T++){let O=T*y*4,N=(T*y+(y-1))*4;m[O]=q[O],m[O+1]=q[O+1],m[O+2]=q[O+2],m[O+3]=q[O+3],m[N]=q[N],m[N+1]=q[N+1],m[N+2]=q[N+2],m[N+3]=q[N+3]}return e};R.addGetterSetter(st,"embossStrength",.5,lt(),R.afterSetFilter);R.addGetterSetter(st,"embossWhiteLevel",.5,lt(),R.afterSetFilter);R.addGetterSetter(st,"embossDirection","top-left",void 0,R.afterSetFilter);R.addGetterSetter(st,"embossBlend",!1,void 0,R.afterSetFilter);function rc(e,t,i,s,l){const o=i-t,u=l-s;if(o===0)return s+u/2;if(u===0)return s;let h=(e-t)/o;return h=u*h+s,h}const t4=function(e){const t=e.data,i=t.length;let s=t[0],l=s,o,u=t[1],h=u,f,d=t[2],m=d,y;const v=this.enhance();if(v===0)return;for(let w=0;w<i;w+=4)o=t[w+0],o<s?s=o:o>l&&(l=o),f=t[w+1],f<u?u=f:f>h&&(h=f),y=t[w+2],y<d?d=y:y>m&&(m=y);l===s&&(l=255,s=0),h===u&&(h=255,u=0),m===d&&(m=255,d=0);let _,S,b,C,x,A;if(v>0)_=l+v*(255-l),S=s-v*(s-0),b=h+v*(255-h),C=u-v*(u-0),x=m+v*(255-m),A=d-v*(d-0);else{const w=(l+s)*.5;_=l+v*(l-w),S=s+v*(s-w);const M=(h+u)*.5;b=h+v*(h-M),C=u+v*(u-M);const G=(m+d)*.5;x=m+v*(m-G),A=d+v*(d-G)}for(let w=0;w<i;w+=4)t[w+0]=rc(t[w+0],s,l,S,_),t[w+1]=rc(t[w+1],u,h,C,b),t[w+2]=rc(t[w+2],d,m,A,x)};R.addGetterSetter(st,"enhance",0,lt(),R.afterSetFilter);const e4=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const l=.34*t[s]+.5*t[s+1]+.16*t[s+2];t[s]=l,t[s+1]=l,t[s+2]=l}};R.addGetterSetter(st,"hue",0,lt(),R.afterSetFilter);R.addGetterSetter(st,"saturation",0,lt(),R.afterSetFilter);R.addGetterSetter(st,"luminance",0,lt(),R.afterSetFilter);const n4=function(e){const t=e.data,i=t.length,s=1,l=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,u=this.luminance()*127,h=s*l*Math.cos(o*Math.PI/180),f=s*l*Math.sin(o*Math.PI/180),d=.299*s+.701*h+.167*f,m=.587*s-.587*h+.33*f,y=.114*s-.114*h-.497*f,v=.299*s-.299*h-.328*f,_=.587*s+.413*h+.035*f,S=.114*s-.114*h+.293*f,b=.299*s-.3*h+1.25*f,C=.587*s-.586*h-1.05*f,x=.114*s+.886*h-.2*f;let A,w,M,G;for(let H=0;H<i;H+=4)A=t[H+0],w=t[H+1],M=t[H+2],G=t[H+3],t[H+0]=d*A+m*w+y*M+u,t[H+1]=v*A+_*w+S*M+u,t[H+2]=b*A+C*w+x*M+u,t[H+3]=G},i4=function(e){const t=e.data,i=t.length,s=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,u=s*l*Math.cos(o*Math.PI/180),h=s*l*Math.sin(o*Math.PI/180),f=.299*s+.701*u+.167*h,d=.587*s-.587*u+.33*h,m=.114*s-.114*u-.497*h,y=.299*s-.299*u-.328*h,v=.587*s+.413*u+.035*h,_=.114*s-.114*u+.293*h,S=.299*s-.3*u+1.25*h,b=.587*s-.586*u-1.05*h,C=.114*s+.886*u-.2*h;for(let x=0;x<i;x+=4){const A=t[x+0],w=t[x+1],M=t[x+2],G=t[x+3];t[x+0]=f*A+d*w+m*M,t[x+1]=y*A+v*w+_*M,t[x+2]=S*A+b*w+C*M,t[x+3]=G}};R.addGetterSetter(st,"hue",0,lt(),R.afterSetFilter);R.addGetterSetter(st,"saturation",0,lt(),R.afterSetFilter);R.addGetterSetter(st,"value",0,lt(),R.afterSetFilter);const a4=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]},s4=function(e,t,i){const s=e.data,l=t.data,o=e.width,u=e.height,h=i.polarCenterX||o/2,f=i.polarCenterY||u/2;let d=Math.sqrt(h*h+f*f),m=o-h,y=u-f;const v=Math.sqrt(m*m+y*y);d=v>d?v:d;const _=u,S=o,b=360/S*Math.PI/180;for(let C=0;C<S;C+=1){const x=Math.sin(C*b),A=Math.cos(C*b);for(let w=0;w<_;w+=1){m=Math.floor(h+d*w/_*A),y=Math.floor(f+d*w/_*x);let M=(y*o+m)*4;const G=s[M+0],H=s[M+1],X=s[M+2],q=s[M+3];M=(C+w*o)*4,l[M+0]=G,l[M+1]=H,l[M+2]=X,l[M+3]=q}}},l4=function(e,t,i){const s=e.data,l=t.data,o=e.width,u=e.height,h=i.polarCenterX||o/2,f=i.polarCenterY||u/2;let d=Math.sqrt(h*h+f*f),m=o-h,y=u-f;const v=Math.sqrt(m*m+y*y);d=v>d?v:d;const _=u,S=o,b=0;let C,x;for(m=0;m<o;m+=1)for(y=0;y<u;y+=1){const A=m-h,w=y-f,M=Math.sqrt(A*A+w*w)*_/d;let G=(Math.atan2(w,A)*180/Math.PI+360+b)%360;G=G*S/360,C=Math.floor(G),x=Math.floor(M);let H=(x*o+C)*4;const X=s[H+0],q=s[H+1],P=s[H+2],I=s[H+3];H=(y*o+m)*4,l[H+0]=X,l[H+1]=q,l[H+2]=P,l[H+3]=I}},r4=function(e){const t=e.width,i=e.height;let s,l,o,u,h,f,d,m,y,v,_=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),b=Math.floor(t*(S%360)/360);if(_<1)return;const C=U.createCanvasElement();C.width=t,C.height=i;const x=C.getContext("2d").getImageData(0,0,t,i);U.releaseCanvas(C),s4(e,x,{polarCenterX:t/2,polarCenterY:i/2});let A=t/Math.pow(2,_);for(;A<=8;)A=A*2,_-=1;A=Math.ceil(A);let w=A,M=0,G=w,H=1;for(b+A>t&&(M=w,G=0,H=-1),l=0;l<i;l+=1)for(s=M;s!==G;s+=H)o=Math.round(s+b)%t,y=(t*l+o)*4,h=x.data[y+0],f=x.data[y+1],d=x.data[y+2],m=x.data[y+3],v=(t*l+s)*4,x.data[v+0]=h,x.data[v+1]=f,x.data[v+2]=d,x.data[v+3]=m;for(l=0;l<i;l+=1)for(w=Math.floor(A),u=0;u<_;u+=1){for(s=0;s<w+1;s+=1)y=(t*l+s)*4,h=x.data[y+0],f=x.data[y+1],d=x.data[y+2],m=x.data[y+3],v=(t*l+w*2-s-1)*4,x.data[v+0]=h,x.data[v+1]=f,x.data[v+2]=d,x.data[v+3]=m;w*=2}l4(x,e,{})};R.addGetterSetter(st,"kaleidoscopePower",2,lt(),R.afterSetFilter);R.addGetterSetter(st,"kaleidoscopeAngle",0,lt(),R.afterSetFilter);function Lr(e,t,i){let s=(i*e.width+t)*4;const l=[];return l.push(e.data[s++],e.data[s++],e.data[s++],e.data[s++]),l}function il(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function o4(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function u4(e,t){const i=Lr(e,0,0),s=Lr(e,e.width-1,0),l=Lr(e,0,e.height-1),o=Lr(e,e.width-1,e.height-1),u=t||10;if(il(i,s)<u&&il(s,o)<u&&il(o,l)<u&&il(l,i)<u){const h=o4([s,i,o,l]),f=[];for(let d=0;d<e.width*e.height;d++){const m=il(h,[e.data[d*4],e.data[d*4+1],e.data[d*4+2]]);f[d]=m<u?0:255}return f}}function c4(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function h4(e,t,i){const s=[1,1,1,1,0,1,1,1,1],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),u=[];for(let h=0;h<i;h++)for(let f=0;f<t;f++){const d=h*t+f;let m=0;for(let y=0;y<l;y++)for(let v=0;v<l;v++){const _=h+y-o,S=f+v-o;if(_>=0&&_<i&&S>=0&&S<t){const b=_*t+S,C=s[y*l+v];m+=e[b]*C}}u[d]=m===2040?255:0}return u}function f4(e,t,i){const s=[1,1,1,1,1,1,1,1,1],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),u=[];for(let h=0;h<i;h++)for(let f=0;f<t;f++){const d=h*t+f;let m=0;for(let y=0;y<l;y++)for(let v=0;v<l;v++){const _=h+y-o,S=f+v-o;if(_>=0&&_<i&&S>=0&&S<t){const b=_*t+S,C=s[y*l+v];m+=e[b]*C}}u[d]=m>=1020?255:0}return u}function d4(e,t,i){const s=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),u=[];for(let h=0;h<i;h++)for(let f=0;f<t;f++){const d=h*t+f;let m=0;for(let y=0;y<l;y++)for(let v=0;v<l;v++){const _=h+y-o,S=f+v-o;if(_>=0&&_<i&&S>=0&&S<t){const b=_*t+S,C=s[y*l+v];m+=e[b]*C}}u[d]=m}return u}const g4=function(e){const t=this.threshold();let i=u4(e,t);return i&&(i=h4(i,e.width,e.height),i=f4(i,e.width,e.height),i=d4(i,e.width,e.height),c4(e,i)),e};R.addGetterSetter(st,"threshold",0,lt(),R.afterSetFilter);const m4=function(e){const t=this.noise()*255,i=e.data,s=i.length,l=t/2;for(let o=0;o<s;o+=4)i[o+0]+=l-2*l*Math.random(),i[o+1]+=l-2*l*Math.random(),i[o+2]+=l-2*l*Math.random()};R.addGetterSetter(st,"noise",.2,lt(),R.afterSetFilter);const p4=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,s=e.height,l=Math.ceil(i/t),o=Math.ceil(s/t),u=e.data;if(t<=0){U.error("pixelSize value can not be <= 0");return}for(let h=0;h<l;h+=1)for(let f=0;f<o;f+=1){let d=0,m=0,y=0,v=0;const _=h*t,S=_+t,b=f*t,C=b+t;let x=0;for(let A=_;A<S;A+=1)if(!(A>=i))for(let w=b;w<C;w+=1){if(w>=s)continue;const M=(i*w+A)*4;d+=u[M+0],m+=u[M+1],y+=u[M+2],v+=u[M+3],x+=1}d=d/x,m=m/x,y=y/x,v=v/x;for(let A=_;A<S;A+=1)if(!(A>=i))for(let w=b;w<C;w+=1){if(w>=s)continue;const M=(i*w+A)*4;u[M+0]=d,u[M+1]=m,u[M+2]=y,u[M+3]=v}}};R.addGetterSetter(st,"pixelSize",8,lt(),R.afterSetFilter);const y4=function(e){const t=Math.round(this.levels()*254)+1,i=e.data,s=i.length,l=255/t;for(let o=0;o<s;o+=1)i[o]=Math.floor(i[o]/l)*l};R.addGetterSetter(st,"levels",.5,lt(),R.afterSetFilter);const v4=function(e){const t=e.data,i=t.length,s=this.red(),l=this.green(),o=this.blue();for(let u=0;u<i;u+=4){const h=(.34*t[u]+.5*t[u+1]+.16*t[u+2])/255;t[u]=h*s,t[u+1]=h*l,t[u+2]=h*o,t[u+3]=t[u+3]}};R.addGetterSetter(st,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});R.addGetterSetter(st,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});R.addGetterSetter(st,"blue",0,O1,R.afterSetFilter);const _4=function(e){const t=e.data,i=t.length,s=this.red(),l=this.green(),o=this.blue(),u=this.alpha();for(let h=0;h<i;h+=4){const f=1-u;t[h]=s*u+t[h]*f,t[h+1]=l*u+t[h+1]*f,t[h+2]=o*u+t[h+2]*f}};R.addGetterSetter(st,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});R.addGetterSetter(st,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});R.addGetterSetter(st,"blue",0,O1,R.afterSetFilter);R.addGetterSetter(st,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const S4=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const l=t[s+0],o=t[s+1],u=t[s+2];t[s+0]=Math.min(255,l*.393+o*.769+u*.189),t[s+1]=Math.min(255,l*.349+o*.686+u*.168),t[s+2]=Math.min(255,l*.272+o*.534+u*.131)}},E4=function(e){const i=e.data;for(let s=0;s<i.length;s+=4){const l=i[s],o=i[s+1],u=i[s+2];.2126*l+.7152*o+.0722*u>=128&&(i[s]=255-l,i[s+1]=255-o,i[s+2]=255-u)}return e},x4=function(e){const t=this.threshold()*255,i=e.data,s=i.length;for(let l=0;l<s;l+=1)i[l]=i[l]<t?0:255};R.addGetterSetter(st,"threshold",.5,lt(),R.afterSetFilter);const k_=ms.Util._assign(ms,{Arc:hi,Arrow:_a,Circle:_s,Ellipse:Bi,Image:tn,Label:ih,Tag:Sa,Line:fi,Path:qt,Rect:Al,RegularPolygon:Ui,Ring:Ea,Sprite:Vn,Star:Li,Text:Qt,TextPath:de,Transformer:Mt,Wedge:di,Filters:{Blur:F3,Brightness:J3,Brighten:I3,Contrast:W3,Emboss:$3,Enhance:t4,Grayscale:e4,HSL:n4,HSV:i4,Invert:a4,Kaleidoscope:r4,Mask:g4,Noise:m4,Pixelate:p4,Posterize:y4,RGB:v4,RGBA:_4,Sepia:S4,Solarize:E4,Threshold:x4}});var oc={exports:{}},uc={exports:{}};var z0;function b4(){return z0||(z0=1,(function(e){e.exports=function(t){function i(n,a,r,c){return new im(n,a,r,c)}function s(){}function l(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){var a=n,r=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(r=a.return),n=a.return;while(n)}return a.tag===3?r:null}function u(n){if(o(n)!==n)throw Error(l(188))}function h(n){var a=n.alternate;if(!a){if(a=o(n),a===null)throw Error(l(188));return a!==n?null:n}for(var r=n,c=a;;){var g=r.return;if(g===null)break;var p=g.alternate;if(p===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===r)return u(g),n;if(p===c)return u(g),a;p=p.sibling}throw Error(l(188))}if(r.return!==c.return)r=g,c=p;else{for(var E=!1,z=g.child;z;){if(z===r){E=!0,r=g,c=p;break}if(z===c){E=!0,c=g,r=p;break}z=z.sibling}if(!E){for(z=p.child;z;){if(z===r){E=!0,r=p,c=g;break}if(z===c){E=!0,c=p,r=g;break}z=z.sibling}if(!E)throw Error(l(189))}}if(r.alternate!==c)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?n:a}function f(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=f(n),a!==null)return a;n=n.sibling}return null}function d(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(n.tag!==4&&(a=d(n),a!==null))return a;n=n.sibling}return null}function m(n){return n===null||typeof n!="object"?null:(n=Ed&&n[Ed]||n["@@iterator"],typeof n=="function"?n:null)}function y(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===om?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ba:return"Fragment";case yu:return"Profiler";case _d:return"StrictMode";case _u:return"Suspense";case Su:return"SuspenseList";case xu:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Ga:return"Portal";case pi:return n.displayName||"Context";case Sd:return(n._context.displayName||"Context")+".Consumer";case vu:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Eu:return a=n.displayName||null,a!==null?a:y(n.type)||"Memo";case yi:a=n._payload,n=n._init;try{return y(n(a))}catch{}}return null}function v(n){return{current:n}}function _(n){0>Ya||(n.current=Mu[Ya],Mu[Ya]=null,Ya--)}function S(n,a){Ya++,Mu[Ya]=n.current,n.current=a}function b(n){return n>>>=0,n===0?32:31-(Bp(n)/Up|0)|0}function C(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function x(n,a,r){var c=n.pendingLanes;if(c===0)return 0;var g=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var z=c&134217727;return z!==0?(c=z&~p,c!==0?g=C(c):(E&=z,E!==0?g=C(E):r||(r=z&~n,r!==0&&(g=C(r))))):(z=c&~p,z!==0?g=C(z):E!==0?g=C(E):r||(r=c&~n,r!==0&&(g=C(r)))),g===0?0:a!==0&&a!==g&&(a&p)===0&&(p=g&-g,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:g}function A(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function w(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M(){var n=ur;return ur<<=1,(ur&62914560)===0&&(ur=4194304),n}function G(n){for(var a=[],r=0;31>r;r++)a.push(n);return a}function H(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function X(n,a,r,c,g,p){var E=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var z=n.entanglements,Z=n.expirationTimes,et=n.hiddenUpdates;for(r=E&~r;0<r;){var ot=31-Ze(r),it=1<<ot;z[ot]=0,Z[ot]=-1;var ht=et[ot];if(ht!==null)for(et[ot]=null,ot=0;ot<ht.length;ot++){var vt=ht[ot];vt!==null&&(vt.lane&=-536870913)}r&=~it}c!==0&&q(n,c,0),p!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~a))}function q(n,a,r){n.pendingLanes|=a,n.suspendedLanes&=~a;var c=31-Ze(a);n.entangledLanes|=a,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function P(n,a){var r=n.entangledLanes|=a;for(n=n.entanglements;r;){var c=31-Ze(r),g=1<<c;g&a|n[c]&a&&(n[c]|=a),r&=~g}}function I(n,a){var r=a&-a;return r=(r&42)!==0?1:J(r),(r&(n.suspendedLanes|a))!==0?0:r}function J(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function j(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function W(n){if(typeof qp=="function"&&Pp(n),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Xs,n)}catch{}}function T(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}function O(n){if(zu===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);zu=a&&a[1]||"",kd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zu+n+kd}function N(n,a){if(!n||Du)return"";Du=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(vt){var ht=vt}Reflect.construct(n,[],it)}else{try{it.call()}catch(vt){ht=vt}n.call(it.prototype)}}else{try{throw Error()}catch(vt){ht=vt}(it=n())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(vt){if(vt&&ht&&typeof vt.stack=="string")return[vt.stack,ht.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],z=p[1];if(E&&z){var Z=E.split(`
`),et=z.split(`
`);for(g=c=0;c<Z.length&&!Z[c].includes("DetermineComponentFrameRoot");)c++;for(;g<et.length&&!et[g].includes("DetermineComponentFrameRoot");)g++;if(c===Z.length||g===et.length)for(c=Z.length-1,g=et.length-1;1<=c&&0<=g&&Z[c]!==et[g];)g--;for(;1<=c&&0<=g;c--,g--)if(Z[c]!==et[g]){if(c!==1||g!==1)do if(c--,g--,0>g||Z[c]!==et[g]){var ot=`
`+Z[c].replace(" at new "," at ");return n.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",n.displayName)),ot}while(1<=c&&0<=g);break}}}finally{Du=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?O(r):""}function Y(n,a){switch(n.tag){case 26:case 27:case 5:return O(n.type);case 16:return O("Lazy");case 13:return n.child!==a&&a!==null?O("Suspense Fallback"):O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return N(n.type,!1);case 11:return N(n.type.render,!1);case 1:return N(n.type,!0);case 31:return O("Activity");default:return""}}function B(n){try{var a="",r=null;do a+=Y(n,r),r=n,n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function D(n,a){if(typeof n=="object"&&n!==null){var r=jd.get(n);return r!==void 0?r:(a={value:n,source:a,stack:B(a)},jd.set(n,a),a)}return{value:n,source:a,stack:B(a)}}function K(n,a){Va[qa++]=Vs,Va[qa++]=hr,hr=n,Vs=a}function F(n,a,r){sn[ln++]=Bn,sn[ln++]=Un,sn[ln++]=vi,vi=n;var c=Bn;n=Un;var g=32-Ze(c)-1;c&=~(1<<g),r+=1;var p=32-Ze(a)+g;if(30<p){var E=g-g%5;p=(c&(1<<E)-1).toString(32),c>>=E,g-=E,Bn=1<<32-Ze(a)+g|r<<g|c,Un=p+n}else Bn=1<<p|r<<g|c,Un=n}function tt(n){n.return!==null&&(K(n,1),F(n,1,0))}function ut(n){for(;n===hr;)hr=Va[--qa],Va[qa]=null,Vs=Va[--qa],Va[qa]=null;for(;n===vi;)vi=sn[--ln],sn[ln]=null,Un=sn[--ln],sn[ln]=null,Bn=sn[--ln],sn[ln]=null}function ct(n,a){sn[ln++]=Bn,sn[ln++]=Un,sn[ln++]=vi,Bn=a.id,Un=a.overflow,vi=n}function gt(n,a){S(_i,a),S(qs,n),S(Se,null),n=hm(a),_(Se),S(Se,n)}function St(){_(Se),_(qs),_(_i)}function Rt(n){n.memoizedState!==null&&S(fr,n);var a=Se.current,r=fm(a,n.type);a!==r&&(S(qs,n),S(Se,r))}function wt(n){qs.current===n&&(_(Se),_(qs)),fr.current===n&&(_(fr),Wn?$i._currentValue=Ua:$i._currentValue2=Ua)}function zt(n){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pt(D(a,n)),Ou}function Ut(n,a){if(!Ae)throw Error(l(175));fp(n.stateNode,n.type,n.memoizedProps,a,n)||zt(n,!0)}function De(n){for(Ee=n.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Ee=Ee.return}}function re(n){if(!Ae||n!==Ee)return!1;if(!At)return De(n),At=!0,!1;var a=n.tag;if(he?a!==3&&a!==27&&(a!==5||Hd(n.type)&&!lr(n.type,n.memoizedProps))&&jt&&zt(n):a!==3&&(a!==5||Hd(n.type)&&!lr(n.type,n.memoizedProps))&&jt&&zt(n),De(n),a===13){if(!Ae)throw Error(l(316));if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));jt=yp(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));jt=pp(n)}else jt=he&&a===27?np(n.type,jt):Ee?Od(n.stateNode):null;return!0}function oe(){Ae&&(jt=Ee=null,At=!1)}function Ce(){var n=Si;return n!==null&&(Ye===null?Ye=n:Ye.push.apply(Ye,n),Si=null),n}function Pt(n){Si===null?Si=[n]:Si.push(n)}function ue(n,a,r){Wn?(S(dr,a._currentValue),a._currentValue=r):(S(dr,a._currentValue2),a._currentValue2=r)}function Nt(n){var a=dr.current;Wn?n._currentValue=a:n._currentValue2=a,_(dr)}function ft(n,a,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),n===r)break;n=n.return}}function ye(n,a,r,c){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var p=g.dependencies;if(p!==null){var E=g.child;p=p.firstContext;t:for(;p!==null;){var z=p;p=g;for(var Z=0;Z<a.length;Z++)if(z.context===a[Z]){p.lanes|=r,z=p.alternate,z!==null&&(z.lanes|=r),ft(p.return,r,n),c||(E=null);break t}p=z.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(l(341));E.lanes|=r,p=E.alternate,p!==null&&(p.lanes|=r),ft(E,r,n),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===n){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Oe(n,a,r,c){n=null;for(var g=a,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(l(387));if(E=E.memoizedProps,E!==null){var z=g.type;je(g.pendingProps.value,E.value)||(n!==null?n.push(z):n=[z])}}else if(g===fr.current){if(E=g.alternate,E===null)throw Error(l(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push($i):n=[$i])}g=g.return}n!==null&&ye(a,n,r,c),a.flags|=262144}function An(n){for(n=n.firstContext;n!==null;){var a=n.context;if(!je(Wn?a._currentValue:a._currentValue2,n.memoizedValue))return!0;n=n.next}return!1}function He(n){ta=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Zt(n){return Pn(ta,n)}function Ge(n,a){return ta===null&&He(n),Pn(n,a)}function Pn(n,a){var r=Wn?a._currentValue:a._currentValue2;if(a={context:a,memoizedValue:r,next:null},ti===null){if(n===null)throw Error(l(308));ti=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else ti=ti.next=a;return r}function fn(){return{controller:new Qp,data:new Map,refCount:0}}function qe(n){n.refCount--,n.refCount===0&&Zp(kp,function(){n.controller.abort()})}function dn(){}function ve(n){n!==Pa&&n.next===null&&(Pa===null?gr=Pa=n:Pa=Pa.next=n),mr=!0,Hu||(Hu=!0,an())}function nn(n,a){if(!Gu&&mr){Gu=!0;do for(var r=!1,c=gr;c!==null;){if(n!==0){var g=c.pendingLanes;if(g===0)var p=0;else{var E=c.suspendedLanes,z=c.pingedLanes;p=(1<<31-Ze(42|n)+1)-1,p&=g&~(E&~z),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Kn(c,p))}else p=Tt,p=x(c,c===Yt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==Wi),(p&3)===0||A(c,p)||(r=!0,Kn(c,p));c=c.next}while(r);Gu=!1}}function ce(){Pe()}function Pe(){mr=Hu=!1;var n=0;ea!==0&&Em()&&(n=ea);for(var a=Ue(),r=null,c=gr;c!==null;){var g=c.next,p=Mn(c,a);p===0?(c.next=null,r===null?gr=g:r.next=g,g===null&&(Pa=r)):(r=c,(n!==0||(p&3)!==0)&&(mr=!0)),c=g}fe!==0&&fe!==5||nn(n),ea!==0&&(ea=0)}function Mn(n,a){for(var r=n.suspendedLanes,c=n.pingedLanes,g=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-Ze(p),z=1<<E,Z=g[E];Z===-1?((z&r)===0||(z&c)!==0)&&(g[E]=w(z,a)):Z<=a&&(n.expiredLanes|=z),p&=~z}if(a=Yt,r=Tt,r=x(n,n===a?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==Wi),c=n.callbackNode,r===0||n===a&&(Bt===2||Bt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ru(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||A(n,r)){if(a=r&-r,a===n.callbackPriority)return a;switch(c!==null&&Ru(c),j(r)){case 2:case 8:r=Xp;break;case 32:r=wu;break;case 268435456:r=Vp;break;default:r=wu}return c=Rn.bind(null,n),r=cr(r,c),n.callbackPriority=a,n.callbackNode=r,a}return c!==null&&c!==null&&Ru(c),n.callbackPriority=2,n.callbackNode=null,2}function Rn(n,a){if(fe!==0&&fe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Bs()&&n.callbackNode!==r)return null;var c=Tt;return c=x(n,n===Yt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==Wi),c===0?null:(jf(n,c,a),Mn(n,Ue()),n.callbackNode!=null&&n.callbackNode===r?Rn.bind(null,n):null)}function Kn(n,a){if(Bs())return null;jf(n,a,!0)}function an(){Mm?Rm(function(){(bt&6)!==0?cr(Qd,ce):Pe()}):cr(Qd,ce)}function gn(){if(ea===0){var n=Ka;n===0&&(n=rr,rr<<=1,(rr&261888)===0&&(rr=256)),ea=n}return ea}function Ss(n,a){if(Ps===null){var r=Ps=[];Bu=0,Ka=gn(),Qa={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Bu++,a.then(xa,xa),a}function xa(){if(--Bu===0&&Ps!==null){Qa!==null&&(Qa.status="fulfilled");var n=Ps;Ps=null,Ka=0,Qa=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function Xi(n,a){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return n.then(function(){c.status="fulfilled",c.value=a;for(var g=0;g<r.length;g++)(0,r[g])(a)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}function Vi(){var n=na.current;return n!==null?n:Yt.pooledCache}function qi(n,a){a===null?S(na,na.current):S(na,a.pool)}function wn(){var n=Vi();return n===null?null:{parent:Wn?Ft._currentValue:Ft._currentValue2,pool:n}}function ba(n,a){if(je(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var r=Object.keys(n),c=Object.keys(a);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!Kp.call(a,g)||!je(n[g],a[g]))return!1}return!0}function zl(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dl(n,a,r){switch(r=n[r],r===void 0?n.push(a):r!==a&&(a.then(dn,dn),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Hl(n),n;default:if(typeof a.status=="string")a.then(dn,dn);else{if(n=Yt,n!==null&&100<n.shellSuspendCounter)throw Error(l(482));n=a,n.status="pending",n.then(function(c){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=c}},function(c){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Hl(n),n}throw ia=a,Za}}function Qn(n){try{var a=n._init;return a(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ia=r,Za):r}}function Ol(){if(ia===null)throw Error(l(459));var n=ia;return ia=null,n}function Hl(n){if(n===Za||n===pr)throw Error(l(483))}function Ca(n){var a=Ks;return Ks+=1,ka===null&&(ka=[]),Dl(ka,n,a)}function Pi(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Ta(n,a){throw a.$$typeof===lm?Error(l(525)):(n=Object.prototype.toString.call(a),Error(l(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Gl(n){function a(V,L){if(n){var Q=V.deletions;Q===null?(V.deletions=[L],V.flags|=16):Q.push(L)}}function r(V,L){if(!n)return null;for(;L!==null;)a(V,L),L=L.sibling;return null}function c(V){for(var L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function g(V,L){return V=Jn(V,L),V.index=0,V.sibling=null,V}function p(V,L,Q){return V.index=Q,n?(Q=V.alternate,Q!==null?(Q=Q.index,Q<L?(V.flags|=67108866,L):Q):(V.flags|=67108866,L)):(V.flags|=1048576,L)}function E(V){return n&&V.alternate===null&&(V.flags|=67108866),V}function z(V,L,Q,at){return L===null||L.tag!==6?(L=du(Q,V.mode,at),L.return=V,L):(L=g(L,Q),L.return=V,L)}function Z(V,L,Q,at){var pt=Q.type;return pt===Ba?ot(V,L,Q.props.children,at,Q.key):L!==null&&(L.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===yi&&Qn(pt)===L.type)?(L=g(L,Q.props),Pi(L,Q),L.return=V,L):(L=ir(Q.type,Q.key,Q.props,null,V.mode,at),Pi(L,Q),L.return=V,L)}function et(V,L,Q,at){return L===null||L.tag!==4||L.stateNode.containerInfo!==Q.containerInfo||L.stateNode.implementation!==Q.implementation?(L=gu(Q,V.mode,at),L.return=V,L):(L=g(L,Q.children||[]),L.return=V,L)}function ot(V,L,Q,at,pt){return L===null||L.tag!==7?(L=Ji(Q,V.mode,at,pt),L.return=V,L):(L=g(L,Q),L.return=V,L)}function it(V,L,Q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=du(""+L,V.mode,Q),L.return=V,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ar:return Q=ir(L.type,L.key,L.props,null,V.mode,Q),Pi(Q,L),Q.return=V,Q;case Ga:return L=gu(L,V.mode,Q),L.return=V,L;case yi:return L=Qn(L),it(V,L,Q)}if(sr(L)||m(L))return L=Ji(L,V.mode,Q,null),L.return=V,L;if(typeof L.then=="function")return it(V,Ca(L),Q);if(L.$$typeof===pi)return it(V,Ge(V,L),Q);Ta(V,L)}return null}function ht(V,L,Q,at){var pt=L!==null?L.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return pt!==null?null:z(V,L,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ar:return Q.key===pt?Z(V,L,Q,at):null;case Ga:return Q.key===pt?et(V,L,Q,at):null;case yi:return Q=Qn(Q),ht(V,L,Q,at)}if(sr(Q)||m(Q))return pt!==null?null:ot(V,L,Q,at,null);if(typeof Q.then=="function")return ht(V,L,Ca(Q),at);if(Q.$$typeof===pi)return ht(V,L,Ge(V,Q),at);Ta(V,Q)}return null}function vt(V,L,Q,at,pt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return V=V.get(Q)||null,z(L,V,""+at,pt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case ar:return V=V.get(at.key===null?Q:at.key)||null,Z(L,V,at,pt);case Ga:return V=V.get(at.key===null?Q:at.key)||null,et(L,V,at,pt);case yi:return at=Qn(at),vt(V,L,Q,at,pt)}if(sr(at)||m(at))return V=V.get(Q)||null,ot(L,V,at,pt,null);if(typeof at.then=="function")return vt(V,L,Q,Ca(at),pt);if(at.$$typeof===pi)return vt(V,L,Q,Ge(L,at),pt);Ta(L,at)}return null}function xe(V,L,Q,at){for(var pt=null,It=null,yt=L,Ot=L=0,pe=null;yt!==null&&Ot<Q.length;Ot++){yt.index>Ot?(pe=yt,yt=null):pe=yt.sibling;var Ht=ht(V,yt,Q[Ot],at);if(Ht===null){yt===null&&(yt=pe);break}n&&yt&&Ht.alternate===null&&a(V,yt),L=p(Ht,L,Ot),It===null?pt=Ht:It.sibling=Ht,It=Ht,yt=pe}if(Ot===Q.length)return r(V,yt),At&&K(V,Ot),pt;if(yt===null){for(;Ot<Q.length;Ot++)yt=it(V,Q[Ot],at),yt!==null&&(L=p(yt,L,Ot),It===null?pt=yt:It.sibling=yt,It=yt);return At&&K(V,Ot),pt}for(yt=c(yt);Ot<Q.length;Ot++)pe=vt(yt,V,Ot,Q[Ot],at),pe!==null&&(n&&pe.alternate!==null&&yt.delete(pe.key===null?Ot:pe.key),L=p(pe,L,Ot),It===null?pt=pe:It.sibling=pe,It=pe);return n&&yt.forEach(function(Ni){return a(V,Ni)}),At&&K(V,Ot),pt}function Js(V,L,Q,at){if(Q==null)throw Error(l(151));for(var pt=null,It=null,yt=L,Ot=L=0,pe=null,Ht=Q.next();yt!==null&&!Ht.done;Ot++,Ht=Q.next()){yt.index>Ot?(pe=yt,yt=null):pe=yt.sibling;var Ni=ht(V,yt,Ht.value,at);if(Ni===null){yt===null&&(yt=pe);break}n&&yt&&Ni.alternate===null&&a(V,yt),L=p(Ni,L,Ot),It===null?pt=Ni:It.sibling=Ni,It=Ni,yt=pe}if(Ht.done)return r(V,yt),At&&K(V,Ot),pt;if(yt===null){for(;!Ht.done;Ot++,Ht=Q.next())Ht=it(V,Ht.value,at),Ht!==null&&(L=p(Ht,L,Ot),It===null?pt=Ht:It.sibling=Ht,It=Ht);return At&&K(V,Ot),pt}for(yt=c(yt);!Ht.done;Ot++,Ht=Q.next())Ht=vt(yt,V,Ot,Ht.value,at),Ht!==null&&(n&&Ht.alternate!==null&&yt.delete(Ht.key===null?Ot:Ht.key),L=p(Ht,L,Ot),It===null?pt=Ht:It.sibling=Ht,It=Ht);return n&&yt.forEach(function(Jp){return a(V,Jp)}),At&&K(V,Ot),pt}function ra(V,L,Q,at){if(typeof Q=="object"&&Q!==null&&Q.type===Ba&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ar:t:{for(var pt=Q.key;L!==null;){if(L.key===pt){if(pt=Q.type,pt===Ba){if(L.tag===7){r(V,L.sibling),at=g(L,Q.props.children),at.return=V,V=at;break t}}else if(L.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===yi&&Qn(pt)===L.type){r(V,L.sibling),at=g(L,Q.props),Pi(at,Q),at.return=V,V=at;break t}r(V,L);break}else a(V,L);L=L.sibling}Q.type===Ba?(at=Ji(Q.props.children,V.mode,at,Q.key),at.return=V,V=at):(at=ir(Q.type,Q.key,Q.props,null,V.mode,at),Pi(at,Q),at.return=V,V=at)}return E(V);case Ga:t:{for(pt=Q.key;L!==null;){if(L.key===pt)if(L.tag===4&&L.stateNode.containerInfo===Q.containerInfo&&L.stateNode.implementation===Q.implementation){r(V,L.sibling),at=g(L,Q.children||[]),at.return=V,V=at;break t}else{r(V,L);break}else a(V,L);L=L.sibling}at=gu(Q,V.mode,at),at.return=V,V=at}return E(V);case yi:return Q=Qn(Q),ra(V,L,Q,at)}if(sr(Q))return xe(V,L,Q,at);if(m(Q)){if(pt=m(Q),typeof pt!="function")throw Error(l(150));return Q=pt.call(Q),Js(V,L,Q,at)}if(typeof Q.then=="function")return ra(V,L,Ca(Q),at);if(Q.$$typeof===pi)return ra(V,L,Ge(V,Q),at);Ta(V,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,L!==null&&L.tag===6?(r(V,L.sibling),at=g(L,Q),at.return=V,V=at):(r(V,L),at=du(Q,V.mode,at),at.return=V,V=at),E(V)):r(V,L)}return function(V,L,Q,at){try{Ks=0;var pt=ra(V,L,Q,at);return ka=null,pt}catch(yt){if(yt===Za||yt===pr)throw yt;var It=i(29,yt,null,V.mode);return It.lanes=at,It.return=V,It}}}function Na(){for(var n=ja,a=Lu=ja=0;a<n;){var r=on[a];on[a++]=null;var c=on[a];on[a++]=null;var g=on[a];on[a++]=null;var p=on[a];if(on[a++]=null,c!==null&&g!==null){var E=c.pending;E===null?g.next=g:(g.next=E.next,E.next=g),c.pending=g}p!==0&&Bl(r,g,p)}}function Aa(n,a,r,c){on[ja++]=n,on[ja++]=a,on[ja++]=r,on[ja++]=c,Lu|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Es(n,a,r,c){return Aa(n,a,r,c),Ma(n)}function Zn(n,a){return Aa(n,null,null,a),Ma(n)}function Bl(n,a,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var g=!1,p=n.return;p!==null;)p.childLanes|=r,c=p.alternate,c!==null&&(c.childLanes|=r),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(g=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,g&&a!==null&&(g=31-Ze(r),n=p.hiddenUpdates,c=n[g],c===null?n[g]=[a]:c.push(a),a.lane=r|536870912),p):null}function Ma(n){if(50<Is)throw Is=0,Iu=null,Error(l(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}function Ra(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xs(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Dn(n,a,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(bt&2)!==0){var g=c.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),c.pending=a,a=Ma(n),Bl(n,null,r),a}return Aa(n,c,a,r),Ma(n)}function Ki(n,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var c=a.lanes;c&=n.pendingLanes,r|=c,a.lanes=r,P(n,r)}}function bs(n,a){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var E={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?g=p=E:p=p.next=E,r=r.next}while(r!==null);p===null?g=p=a:p=p.next=a}else g=p=a;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=a:n.next=a,r.lastBaseUpdate=a}function Qi(){if(Yu){var n=Qa;if(n!==null)throw n}}function Zi(n,a,r,c){Yu=!1;var g=n.updateQueue;Ei=!1;var p=g.firstBaseUpdate,E=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var Z=z,et=Z.next;Z.next=null,E===null?p=et:E.next=et,E=Z;var ot=n.alternate;ot!==null&&(ot=ot.updateQueue,z=ot.lastBaseUpdate,z!==E&&(z===null?ot.firstBaseUpdate=et:z.next=et,ot.lastBaseUpdate=Z))}if(p!==null){var it=g.baseState;E=0,ot=et=Z=null,z=p;do{var ht=z.lane&-536870913,vt=ht!==z.lane;if(vt?(Tt&ht)===ht:(c&ht)===ht){ht!==0&&ht===Ka&&(Yu=!0),ot!==null&&(ot=ot.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var xe=n,Js=z;ht=a;var ra=r;switch(Js.tag){case 1:if(xe=Js.payload,typeof xe=="function"){it=xe.call(ra,it,ht);break t}it=xe;break t;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Js.payload,ht=typeof xe=="function"?xe.call(ra,it,ht):xe,ht==null)break t;it=pu({},it,ht);break t;case 2:Ei=!0}}ht=z.callback,ht!==null&&(n.flags|=64,vt&&(n.flags|=8192),vt=g.callbacks,vt===null?g.callbacks=[ht]:vt.push(ht))}else vt={lane:ht,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ot===null?(et=ot=vt,Z=it):ot=ot.next=vt,E|=ht;if(z=z.next,z===null){if(z=g.shared.pending,z===null)break;vt=z,z=vt.next,vt.next=null,g.lastBaseUpdate=vt,g.shared.pending=null}}while(!0);ot===null&&(Z=it),g.baseState=Z,g.firstBaseUpdate=et,g.lastBaseUpdate=ot,p===null&&(g.shared.lanes=0),bi|=E,n.lanes=E,n.memoizedState=it}}function Ul(n,a){if(typeof n!="function")throw Error(l(191,n));n.call(a)}function Cs(n,a){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Ul(r[n],a)}function Ll(n,a){n=ii,S(vr,n),S(Fa,a),ii=n|a.baseLanes}function Ts(){S(vr,ii),S(Fa,Fa.current)}function Ns(){ii=vr.current,_(Fa),_(vr)}function On(n){var a=n.alternate;S(ne,ne.current&1),S(Fe,n),un===null&&(a===null||Fa.current!==null||a.memoizedState!==null)&&(un=n)}function As(n){S(ne,ne.current),S(Fe,n),un===null&&(un=n)}function Yl(n){n.tag===22?(S(ne,ne.current),S(Fe,n),un===null&&(un=n)):mn()}function mn(){S(ne,ne.current),S(Fe,Fe.current)}function Re(n){_(Fe),un===n&&(un=null),_(ne)}function wa(n){for(var a=n;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Tu(r)||Nu(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function kt(){throw Error(l(321))}function ki(n,a){if(a===null)return!1;for(var r=0;r<a.length&&r<n.length;r++)if(!je(n[r],a[r]))return!1;return!0}function Ao(n,a,r,c,g,p){return ei=p,_t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,mt.H=n===null||n.memoizedState===null?Jd:Xu,sa=!1,p=r(c,g),sa=!1,Ia&&(p=Th(a,r,c,g)),Ch(n),p}function Ch(n){mt.H=Zs;var a=Lt!==null&&Lt.next!==null;if(ei=0,ie=Lt=_t=null,_r=!1,Qs=0,Ja=null,a)throw Error(l(300));n===null||ae||(n=n.dependencies,n!==null&&An(n)&&(ae=!0))}function Th(n,a,r,c){_t=n;var g=0;do{if(Ia&&(Ja=null),Qs=0,Ia=!1,25<=g)throw Error(l(301));if(g+=1,ie=Lt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}mt.H=Wd,p=a(r,c)}while(Ia);return p}function Bg(){var n=mt.H,a=n.useState()[0];return a=typeof a.then=="function"?Ms(a):a,n=n.useState()[0],(Lt!==null?Lt.memoizedState:null)!==n&&(_t.flags|=1024),a}function Mo(){var n=Sr!==0;return Sr=0,n}function Ro(n,a,r){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~r}function wo(n){if(_r){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}_r=!1}ei=0,ie=Lt=_t=null,Ia=!1,Qs=Sr=0,Ja=null}function we(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?_t.memoizedState=ie=n:ie=ie.next=n,ie}function ee(){if(Lt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Lt.next;var a=ie===null?_t.memoizedState:ie.next;if(a!==null)ie=a,Lt=n;else{if(n===null)throw _t.alternate===null?Error(l(467)):Error(l(310));Lt=n,n={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},ie===null?_t.memoizedState=ie=n:ie=ie.next=n}return ie}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ms(n){var a=Qs;return Qs+=1,Ja===null&&(Ja=[]),n=Dl(Ja,n,a),a=_t,(ie===null?a.memoizedState:ie.next)===null&&(a=a.alternate,mt.H=a===null||a.memoizedState===null?Jd:Xu),n}function Vl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ms(n);if(n.$$typeof===pi)return Zt(n)}throw Error(l(438,String(n)))}function zo(n){var a=null,r=_t.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var c=_t.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Xl(),_t.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(n),c=0;c<n;c++)r[c]=rm;return a.index++,r}function kn(n,a){return typeof a=="function"?a(n):a}function ql(n){var a=ee();return Do(a,Lt,n)}function Do(n,a,r){var c=n.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=r;var g=n.baseQueue,p=c.pending;if(p!==null){if(g!==null){var E=g.next;g.next=p.next,p.next=E}a.baseQueue=g=p,c.pending=null}if(p=n.baseState,g===null)n.memoizedState=p;else{a=g.next;var z=E=null,Z=null,et=a,ot=!1;do{var it=et.lane&-536870913;if(it!==et.lane?(Tt&it)===it:(ei&it)===it){var ht=et.revertLane;if(ht===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),it===Ka&&(ot=!0);else if((ei&ht)===ht){et=et.next,ht===Ka&&(ot=!0);continue}else it={lane:0,revertLane:et.revertLane,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Z===null?(z=Z=it,E=p):Z=Z.next=it,_t.lanes|=ht,bi|=ht;it=et.action,sa&&r(p,it),p=et.hasEagerState?et.eagerState:r(p,it)}else ht={lane:it,revertLane:et.revertLane,gesture:et.gesture,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Z===null?(z=Z=ht,E=p):Z=Z.next=ht,_t.lanes|=it,bi|=it;et=et.next}while(et!==null&&et!==a);if(Z===null?E=p:Z.next=z,!je(p,n.memoizedState)&&(ae=!0,ot&&(r=Qa,r!==null)))throw r;n.memoizedState=p,n.baseState=E,n.baseQueue=Z,c.lastRenderedState=p}return g===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Oo(n){var a=ee(),r=a.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=n;var c=r.dispatch,g=r.pending,p=a.memoizedState;if(g!==null){r.pending=null;var E=g=g.next;do p=n(p,E.action),E=E.next;while(E!==g);je(p,a.memoizedState)||(ae=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,c]}function Nh(n,a,r){var c=_t,g=ee(),p=At;if(p){if(r===void 0)throw Error(l(407));r=r()}else r=a();var E=!je((Lt||g).memoizedState,r);if(E&&(g.memoizedState=r,ae=!0),g=g.queue,Bo(Rh.bind(null,c,g,n),[n]),g.getSnapshot!==a||E||ie!==null&&ie.memoizedState.tag&1){if(c.flags|=2048,za(9,{destroy:void 0},Mh.bind(null,c,g,r,a),null),Yt===null)throw Error(l(349));p||(ei&127)!==0||Ah(c,a,r)}return r}function Ah(n,a,r){n.flags|=16384,n={getSnapshot:a,value:r},a=_t.updateQueue,a===null?(a=Xl(),_t.updateQueue=a,a.stores=[n]):(r=a.stores,r===null?a.stores=[n]:r.push(n))}function Mh(n,a,r,c){a.value=r,a.getSnapshot=c,wh(a)&&zh(n)}function Rh(n,a,r){return r(function(){wh(a)&&zh(n)})}function wh(n){var a=n.getSnapshot;n=n.value;try{var r=a();return!je(n,r)}catch{return!0}}function zh(n){var a=Zn(n,2);a!==null&&Be(a,n,2)}function Ho(n){var a=we();if(typeof n=="function"){var r=n;if(n=r(),sa){W(!0);try{r()}finally{W(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:n},a}function Dh(n,a,r,c){return n.baseState=r,Do(n,Lt,typeof c=="function"?c:kn)}function Ug(n,a,r,c,g){if(Ql(n))throw Error(l(485));if(n=a.action,n!==null){var p={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};mt.T!==null?r(!0):p.isTransition=!1,c(p),r=a.pending,r===null?(p.next=a.pending=p,Oh(a,p)):(p.next=r.next,a.pending=r.next=p)}}function Oh(n,a){var r=a.action,c=a.payload,g=n.state;if(a.isTransition){var p=mt.T,E={};mt.T=E;try{var z=r(g,c),Z=mt.S;Z!==null&&Z(E,z),Hh(n,a,z)}catch(et){Go(n,a,et)}finally{p!==null&&E.types!==null&&(p.types=E.types),mt.T=p}}else try{p=r(g,c),Hh(n,a,p)}catch(et){Go(n,a,et)}}function Hh(n,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Gh(n,a,c)},function(c){return Go(n,a,c)}):Gh(n,a,r)}function Gh(n,a,r){a.status="fulfilled",a.value=r,Bh(a),n.state=r,a=n.pending,a!==null&&(r=a.next,r===a?n.pending=null:(r=r.next,a.next=r,Oh(n,r)))}function Go(n,a,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=r,Bh(a),a=a.next;while(a!==c)}n.action=null}function Bh(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Uh(n,a){return a}function Lh(n,a){if(At){var r=Yt.formState;if(r!==null){t:{var c=_t;if(At){if(jt){var g=tp(jt,rn);if(g){jt=Od(g),c=ep(g);break t}}zt(c)}c=!1}c&&(a=r[0])}}r=we(),r.memoizedState=r.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:a},r.queue=c,r=nf.bind(null,_t,c),c.dispatch=r,c=Ho(!1);var p=Xo.bind(null,_t,!1,c.queue);return c=we(),g={state:a,dispatch:null,action:n,pending:null},c.queue=g,r=Ug.bind(null,_t,g,p,r),g.dispatch=r,c.memoizedState=n,[a,r,!1]}function Yh(n){var a=ee();return Xh(a,Lt,n)}function Xh(n,a,r){if(a=Do(n,a,Uh)[0],n=ql(kn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Ms(a)}catch(E){throw E===Za?pr:E}else c=a;a=ee();var g=a.queue,p=g.dispatch;return r!==a.memoizedState&&(_t.flags|=2048,za(9,{destroy:void 0},Lg.bind(null,g,r),null)),[c,p,n]}function Lg(n,a){n.action=a}function Vh(n){var a=ee(),r=Lt;if(r!==null)return Xh(a,r,n);ee(),a=a.memoizedState,r=ee();var c=r.queue.dispatch;return r.memoizedState=n,[a,c,!1]}function za(n,a,r,c){return n={tag:n,create:r,deps:c,inst:a,next:null},a=_t.updateQueue,a===null&&(a=Xl(),_t.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,a.lastEffect=n),n}function qh(){return ee().memoizedState}function Pl(n,a,r,c){var g=we();_t.flags|=n,g.memoizedState=za(1|a,{destroy:void 0},r,c===void 0?null:c)}function Kl(n,a,r,c){var g=ee();c=c===void 0?null:c;var p=g.memoizedState.inst;Lt!==null&&c!==null&&ki(c,Lt.memoizedState.deps)?g.memoizedState=za(a,p,r,c):(_t.flags|=n,g.memoizedState=za(1|a,p,r,c))}function Ph(n,a){Pl(8390656,8,n,a)}function Bo(n,a){Kl(2048,8,n,a)}function Yg(n){_t.flags|=4;var a=_t.updateQueue;if(a===null)a=Xl(),_t.updateQueue=a,a.events=[n];else{var r=a.events;r===null?a.events=[n]:r.push(n)}}function Kh(n){var a=ee().memoizedState;return Yg({ref:a,nextImpl:n}),function(){if((bt&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function Qh(n,a){return Kl(4,2,n,a)}function Zh(n,a){return Kl(4,4,n,a)}function kh(n,a){if(typeof a=="function"){n=n();var r=a(n);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function jh(n,a,r){r=r!=null?r.concat([n]):null,Kl(4,4,kh.bind(null,a,n),r)}function Uo(){}function Fh(n,a){var r=ee();a=a===void 0?null:a;var c=r.memoizedState;return a!==null&&ki(a,c[1])?c[0]:(r.memoizedState=[n,a],n)}function Ih(n,a){var r=ee();a=a===void 0?null:a;var c=r.memoizedState;if(a!==null&&ki(a,c[1]))return c[0];if(c=n(),sa){W(!0);try{n()}finally{W(!1)}}return r.memoizedState=[c,a],c}function Lo(n,a,r){return r===void 0||(ei&1073741824)!==0&&(Tt&261930)===0?n.memoizedState=a:(n.memoizedState=r,n=kf(),_t.lanes|=n,bi|=n,r)}function Jh(n,a,r,c){return je(r,a)?r:Fa.current!==null?(n=Lo(n,r,c),je(n,a)||(ae=!0),n):(ei&42)===0||(ei&1073741824)!==0&&(Tt&261930)===0?(ae=!0,n.memoizedState=r):(n=kf(),_t.lanes|=n,bi|=n,a)}function Wh(n,a,r,c,g){var p=$n();ge(p!==0&&8>p?p:8);var E=mt.T,z={};mt.T=z,Xo(n,!1,a,r);try{var Z=g(),et=mt.S;if(et!==null&&et(z,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var ot=Xi(Z,c);Rs(n,a,ot,Ke(n))}else Rs(n,a,c,Ke(n))}catch(it){Rs(n,a,{then:function(){},status:"rejected",reason:it},Ke())}finally{ge(p),E!==null&&z.types!==null&&(E.types=z.types),mt.T=E}}function $h(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Ua,baseState:Ua,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:Ua},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:r},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Yo(){return Zt($i)}function tf(){return ee().memoizedState}function ef(){return ee().memoizedState}function Xg(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var r=Ke();n=zn(r);var c=Dn(a,n,r);c!==null&&(Be(c,a,r),Ki(c,a,r)),a={cache:fn()},n.payload=a;return}a=a.return}}function Vg(n,a,r){var c=Ke();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ql(n)?af(a,r):(r=Es(n,a,r,c),r!==null&&(Be(r,n,c),sf(r,a,c)))}function nf(n,a,r){var c=Ke();Rs(n,a,r,c)}function Rs(n,a,r,c){var g={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ql(n))af(a,g);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var E=a.lastRenderedState,z=p(E,r);if(g.hasEagerState=!0,g.eagerState=z,je(z,E))return Aa(n,a,g,0),Yt===null&&Na(),!1}catch{}if(r=Es(n,a,g,c),r!==null)return Be(r,n,c),sf(r,a,c),!0}return!1}function Xo(n,a,r,c){if(c={lane:2,revertLane:gn(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ql(n)){if(a)throw Error(l(479))}else a=Es(n,r,c,2),a!==null&&Be(a,n,2)}function Ql(n){var a=n.alternate;return n===_t||a!==null&&a===_t}function af(n,a){Ia=_r=!0;var r=n.pending;r===null?a.next=a:(a.next=r.next,r.next=a),n.pending=a}function sf(n,a,r){if((r&4194048)!==0){var c=a.lanes;c&=n.pendingLanes,r|=c,a.lanes=r,P(n,r)}}function Vo(n,a,r,c){a=n.memoizedState,r=r(c,a),r=r==null?a:pu({},a,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}function lf(n,a,r,c,g,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):a.prototype&&a.prototype.isPureReactComponent?!ba(r,c)||!ba(g,p):!0}function rf(n,a,r,c){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,c),a.state!==n&&Vu.enqueueReplaceState(a,a.state,null)}function ji(n,a){var r=a;if("ref"in a){r={};for(var c in a)c!=="ref"&&(r[c]=a[c])}if(n=n.defaultProps){r===a&&(r=pu({},r));for(var g in n)r[g]===void 0&&(r[g]=n[g])}return r}function Zl(n,a){try{var r=n.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function of(n,a,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function qo(n,a,r){return r=zn(r),r.tag=3,r.payload={element:null},r.callback=function(){Zl(n,a)},r}function uf(n){return n=zn(n),n.tag=3,n}function cf(n,a,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var p=c.value;n.payload=function(){return g(p)},n.callback=function(){of(a,r,c)}}var E=r.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){of(a,r,c),typeof g!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var z=c.stack;this.componentDidCatch(c.value,{componentStack:z!==null?z:""})})}function qg(n,a,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=r.alternate,a!==null&&Oe(a,r,g,!0),r=Fe.current,r!==null){switch(r.tag){case 31:case 13:return un===null?er():r.alternate===null&&Wt===0&&(Wt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===yr?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([c]):a.add(c),hu(n,c,g)),!1;case 22:return r.flags|=65536,c===yr?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([c]):r.add(c)),hu(n,c,g)),!1}throw Error(l(435,r.tag))}return hu(n,c,g),er(),!1}if(At)return a=Fe.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,c!==Ou&&(n=Error(l(422),{cause:c}),Pt(D(n,r)))):(c!==Ou&&(a=Error(l(423),{cause:c}),Pt(D(a,r))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,c=D(c,r),g=qo(n.stateNode,c,g),bs(n,g),Wt!==4&&(Wt=2)),!1;var p=Error(l(520),{cause:c});if(p=D(p,r),js===null?js=[p]:js.push(p),Wt!==4&&(Wt=2),a===null)return!0;c=D(c,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,n=g&-g,r.lanes|=n,n=qo(r.stateNode,c,n),bs(r,n),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ci===null||!Ci.has(p))))return r.flags|=65536,g&=-g,r.lanes|=g,g=uf(g),cf(g,n,r,c),bs(r,g),!1}r=r.return}while(r!==null);return!1}function _e(n,a,r,c){a.child=n===null?Id(a,null,r,c):aa(a,n.child,r,c)}function hf(n,a,r,c,g){r=r.render;var p=a.ref;if("ref"in c){var E={};for(var z in c)z!=="ref"&&(E[z]=c[z])}else E=c;return He(a),c=Ao(n,a,r,E,p,g),z=Mo(),n!==null&&!ae?(Ro(n,a,g),jn(n,a,g)):(At&&z&&tt(a),a.flags|=1,_e(n,a,c,g),a.child)}function ff(n,a,r,c,g){if(n===null){var p=r.type;return typeof p=="function"&&!fu(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,df(n,a,p,c,g)):(n=ir(r.type,null,c,a,a.mode,g),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!Fo(n,g)){var E=p.memoizedProps;if(r=r.compare,r=r!==null?r:ba,r(E,c)&&n.ref===a.ref)return jn(n,a,g)}return a.flags|=1,n=Jn(p,c),n.ref=a.ref,n.return=a,a.child=n}function df(n,a,r,c,g){if(n!==null){var p=n.memoizedProps;if(ba(p,c)&&n.ref===a.ref)if(ae=!1,a.pendingProps=c=p,Fo(n,g))(n.flags&131072)!==0&&(ae=!0);else return a.lanes=n.lanes,jn(n,a,g)}return Po(n,a,r,c,g)}function gf(n,a,r,c){var g=c.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,n!==null){for(c=a.child=n.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~p}else c=0,a.child=null;return mf(n,a,p,r,c)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&qi(a,p!==null?p.cachePool:null),p!==null?Ll(a,p):Ts(),Yl(a);else return c=a.lanes=536870912,mf(n,a,p!==null?p.baseLanes|r:r,r,c)}else p!==null?(qi(a,p.cachePool),Ll(a,p),mn(),a.memoizedState=null):(n!==null&&qi(a,null),Ts(),mn());return _e(n,a,g,r),a.child}function ws(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function mf(n,a,r,c,g){var p=Vi();return p=p===null?null:{parent:Wn?Ft._currentValue:Ft._currentValue2,pool:p},a.memoizedState={baseLanes:r,cachePool:p},n!==null&&qi(a,null),Ts(),Yl(a),n!==null&&Oe(n,a,c,!0),a.childLanes=g,null}function kl(n,a){return a=Fl({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function pf(n,a,r){return aa(a,n.child,null,r),n=kl(a,a.pendingProps),n.flags|=2,Re(a),a.memoizedState=null,n}function Pg(n,a,r){var c=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(At){if(c.mode==="hidden")return n=kl(a,c),a.lanes=536870912,ws(null,n);if(As(a),(n=jt)?(n=cp(n,rn),n!==null&&(a.memoizedState={dehydrated:n,treeContext:vi!==null?{id:Bn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},r=dd(n),r.return=a,a.child=r,Ee=a,jt=null)):n=null,n===null)throw zt(a);return a.lanes=536870912,null}return kl(a,c)}var p=n.memoizedState;if(p!==null){var E=p.dehydrated;if(As(a),g)if(a.flags&256)a.flags&=-257,a=pf(n,a,r);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(l(558));else if(ae||Oe(n,a,r,!1),g=(r&n.childLanes)!==0,ae||g){if(c=Yt,c!==null&&(E=I(c,r),E!==0&&E!==p.retryLane))throw p.retryLane=E,Zn(n,E),Be(c,n,E),qu;er(),a=pf(n,a,r)}else n=p.treeContext,Ae&&(jt=sp(E),Ee=a,At=!0,Si=null,rn=!1,n!==null&&ct(a,n)),a=kl(a,c),a.flags|=4096;return a}return n=Jn(n.child,{mode:c.mode,children:c.children}),n.ref=a.ref,a.child=n,n.return=a,n}function jl(n,a){var r=a.ref;if(r===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(n===null||n.ref!==r)&&(a.flags|=4194816)}}function Po(n,a,r,c,g){return He(a),r=Ao(n,a,r,c,void 0,g),c=Mo(),n!==null&&!ae?(Ro(n,a,g),jn(n,a,g)):(At&&c&&tt(a),a.flags|=1,_e(n,a,r,g),a.child)}function yf(n,a,r,c,g,p){return He(a),a.updateQueue=null,r=Th(a,c,r,g),Ch(n),c=Mo(),n!==null&&!ae?(Ro(n,a,p),jn(n,a,p)):(At&&c&&tt(a),a.flags|=1,_e(n,a,r,p),a.child)}function vf(n,a,r,c,g){if(He(a),a.stateNode===null){var p=Xa,E=r.contextType;typeof E=="object"&&E!==null&&(p=Zt(E)),p=new r(c,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Vu,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=c,p.state=a.memoizedState,p.refs={},Ra(a),E=r.contextType,p.context=typeof E=="object"&&E!==null?Zt(E):Xa,p.state=a.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(Vo(a,r,E,c),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Vu.enqueueReplaceState(p,p.state,null),Zi(a,c,p,g),Qi(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(n===null){p=a.stateNode;var z=a.memoizedProps,Z=ji(r,z);p.props=Z;var et=p.context,ot=r.contextType;E=Xa,typeof ot=="object"&&ot!==null&&(E=Zt(ot));var it=r.getDerivedStateFromProps;ot=typeof it=="function"||typeof p.getSnapshotBeforeUpdate=="function",z=a.pendingProps!==z,ot||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(z||et!==E)&&rf(a,p,c,E),Ei=!1;var ht=a.memoizedState;p.state=ht,Zi(a,c,p,g),Qi(),et=a.memoizedState,z||ht!==et||Ei?(typeof it=="function"&&(Vo(a,r,it,c),et=a.memoizedState),(Z=Ei||lf(a,r,Z,c,ht,et,E))?(ot||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=et),p.props=c,p.state=et,p.context=E,c=Z):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{p=a.stateNode,xs(n,a),E=a.memoizedProps,ot=ji(r,E),p.props=ot,it=a.pendingProps,ht=p.context,et=r.contextType,Z=Xa,typeof et=="object"&&et!==null&&(Z=Zt(et)),z=r.getDerivedStateFromProps,(et=typeof z=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==it||ht!==Z)&&rf(a,p,c,Z),Ei=!1,ht=a.memoizedState,p.state=ht,Zi(a,c,p,g),Qi();var vt=a.memoizedState;E!==it||ht!==vt||Ei||n!==null&&n.dependencies!==null&&An(n.dependencies)?(typeof z=="function"&&(Vo(a,r,z,c),vt=a.memoizedState),(ot=Ei||lf(a,r,ot,c,ht,vt,Z)||n!==null&&n.dependencies!==null&&An(n.dependencies))?(et||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,vt,Z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,vt,Z)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&ht===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ht===n.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=vt),p.props=c,p.state=vt,p.context=Z,c=ot):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&ht===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ht===n.memoizedState||(a.flags|=1024),c=!1)}return p=c,jl(n,a),c=(a.flags&128)!==0,p||c?(p=a.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&c?(a.child=aa(a,n.child,null,g),a.child=aa(a,null,r,g)):_e(n,a,r,g),a.memoizedState=p.state,n=a.child):n=jn(n,a,g),n}function _f(n,a,r,c){return oe(),a.flags|=256,_e(n,a,r,c),a.child}function Ko(n){return{baseLanes:n,cachePool:wn()}}function Qo(n,a,r){return n=n!==null?n.childLanes&~r:0,a&&(n|=Je),n}function Sf(n,a,r){var c=a.pendingProps,g=!1,p=(a.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(ne.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,n===null){if(At){if(g?On(a):mn(),(n=jt)?(n=hp(n,rn),n!==null&&(a.memoizedState={dehydrated:n,treeContext:vi!==null?{id:Bn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},r=dd(n),r.return=a,a.child=r,Ee=a,jt=null)):n=null,n===null)throw zt(a);return Nu(n)?a.lanes=32:a.lanes=536870912,null}var z=c.children;return c=c.fallback,g?(mn(),g=a.mode,z=Fl({mode:"hidden",children:z},g),c=Ji(c,g,r,null),z.return=a,c.return=a,z.sibling=c,a.child=z,c=a.child,c.memoizedState=Ko(r),c.childLanes=Qo(n,E,r),a.memoizedState=Pu,ws(null,c)):(On(a),Zo(a,z))}var Z=n.memoizedState;if(Z!==null&&(z=Z.dehydrated,z!==null)){if(p)a.flags&256?(On(a),a.flags&=-257,a=ko(n,a,r)):a.memoizedState!==null?(mn(),a.child=n.child,a.flags|=128,a=null):(mn(),z=c.fallback,g=a.mode,c=Fl({mode:"visible",children:c.children},g),z=Ji(z,g,r,null),z.flags|=2,c.return=a,z.return=a,c.sibling=z,a.child=c,aa(a,n.child,null,r),c=a.child,c.memoizedState=Ko(r),c.childLanes=Qo(n,E,r),a.memoizedState=Pu,a=ws(null,c));else if(On(a),Nu(z))E=Wm(z).digest,c=Error(l(419)),c.stack="",c.digest=E,Pt({value:c,source:null,stack:null}),a=ko(n,a,r);else if(ae||Oe(n,a,r,!1),E=(r&n.childLanes)!==0,ae||E){if(E=Yt,E!==null&&(c=I(E,r),c!==0&&c!==Z.retryLane))throw Z.retryLane=c,Zn(n,c),Be(E,n,c),qu;Tu(z)||er(),a=ko(n,a,r)}else Tu(z)?(a.flags|=192,a.child=n.child,a=null):(n=Z.treeContext,Ae&&(jt=lp(z),Ee=a,At=!0,Si=null,rn=!1,n!==null&&ct(a,n)),a=Zo(a,c.children),a.flags|=4096);return a}return g?(mn(),z=c.fallback,g=a.mode,Z=n.child,p=Z.sibling,c=Jn(Z,{mode:"hidden",children:c.children}),c.subtreeFlags=Z.subtreeFlags&65011712,p!==null?z=Jn(p,z):(z=Ji(z,g,r,null),z.flags|=2),z.return=a,c.return=a,c.sibling=z,a.child=c,ws(null,c),c=a.child,z=n.child.memoizedState,z===null?z=Ko(r):(g=z.cachePool,g!==null?(Z=Wn?Ft._currentValue:Ft._currentValue2,g=g.parent!==Z?{parent:Z,pool:Z}:g):g=wn(),z={baseLanes:z.baseLanes|r,cachePool:g}),c.memoizedState=z,c.childLanes=Qo(n,E,r),a.memoizedState=Pu,ws(n.child,c)):(On(a),r=n.child,n=r.sibling,r=Jn(r,{mode:"visible",children:c.children}),r.return=a,r.sibling=null,n!==null&&(E=a.deletions,E===null?(a.deletions=[n],a.flags|=16):E.push(n)),a.child=r,a.memoizedState=null,r)}function Zo(n,a){return a=Fl({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Fl(n,a){return n=i(22,n,null,a),n.lanes=0,n}function ko(n,a,r){return aa(a,n.child,null,r),n=Zo(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Ef(n,a,r){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a),ft(n.return,a,r)}function jo(n,a,r,c,g,p){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g,treeForkCount:p}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=r,E.tailMode=g,E.treeForkCount=p)}function xf(n,a,r){var c=a.pendingProps,g=c.revealOrder,p=c.tail;c=c.children;var E=ne.current,z=(E&2)!==0;if(z?(E=E&1|2,a.flags|=128):E&=1,S(ne,E),_e(n,a,c,r),c=At?Vs:0,!z&&n!==null&&(n.flags&128)!==0)t:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ef(n,r,a);else if(n.tag===19)Ef(n,r,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break t;for(;n.sibling===null;){if(n.return===null||n.return===a)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(r=a.child,g=null;r!==null;)n=r.alternate,n!==null&&wa(n)===null&&(g=r),r=r.sibling;r=g,r===null?(g=a.child,a.child=null):(g=r.sibling,r.sibling=null),jo(a,!1,g,r,p,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=a.child,a.child=null;g!==null;){if(n=g.alternate,n!==null&&wa(n)===null){a.child=g;break}n=g.sibling,g.sibling=r,r=g,g=n}jo(a,!0,r,null,p,c);break;case"together":jo(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function jn(n,a,r){if(n!==null&&(a.dependencies=n.dependencies),bi|=a.lanes,(r&a.childLanes)===0)if(n!==null){if(Oe(n,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(l(153));if(a.child!==null){for(n=a.child,r=Jn(n,n.pendingProps),a.child=r,r.return=a;n.sibling!==null;)n=n.sibling,r=r.sibling=Jn(n,n.pendingProps),r.return=a;r.sibling=null}return a.child}function Fo(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&An(n)))}function Kg(n,a,r){switch(a.tag){case 3:gt(a,a.stateNode.containerInfo),ue(a,Ft,n.memoizedState.cache),oe();break;case 27:case 5:Rt(a);break;case 4:gt(a,a.stateNode.containerInfo);break;case 10:ue(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,As(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(On(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Sf(n,a,r):(On(a),n=jn(n,a,r),n!==null?n.sibling:null);On(a);break;case 19:var g=(n.flags&128)!==0;if(c=(r&a.childLanes)!==0,c||(Oe(n,a,r,!1),c=(r&a.childLanes)!==0),g){if(c)return xf(n,a,r);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),S(ne,ne.current),c)break;return null;case 22:return a.lanes=0,gf(n,a,r,a.pendingProps);case 24:ue(a,Ft,n.memoizedState.cache)}return jn(n,a,r)}function bf(n,a,r){if(n!==null)if(n.memoizedProps!==a.pendingProps)ae=!0;else{if(!Fo(n,r)&&(a.flags&128)===0)return ae=!1,Kg(n,a,r);ae=(n.flags&131072)!==0}else ae=!1,At&&(a.flags&1048576)!==0&&F(a,Vs,a.index);switch(a.lanes=0,a.tag){case 16:t:{var c=a.pendingProps;if(n=Qn(a.elementType),a.type=n,typeof n=="function")fu(n)?(c=ji(n,c),a.tag=1,a=vf(null,a,n,c,r)):(a.tag=0,a=Po(null,a,n,c,r));else{if(n!=null){var g=n.$$typeof;if(g===vu){a.tag=11,a=hf(null,a,n,c,r);break t}else if(g===Eu){a.tag=14,a=ff(null,a,n,c,r);break t}}throw a=y(n)||n,Error(l(306,a,""))}}return a;case 0:return Po(n,a,a.type,a.pendingProps,r);case 1:return c=a.type,g=ji(c,a.pendingProps),vf(n,a,c,g,r);case 3:t:{if(gt(a,a.stateNode.containerInfo),n===null)throw Error(l(387));var p=a.pendingProps;g=a.memoizedState,c=g.element,xs(n,a),Zi(a,p,null,r);var E=a.memoizedState;if(p=E.cache,ue(a,Ft,p),p!==g.cache&&ye(a,[Ft],r,!0),Qi(),p=E.element,Ae&&g.isDehydrated)if(g={element:p,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=_f(n,a,p,r);break t}else if(p!==c){c=D(Error(l(424)),a),Pt(c),a=_f(n,a,p,r);break t}else for(Ae&&(jt=ap(a.stateNode.containerInfo),Ee=a,At=!0,Si=null,rn=!0),r=Id(a,null,p,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oe(),p===c){a=jn(n,a,r);break t}_e(n,a,p,r)}a=a.child}return a;case 26:if(_n)return jl(n,a),n===null?(r=Bd(a.type,null,a.pendingProps,null))?a.memoizedState=r:At||(a.stateNode=zp(a.type,a.pendingProps,_i.current,a)):a.memoizedState=Bd(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:if(he)return Rt(a),n===null&&he&&At&&(c=a.stateNode=qd(a.type,a.pendingProps,_i.current,Se.current,!1),Ee=a,rn=!0,jt=rp(a.type,c,jt)),_e(n,a,a.pendingProps.children,r),jl(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&At&&(Mp(a.type,a.pendingProps,Se.current),(g=c=jt)&&(c=op(c,a.type,a.pendingProps,rn),c!==null?(a.stateNode=c,Ee=a,jt=ip(c),rn=!1,g=!0):g=!1),g||zt(a)),Rt(a),g=a.type,p=a.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,lr(g,p)?c=null:E!==null&&lr(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Ao(n,a,Bg,null,null,r),Wn?$i._currentValue=g:$i._currentValue2=g),jl(n,a),_e(n,a,c,r),a.child;case 6:return n===null&&At&&(Rp(a.pendingProps,Se.current),(n=r=jt)&&(r=up(r,a.pendingProps,rn),r!==null?(a.stateNode=r,Ee=a,jt=null,n=!0):n=!1),n||zt(a)),null;case 13:return Sf(n,a,r);case 4:return gt(a,a.stateNode.containerInfo),c=a.pendingProps,n===null?a.child=aa(a,null,c,r):_e(n,a,c,r),a.child;case 11:return hf(n,a,a.type,a.pendingProps,r);case 7:return _e(n,a,a.pendingProps,r),a.child;case 8:return _e(n,a,a.pendingProps.children,r),a.child;case 12:return _e(n,a,a.pendingProps.children,r),a.child;case 10:return c=a.pendingProps,ue(a,a.type,c.value),_e(n,a,c.children,r),a.child;case 9:return g=a.type._context,c=a.pendingProps.children,He(a),g=Zt(g),c=c(g),a.flags|=1,_e(n,a,c,r),a.child;case 14:return ff(n,a,a.type,a.pendingProps,r);case 15:return df(n,a,a.type,a.pendingProps,r);case 19:return xf(n,a,r);case 31:return Pg(n,a,r);case 22:return gf(n,a,r,a.pendingProps);case 24:return He(a),c=Zt(Ft),n===null?(g=Vi(),g===null&&(g=Yt,p=fn(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=r),g=p),a.memoizedState={parent:c,cache:g},Ra(a),ue(a,Ft,g)):((n.lanes&r)!==0&&(xs(n,a),Zi(a,null,null,r),Qi()),g=n.memoizedState,p=a.memoizedState,g.parent!==c?(g={parent:c,cache:c},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),ue(a,Ft,c)):(c=p.cache,ue(a,Ft,c),c!==g.cache&&ye(a,[Ft],r,!0))),_e(n,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function pn(n){n.flags|=4}function Il(n){Gn&&(n.flags|=8)}function Cf(n,a){if(n!==null&&n.child===a.child)return!1;if((a.flags&16)!==0)return!0;for(n=a.child;n!==null;){if((n.flags&8218)!==0||(n.subtreeFlags&8218)!==0)return!0;n=n.sibling}return!1}function Io(n,a,r,c){if(Ne)for(r=a.child;r!==null;){if(r.tag===5||r.tag===6)bu(n,r.stateNode);else if(!(r.tag===4||he&&r.tag===27)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else if(Gn)for(var g=a.child;g!==null;){if(g.tag===5){var p=g.stateNode;r&&c&&(p=zd(p,g.type,g.memoizedProps)),bu(n,p)}else if(g.tag===6)p=g.stateNode,r&&c&&(p=Dd(p,g.memoizedProps)),bu(n,p);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)p=g.child,p!==null&&(p.return=g),Io(n,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===a)break;for(;g.sibling===null;){if(g.return===null||g.return===a)return;g=g.return}g.sibling.return=g.return,g=g.sibling}}function Tf(n,a,r,c){var g=!1;if(Gn)for(var p=a.child;p!==null;){if(p.tag===5){var E=p.stateNode;r&&c&&(E=zd(E,p.type,p.memoizedProps)),Rd(n,E)}else if(p.tag===6)E=p.stateNode,r&&c&&(E=Dd(E,p.memoizedProps)),Rd(n,E);else if(p.tag!==4){if(p.tag===22&&p.memoizedState!==null)g=p.child,g!==null&&(g.return=p),Tf(n,p,!0,!0),g=!0;else if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return g;p=p.return}p.sibling.return=p.return,p=p.sibling}return g}function Nf(n,a){if(Gn&&Cf(n,a)){n=a.stateNode;var r=n.containerInfo,c=Md();Tf(c,a,!1,!1),n.pendingChildren=c,pn(a),Jm(r,c)}}function Jo(n,a,r,c){if(Ne)n.memoizedProps!==c&&pn(a);else if(Gn){var g=n.stateNode,p=n.memoizedProps;if((n=Cf(n,a))||p!==c){var E=Se.current;p=Im(g,r,p,c,!n,null),p===g?a.stateNode=g:(Il(a),bd(p,r,c,E)&&pn(a),a.stateNode=p,n&&Io(p,a,!1,!1))}else a.stateNode=g}}function Wo(n,a,r,c,g){if((n.mode&32)!==0&&(r===null?bm(a,c):Cm(a,r,c))){if(n.flags|=16777216,(g&335544128)===g||Cu(a,c))if(Td(n.stateNode,a,c))n.flags|=8192;else if(Wf())n.flags|=8192;else throw ia=yr,Uu}else n.flags&=-16777217}function Af(n,a){if(Op(a)){if(n.flags|=16777216,!Vd(a))if(Wf())n.flags|=8192;else throw ia=yr,Uu}else n.flags&=-16777217}function Jl(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?M():536870912,n.lanes|=a,ts|=a)}function zs(n,a){if(!At)switch(n.tailMode){case"hidden":a=n.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var a=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(a)for(var g=n.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=c,n.childLanes=r,a}function Qg(n,a,r){var c=a.pendingProps;switch(ut(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return Kt(a),null;case 3:return r=a.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Nt(Ft),St(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(re(a)?pn(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ce())),Nf(n,a),Kt(a),null;case 26:if(_n){var g=a.type,p=a.memoizedState;return n===null?(pn(a),p!==null?(Kt(a),Af(a,p)):(Kt(a),Wo(a,g,null,c,r))):p?p!==n.memoizedState?(pn(a),Kt(a),Af(a,p)):(Kt(a),a.flags&=-16777217):(p=n.memoizedProps,Ne?p!==c&&pn(a):Jo(n,a,g,c),Kt(a),Wo(a,g,p,c,r)),null}case 27:if(he){if(wt(a),r=_i.current,g=a.type,n!==null&&a.stateNode!=null)Ne?n.memoizedProps!==c&&pn(a):Jo(n,a,g,c);else{if(!c){if(a.stateNode===null)throw Error(l(166));return Kt(a),null}n=Se.current,re(a)?Ut(a,n):(n=qd(g,c,r,n,!0),a.stateNode=n,pn(a))}return Kt(a),null}case 5:if(wt(a),g=a.type,n!==null&&a.stateNode!=null)Jo(n,a,g,c);else{if(!c){if(a.stateNode===null)throw Error(l(166));return Kt(a),null}if(p=Se.current,re(a))Ut(a,p),xp(a.stateNode,g,c,p)&&(a.flags|=64);else{var E=mm(g,c,_i.current,p,a);Il(a),Io(E,a,!1,!1),a.stateNode=E,bd(E,g,c,p)&&pn(a)}}return Kt(a),Wo(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,r),null;case 6:if(n&&a.stateNode!=null)r=n.memoizedProps,Ne?r!==c&&pn(a):Gn&&(r!==c?(n=_i.current,r=Se.current,Il(a),a.stateNode=Cd(c,n,r,a)):a.stateNode=n.stateNode);else{if(typeof c!="string"&&a.stateNode===null)throw Error(l(166));if(n=_i.current,r=Se.current,re(a)){if(!Ae)throw Error(l(176));if(n=a.stateNode,r=a.memoizedProps,c=null,g=Ee,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}dp(n,r,a,c)||zt(a,!0)}else Il(a),a.stateNode=Cd(c,n,r,a)}return Kt(a),null;case 31:if(r=a.memoizedState,n===null||n.memoizedState!==null){if(c=re(a),r!==null){if(n===null){if(!c)throw Error(l(318));if(!Ae)throw Error(l(556));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(557));gp(n,a)}else oe(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),n=!1}else r=Ce(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return a.flags&256?(Re(a),a):(Re(a),null);if((a.flags&128)!==0)throw Error(l(558))}return Kt(a),null;case 13:if(c=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=re(a),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(l(318));if(!Ae)throw Error(l(344));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(l(317));mp(g,a)}else oe(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),g=!1}else g=Ce(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Re(a),a):(Re(a),null)}return Re(a),(a.flags&128)!==0?(a.lanes=r,a):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=a.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==g&&(c.flags|=2048)),r!==n&&r&&(a.child.flags|=8192),Jl(a,a.updateQueue),Kt(a),null);case 4:return St(),Nf(n,a),n===null&&_m(a.stateNode.containerInfo),Kt(a),null;case 10:return Nt(a.type),Kt(a),null;case 19:if(_(ne),c=a.memoizedState,c===null)return Kt(a),null;if(g=(a.flags&128)!==0,p=c.rendering,p===null)if(g)zs(c,!1);else{if(Wt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=wa(n),p!==null){for(a.flags|=128,zs(c,!1),n=p.updateQueue,a.updateQueue=n,Jl(a,n),a.subtreeFlags=0,n=r,r=a.child;r!==null;)fd(r,n),r=r.sibling;return S(ne,ne.current&1|2),At&&K(a,c.treeForkCount),a.child}n=n.sibling}c.tail!==null&&Ue()>Fs&&(a.flags|=128,g=!0,zs(c,!1),a.lanes=4194304)}else{if(!g)if(n=wa(p),n!==null){if(a.flags|=128,g=!0,n=n.updateQueue,a.updateQueue=n,Jl(a,n),zs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!At)return Kt(a),null}else 2*Ue()-c.renderingStartTime>Fs&&r!==536870912&&(a.flags|=128,g=!0,zs(c,!1),a.lanes=4194304);c.isBackwards?(p.sibling=a.child,a.child=p):(n=c.last,n!==null?n.sibling=p:a.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ue(),n.sibling=null,r=ne.current,S(ne,g?r&1|2:r&1),At&&K(a,c.treeForkCount),n):(Kt(a),null);case 22:case 23:return Re(a),Ns(),c=a.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(r&536870912)!==0&&(a.flags&128)===0&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),r=a.updateQueue,r!==null&&Jl(a,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048),n!==null&&_(na),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Nt(Ft),Kt(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function Zg(n,a){switch(ut(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Nt(Ft),St(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return wt(a),null;case 31:if(a.memoizedState!==null){if(Re(a),a.alternate===null)throw Error(l(340));oe()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Re(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(l(340));oe()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return _(ne),null;case 4:return St(),null;case 10:return Nt(a.type),null;case 22:case 23:return Re(a),Ns(),n!==null&&_(na),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Nt(Ft),null;case 25:return null;default:return null}}function Mf(n,a){switch(ut(a),a.tag){case 3:Nt(Ft),St();break;case 26:case 27:case 5:wt(a);break;case 4:St();break;case 31:a.memoizedState!==null&&Re(a);break;case 13:Re(a);break;case 19:_(ne);break;case 10:Nt(a.type);break;case 22:case 23:Re(a),Ns(),n!==null&&_(na);break;case 24:Nt(Ft)}}function Ds(n,a){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&n)===n){c=void 0;var p=r.create,E=r.inst;c=p(),E.destroy=c}r=r.next}while(r!==g)}}catch(z){Dt(a,a.return,z)}}function gi(n,a,r){try{var c=a.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var p=g.next;c=p;do{if((c.tag&n)===n){var E=c.inst,z=E.destroy;if(z!==void 0){E.destroy=void 0,g=a;var Z=r,et=z;try{et()}catch(ot){Dt(g,Z,ot)}}}c=c.next}while(c!==p)}}catch(ot){Dt(a,a.return,ot)}}function Rf(n){var a=n.updateQueue;if(a!==null){var r=n.stateNode;try{Cs(a,r)}catch(c){Dt(n,n.return,c)}}}function wf(n,a,r){r.props=ji(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){Dt(n,a,c)}}function Os(n,a){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=Us(n.stateNode);break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(g){Dt(n,a,g)}}function Hn(n,a){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){Dt(n,a,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Dt(n,a,g)}else r.current=null}function zf(n){var a=n.type,r=n.memoizedProps,c=n.stateNode;try{Ym(c,a,r,n)}catch(g){Dt(n,n.return,g)}}function $o(n,a,r){try{Xm(n.stateNode,n.type,r,a,n)}catch(c){Dt(n,n.return,c)}}function Df(n){return n.tag===5||n.tag===3||(_n?n.tag===26:!1)||(he?n.tag===27&&La(n.type):!1)||n.tag===4}function tu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Df(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(he&&n.tag===27&&La(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function eu(n,a,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?qm(r,n,a):Um(r,n);else if(c!==4&&(he&&c===27&&La(n.type)&&(r=n.stateNode,a=null),n=n.child,n!==null))for(eu(n,a,r),n=n.sibling;n!==null;)eu(n,a,r),n=n.sibling}function Wl(n,a,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?Vm(r,n,a):Bm(r,n);else if(c!==4&&(he&&c===27&&La(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Wl(n,a,r),n=n.sibling;n!==null;)Wl(n,a,r),n=n.sibling}function Of(n,a,r){n=n.containerInfo;try{wd(n,r)}catch(c){Dt(a,a.return,c)}}function Hf(n){var a=n.stateNode,r=n.memoizedProps;try{Gp(n.type,r,a,n)}catch(c){Dt(n,n.return,c)}}function kg(n,a){for(dm(n.containerInfo),me=a;me!==null;)if(n=me,a=n.child,(n.subtreeFlags&1028)!==0&&a!==null)a.return=n,me=a;else for(;me!==null;){n=me;var r=n.alternate;switch(a=n.flags,n.tag){case 0:if((a&4)!==0&&(a=n.updateQueue,a=a!==null?a.events:null,a!==null))for(var c=0;c<a.length;c++){var g=a[c];g.ref.impl=g.nextImpl}break;case 11:case 15:break;case 1:if((a&1024)!==0&&r!==null){a=void 0,c=n,g=r.memoizedProps,r=r.memoizedState;var p=c.stateNode;try{var E=ji(c.type,g);a=p.getSnapshotBeforeUpdate(E,r),p.__reactInternalSnapshotBeforeUpdate=a}catch(z){Dt(c,c.return,z)}}break;case 3:(a&1024)!==0&&Ne&&Fm(n.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(l(163))}if(a=n.sibling,a!==null){a.return=n.return,me=a;break}me=n.return}}function Gf(n,a,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Fn(n,r),c&4&&Ds(5,r);break;case 1:if(Fn(n,r),c&4)if(n=r.stateNode,a===null)try{n.componentDidMount()}catch(E){Dt(r,r.return,E)}else{var g=ji(r.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(g,a,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Dt(r,r.return,E)}}c&64&&Rf(r),c&512&&Os(r,r.return);break;case 3:if(Fn(n,r),c&64&&(c=r.updateQueue,c!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=Us(r.child.stateNode);break;case 1:n=r.child.stateNode}try{Cs(c,n)}catch(E){Dt(r,r.return,E)}}break;case 27:he&&a===null&&c&4&&Hf(r);case 26:case 5:if(Fn(n,r),a===null){if(c&4)zf(r);else if(c&64){n=r.type,a=r.memoizedProps,g=r.stateNode;try{vp(g,n,a,r)}catch(E){Dt(r,r.return,E)}}}c&512&&Os(r,r.return);break;case 12:Fn(n,r);break;case 31:Fn(n,r),c&4&&Uf(n,r);break;case 13:Fn(n,r),c&4&&Lf(n,r),c&64&&(c=r.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(r=tm.bind(null,r),$m(c,r))));break;case 22:if(c=r.memoizedState!==null||ni,!c){a=a!==null&&a.memoizedState!==null||se,g=ni;var p=se;ni=c,(se=a)&&!p?In(n,r,(r.subtreeFlags&8772)!==0):Fn(n,r),ni=g,se=p}break;case 30:break;default:Fn(n,r)}}function Bf(n){var a=n.alternate;a!==null&&(n.alternate=null,Bf(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&xm(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yn(n,a,r){for(r=r.child;r!==null;)nu(n,a,r),r=r.sibling}function nu(n,a,r){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Xs,r)}catch{}switch(r.tag){case 26:if(_n){se||Hn(r,a),yn(n,a,r),r.memoizedState?Ld(r.memoizedState):r.stateNode&&Xd(r.stateNode);break}case 27:if(he){se||Hn(r,a);var c=le,g=Le;La(r.type)&&(le=r.stateNode,Le=!1),yn(n,a,r),Pd(r.stateNode),le=c,Le=g;break}case 5:se||Hn(r,a);case 6:if(Ne){if(c=le,g=Le,le=null,yn(n,a,r),le=c,Le=g,le!==null)if(Le)try{Km(le,r.stateNode)}catch(p){Dt(r,a,p)}else try{Pm(le,r.stateNode)}catch(p){Dt(r,a,p)}}else yn(n,a,r);break;case 18:Ne&&le!==null&&(Le?Tp(le,r.stateNode):Cp(le,r.stateNode));break;case 4:Ne?(c=le,g=Le,le=r.stateNode.containerInfo,Le=!0,yn(n,a,r),le=c,Le=g):(Gn&&Of(r.stateNode,r,Md()),yn(n,a,r));break;case 0:case 11:case 14:case 15:gi(2,r,a),se||gi(4,r,a),yn(n,a,r);break;case 1:se||(Hn(r,a),c=r.stateNode,typeof c.componentWillUnmount=="function"&&wf(r,a,c)),yn(n,a,r);break;case 21:yn(n,a,r);break;case 22:se=(c=se)||r.memoizedState!==null,yn(n,a,r),se=c;break;default:yn(n,a,r)}}function Uf(n,a){if(Ae&&a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Sp(n)}catch(r){Dt(a,a.return,r)}}}function Lf(n,a){if(Ae&&a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ep(n)}catch(r){Dt(a,a.return,r)}}function jg(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new $d),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new $d),a;default:throw Error(l(435,n.tag))}}function $l(n,a){var r=jg(n);a.forEach(function(c){if(!r.has(c)){r.add(c);var g=em.bind(null,n,c);c.then(g,g)}})}function Te(n,a){var r=a.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],p=n,E=a;if(Ne){var z=E;t:for(;z!==null;){switch(z.tag){case 27:if(he){if(La(z.type)){le=z.stateNode,Le=!1;break t}break}case 5:le=z.stateNode,Le=!1;break t;case 3:case 4:le=z.stateNode.containerInfo,Le=!0;break t}z=z.return}if(le===null)throw Error(l(160));nu(p,E,g),le=null,Le=!1}else nu(p,E,g);p=g.alternate,p!==null&&(p.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Yf(a,n),a=a.sibling}function Yf(n,a){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Te(a,n),ze(n),c&4&&(gi(3,n,n.return),Ds(3,n),gi(5,n,n.return));break;case 1:Te(a,n),ze(n),c&512&&(se||r===null||Hn(r,r.return)),c&64&&ni&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:if(_n){var g=Sn;if(Te(a,n),ze(n),c&512&&(se||r===null||Hn(r,r.return)),c&4){c=r!==null?r.memoizedState:null;var p=n.memoizedState;r===null?p===null?n.stateNode===null?n.stateNode=wp(g,n.type,n.memoizedProps,n):Yd(g,n.type,n.stateNode):n.stateNode=Ud(g,p,n.memoizedProps):c!==p?(c===null?r.stateNode!==null&&Xd(r.stateNode):Ld(c),p===null?Yd(g,n.type,n.stateNode):Ud(g,p,n.memoizedProps)):p===null&&n.stateNode!==null&&$o(n,n.memoizedProps,r.memoizedProps)}break}case 27:if(he){Te(a,n),ze(n),c&512&&(se||r===null||Hn(r,r.return)),r!==null&&c&4&&$o(n,n.memoizedProps,r.memoizedProps);break}case 5:if(Te(a,n),ze(n),c&512&&(se||r===null||Hn(r,r.return)),Ne){if(n.flags&32){g=n.stateNode;try{Ad(g)}catch(it){Dt(n,n.return,it)}}c&4&&n.stateNode!=null&&(g=n.memoizedProps,$o(n,g,r!==null?r.memoizedProps:g)),c&1024&&(Ku=!0)}else Gn&&n.alternate!==null&&(n.alternate.stateNode=n.stateNode);break;case 6:if(Te(a,n),ze(n),c&4&&Ne){if(n.stateNode===null)throw Error(l(162));c=n.memoizedProps,r=r!==null?r.memoizedProps:c,g=n.stateNode;try{Lm(g,r,c)}catch(it){Dt(n,n.return,it)}}break;case 3:if(_n?(Dp(),g=Sn,Sn=Au(a.containerInfo),Te(a,n),Sn=g):Te(a,n),ze(n),c&4){if(Ne&&Ae&&r!==null&&r.memoizedState.isDehydrated)try{_p(a.containerInfo)}catch(it){Dt(n,n.return,it)}if(Gn){c=a.containerInfo,r=a.pendingChildren;try{wd(c,r)}catch(it){Dt(n,n.return,it)}}}Ku&&(Ku=!1,Xf(n));break;case 4:_n?(r=Sn,Sn=Au(n.stateNode.containerInfo),Te(a,n),ze(n),Sn=r):(Te(a,n),ze(n)),c&4&&Gn&&Of(n.stateNode,n,n.stateNode.pendingChildren);break;case 12:Te(a,n),ze(n);break;case 31:Te(a,n),ze(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$l(n,c)));break;case 13:Te(a,n),ze(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Nr=Ue()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$l(n,c)));break;case 22:g=n.memoizedState!==null;var E=r!==null&&r.memoizedState!==null,z=ni,Z=se;if(ni=z||g,se=Z||E,Te(a,n),se=Z,ni=z,ze(n),c&8192&&(a=n.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(r===null||E||ni||se||Fi(n)),Ne)){t:if(r=null,Ne)for(a=n;;){if(a.tag===5||_n&&a.tag===26){if(r===null){E=r=a;try{p=E.stateNode,g?Qm(p):km(E.stateNode,E.memoizedProps)}catch(it){Dt(E,E.return,it)}}}else if(a.tag===6){if(r===null){E=a;try{var et=E.stateNode;g?Zm(et):jm(et,E.memoizedProps)}catch(it){Dt(E,E.return,it)}}}else if(a.tag===18){if(r===null){E=a;try{var ot=E.stateNode;g?Np(ot):Ap(E.stateNode)}catch(it){Dt(E,E.return,it)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break t;for(;a.sibling===null;){if(a.return===null||a.return===n)break t;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,$l(n,r))));break;case 19:Te(a,n),ze(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$l(n,c)));break;case 30:break;case 21:break;default:Te(a,n),ze(n)}}function ze(n){var a=n.flags;if(a&2){try{for(var r,c=n.return;c!==null;){if(Df(c)){r=c;break}c=c.return}if(Ne){if(r==null)throw Error(l(160));switch(r.tag){case 27:if(he){var g=r.stateNode,p=tu(n);Wl(n,p,g);break}case 5:var E=r.stateNode;r.flags&32&&(Ad(E),r.flags&=-33);var z=tu(n);Wl(n,z,E);break;case 3:case 4:var Z=r.stateNode.containerInfo,et=tu(n);eu(n,et,Z);break;default:throw Error(l(161))}}}catch(ot){Dt(n,n.return,ot)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Xf(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Xf(a),a.tag===5&&a.flags&1024&&Am(a.stateNode),n=n.sibling}}function Fn(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Gf(n,a.alternate,a),a=a.sibling}function Fi(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:gi(4,a,a.return),Fi(a);break;case 1:Hn(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&wf(a,a.return,r),Fi(a);break;case 27:he&&Pd(a.stateNode);case 26:case 5:Hn(a,a.return),Fi(a);break;case 22:a.memoizedState===null&&Fi(a);break;case 30:Fi(a);break;default:Fi(a)}n=n.sibling}}function In(n,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,g=n,p=a,E=p.flags;switch(p.tag){case 0:case 11:case 15:In(g,p,r),Ds(4,p);break;case 1:if(In(g,p,r),c=p,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(et){Dt(c,c.return,et)}if(c=p,g=c.updateQueue,g!==null){var z=c.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)Ul(Z[g],z)}catch(et){Dt(c,c.return,et)}}r&&E&64&&Rf(p),Os(p,p.return);break;case 27:he&&Hf(p);case 26:case 5:In(g,p,r),r&&c===null&&E&4&&zf(p),Os(p,p.return);break;case 12:In(g,p,r);break;case 31:In(g,p,r),r&&E&4&&Uf(g,p);break;case 13:In(g,p,r),r&&E&4&&Lf(g,p);break;case 22:p.memoizedState===null&&In(g,p,r),Os(p,p.return);break;case 30:break;default:In(g,p,r)}a=a.sibling}}function iu(n,a){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&qe(r))}function au(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&qe(n))}function vn(n,a,r,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vf(n,a,r,c),a=a.sibling}function Vf(n,a,r,c){var g=a.flags;switch(a.tag){case 0:case 11:case 15:vn(n,a,r,c),g&2048&&Ds(9,a);break;case 1:vn(n,a,r,c);break;case 3:vn(n,a,r,c),g&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&qe(n)));break;case 12:if(g&2048){vn(n,a,r,c),n=a.stateNode;try{var p=a.memoizedProps,E=p.id,z=p.onPostCommit;typeof z=="function"&&z(E,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Z){Dt(a,a.return,Z)}}else vn(n,a,r,c);break;case 31:vn(n,a,r,c);break;case 13:vn(n,a,r,c);break;case 23:break;case 22:p=a.stateNode,E=a.alternate,a.memoizedState!==null?p._visibility&2?vn(n,a,r,c):Hs(n,a):p._visibility&2?vn(n,a,r,c):(p._visibility|=2,Da(n,a,r,c,(a.subtreeFlags&10256)!==0||!1)),g&2048&&iu(E,a);break;case 24:vn(n,a,r,c),g&2048&&au(a.alternate,a);break;default:vn(n,a,r,c)}}function Da(n,a,r,c,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,E=a,z=r,Z=c,et=E.flags;switch(E.tag){case 0:case 11:case 15:Da(p,E,z,Z,g),Ds(8,E);break;case 23:break;case 22:var ot=E.stateNode;E.memoizedState!==null?ot._visibility&2?Da(p,E,z,Z,g):Hs(p,E):(ot._visibility|=2,Da(p,E,z,Z,g)),g&&et&2048&&iu(E.alternate,E);break;case 24:Da(p,E,z,Z,g),g&&et&2048&&au(E.alternate,E);break;default:Da(p,E,z,Z,g)}a=a.sibling}}function Hs(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=n,c=a,g=c.flags;switch(c.tag){case 22:Hs(r,c),g&2048&&iu(c.alternate,c);break;case 24:Hs(r,c),g&2048&&au(c.alternate,c);break;default:Hs(r,c)}a=a.sibling}}function Ii(n,a,r){if(n.subtreeFlags&Wa)for(n=n.child;n!==null;)qf(n,a,r),n=n.sibling}function qf(n,a,r){switch(n.tag){case 26:if(Ii(n,a,r),n.flags&Wa)if(n.memoizedState!==null)Hp(r,Sn,n.memoizedState,n.memoizedProps);else{var c=n.stateNode,g=n.type;n=n.memoizedProps,((a&335544128)===a||Cu(g,n))&&Nd(r,c,g,n)}break;case 5:Ii(n,a,r),n.flags&Wa&&(c=n.stateNode,g=n.type,n=n.memoizedProps,((a&335544128)===a||Cu(g,n))&&Nd(r,c,g,n));break;case 3:case 4:_n?(c=Sn,Sn=Au(n.stateNode.containerInfo),Ii(n,a,r),Sn=c):Ii(n,a,r);break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Wa,Wa=16777216,Ii(n,a,r),Wa=c):Ii(n,a,r));break;default:Ii(n,a,r)}}function Pf(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Gs(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];me=c,Qf(c,n)}Pf(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kf(n),n=n.sibling}function Kf(n){switch(n.tag){case 0:case 11:case 15:Gs(n),n.flags&2048&&gi(9,n,n.return);break;case 3:Gs(n);break;case 12:Gs(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,tr(n)):Gs(n);break;default:Gs(n)}}function tr(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];me=c,Qf(c,n)}Pf(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:gi(8,a,a.return),tr(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,tr(a));break;default:tr(a)}n=n.sibling}}function Qf(n,a){for(;me!==null;){var r=me;switch(r.tag){case 0:case 11:case 15:gi(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:qe(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,me=c;else t:for(r=n;me!==null;){c=me;var g=c.sibling,p=c.return;if(Bf(c),c===r){me=null;break t}if(g!==null){g.return=p,me=g;break t}me=p}}}function su(n){var a=vm(n);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(l(364));return a}if(n=wm(n),n===null)throw Error(l(362));return n.stateNode.current}function lu(n,a){var r=n.tag;switch(a.$$typeof){case Er:if(n.type===a.value)return!0;break;case xr:t:{for(a=a.value,n=[n,0],r=0;r<n.length;){var c=n[r++],g=c.tag,p=n[r++],E=a[p];if(g!==5&&g!==26&&g!==27||!Ys(c)){for(;E!=null&&lu(c,E);)p++,E=a[p];if(p===a.length){a=!0;break t}else for(c=c.child;c!==null;)n.push(c,p),c=c.sibling}}a=!1}return a;case br:if((r===5||r===26||r===27)&&Om(n.stateNode,a.value))return!0;break;case Tr:if((r===5||r===6||r===26||r===27)&&(n=Dm(n),n!==null&&0<=n.indexOf(a.value)))return!0;break;case Cr:if((r===5||r===26||r===27)&&(n=n.memoizedProps["data-testname"],typeof n=="string"&&n.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function ru(n){switch(n.$$typeof){case Er:return"<"+(y(n.value)||"Unknown")+">";case xr:return":has("+(ru(n)||"")+")";case br:return'[role="'+n.value+'"]';case Tr:return'"'+n.value+'"';case Cr:return'[data-testname="'+n.value+'"]';default:throw Error(l(365))}}function Zf(n,a){var r=[];n=[n,0];for(var c=0;c<n.length;){var g=n[c++],p=g.tag,E=n[c++],z=a[E];if(p!==5&&p!==26&&p!==27||!Ys(g)){for(;z!=null&&lu(g,z);)E++,z=a[E];if(E===a.length)r.push(g);else for(g=g.child;g!==null;)n.push(g,E),g=g.sibling}}return r}function ou(n,a){if(!Ls)throw Error(l(363));n=su(n),n=Zf(n,a),a=[],n=Array.from(n);for(var r=0;r<n.length;){var c=n[r++],g=c.tag;if(g===5||g===26||g===27)Ys(c)||a.push(c.stateNode);else for(c=c.child;c!==null;)n.push(c),c=c.sibling}return a}function Ke(){return(bt&2)!==0&&Tt!==0?Tt&-Tt:mt.T!==null?gn():Sm()}function kf(){if(Je===0)if((Tt&536870912)===0||At){var n=or;or<<=1,(or&3932160)===0&&(or=262144),Je=n}else Je=536870912;return n=Fe.current,n!==null&&(n.flags|=32),Je}function Be(n,a,r){(n===Yt&&(Bt===2||Bt===9)||n.cancelPendingCommit!==null)&&(Oa(n,0),mi(n,Tt,Je,!1)),H(n,r),((bt&2)===0||n!==Yt)&&(n===Yt&&((bt&2)===0&&(la|=r),Wt===4&&mi(n,Tt,Je,!1)),ve(n))}function jf(n,a,r){if((bt&6)!==0)throw Error(l(327));var c=!r&&(a&127)===0&&(a&n.expiredLanes)===0||A(n,a),g=c?Jg(n,a):cu(n,a,!0),p=c;do{if(g===0){$a&&!c&&mi(n,a,0,!1);break}else{if(r=n.current.alternate,p&&!Fg(r)){g=cu(n,a,!1),p=!1;continue}if(g===2){if(p=a,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var z=n;g=js;var Z=Ae&&z.current.memoizedState.isDehydrated;if(Z&&(Oa(z,E).flags|=256),E=cu(z,E,!1),E!==2){if(Qu&&!Z){z.errorRecoveryDisabledLanes|=p,la|=p,g=4;break t}p=Ye,Ye=g,p!==null&&(Ye===null?Ye=p:Ye.push.apply(Ye,p))}g=E}if(p=!1,g!==2)continue}}if(g===1){Oa(n,0),mi(n,a,0,!0);break}t:{switch(c=n,p=g,p){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:mi(c,a,Je,!xi);break t;case 2:Ye=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(g=Nr+300-Ue(),10<g)){if(mi(c,a,Je,!xi),x(c,0,!0)!==0)break t;ai=a,c.timeoutHandle=pm(Ff.bind(null,c,r,Ye,Ar,ku,a,Je,la,ts,xi,p,"Throttled",-0,0),g);break t}Ff(c,r,Ye,Ar,ku,a,Je,la,ts,xi,p,null,-0,0)}}break}while(!0);ve(n)}function Ff(n,a,r,c,g,p,E,z,Z,et,ot,it,ht,vt){if(n.timeoutHandle=Wi,it=a.subtreeFlags,it&8192||(it&16785408)===16785408){it=Tm(),qf(a,p,it);var xe=(p&62914560)===p?Nr-Ue():(p&4194048)===p?t0-Ue():0;if(xe=Nm(it,xe),xe!==null){ai=p,n.cancelPendingCommit=xe(ad.bind(null,n,a,p,r,c,g,E,z,Z,ot,it,null,ht,vt)),mi(n,p,E,!et);return}}ad(n,a,p,r,c,g,E,z,Z)}function Fg(n){for(var a=n;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],p=g.getSnapshot;g=g.value;try{if(!je(p(),g))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mi(n,a,r,c){a&=~Zu,a&=~la,n.suspendedLanes|=a,n.pingedLanes&=~a,c&&(n.warmLanes|=a),c=n.expirationTimes;for(var g=a;0<g;){var p=31-Ze(g),E=1<<p;c[p]=-1,g&=~E}r!==0&&q(n,r,a)}function If(){return(bt&6)===0?(nn(0),!1):!0}function uu(){if(Ct!==null){if(Bt===0)var n=Ct.return;else n=Ct,ti=ta=null,wo(n),ka=null,Ks=0,n=Ct;for(;n!==null;)Mf(n.alternate,n),n=n.return;Ct=null}}function Oa(n,a){var r=n.timeoutHandle;r!==Wi&&(n.timeoutHandle=Wi,ym(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),ai=0,uu(),Yt=n,Ct=r=Jn(n.current,null),Tt=a,Bt=0,Ie=null,xi=!1,$a=A(n,a),Qu=!1,ts=Je=Zu=la=bi=Wt=0,Ye=js=null,ku=!1,(a&8)!==0&&(a|=a&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=a;0<c;){var g=31-Ze(c),p=1<<g;a|=n[g],c&=~p}return ii=a,Na(),r}function Jf(n,a){_t=null,mt.H=Zs,a===Za||a===pr?(a=Ol(),Bt=3):a===Uu?(a=Ol(),Bt=4):Bt=a===qu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ie=a,Ct===null&&(Wt=1,Zl(n,D(a,n.current)))}function Wf(){var n=Fe.current;return n===null?!0:(Tt&4194048)===Tt?un===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?n===un:!1}function $f(){var n=mt.H;return mt.H=Zs,n===null?Zs:n}function td(){var n=mt.A;return mt.A=Fp,n}function er(){Wt=4,xi||(Tt&4194048)!==Tt&&Fe.current!==null||($a=!0),(bi&134217727)===0&&(la&134217727)===0||Yt===null||mi(Yt,Tt,Je,!1)}function cu(n,a,r){var c=bt;bt|=2;var g=$f(),p=td();(Yt!==n||Tt!==a)&&(Ar=null,Oa(n,a)),a=!1;var E=Wt;t:do try{if(Bt!==0&&Ct!==null){var z=Ct,Z=Ie;switch(Bt){case 8:uu(),E=6;break t;case 3:case 2:case 9:case 6:Fe.current===null&&(a=!0);var et=Bt;if(Bt=0,Ie=null,Ha(n,z,Z,et),r&&$a){E=0;break t}break;default:et=Bt,Bt=0,Ie=null,Ha(n,z,Z,et)}}Ig(),E=Wt;break}catch(ot){Jf(n,ot)}while(!0);return a&&n.shellSuspendCounter++,ti=ta=null,bt=c,mt.H=g,mt.A=p,Ct===null&&(Yt=null,Tt=0,Na()),E}function Ig(){for(;Ct!==null;)ed(Ct)}function Jg(n,a){var r=bt;bt|=2;var c=$f(),g=td();Yt!==n||Tt!==a?(Ar=null,Fs=Ue()+500,Oa(n,a)):$a=A(n,a);t:do try{if(Bt!==0&&Ct!==null){a=Ct;var p=Ie;e:switch(Bt){case 1:Bt=0,Ie=null,Ha(n,a,p,1);break;case 2:case 9:if(zl(p)){Bt=0,Ie=null,nd(a);break}a=function(){Bt!==2&&Bt!==9||Yt!==n||(Bt=7),ve(n)},p.then(a,a);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:zl(p)?(Bt=0,Ie=null,nd(a)):(Bt=0,Ie=null,Ha(n,a,p,7));break;case 5:var E=null;switch(Ct.tag){case 26:E=Ct.memoizedState;case 5:case 27:var z=Ct,Z=z.type,et=z.pendingProps;if(E?Vd(E):Td(z.stateNode,Z,et)){Bt=0,Ie=null;var ot=z.sibling;if(ot!==null)Ct=ot;else{var it=z.return;it!==null?(Ct=it,nr(it)):Ct=null}break e}}Bt=0,Ie=null,Ha(n,a,p,5);break;case 6:Bt=0,Ie=null,Ha(n,a,p,6);break;case 8:uu(),Wt=6;break t;default:throw Error(l(462))}}Wg();break}catch(ht){Jf(n,ht)}while(!0);return ti=ta=null,mt.H=c,mt.A=g,bt=r,Ct!==null?0:(Yt=null,Tt=0,Na(),Wt)}function Wg(){for(;Ct!==null&&!Lp();)ed(Ct)}function ed(n){var a=bf(n.alternate,n,ii);n.memoizedProps=n.pendingProps,a===null?nr(n):Ct=a}function nd(n){var a=n,r=a.alternate;switch(a.tag){case 15:case 0:a=yf(r,a,a.pendingProps,a.type,void 0,Tt);break;case 11:a=yf(r,a,a.pendingProps,a.type.render,a.ref,Tt);break;case 5:wo(a);default:Mf(r,a),a=Ct=fd(a,ii),a=bf(r,a,ii)}n.memoizedProps=n.pendingProps,a===null?nr(n):Ct=a}function Ha(n,a,r,c){ti=ta=null,wo(a),ka=null,Ks=0;var g=a.return;try{if(qg(n,g,a,r,Tt)){Wt=1,Zl(n,D(r,n.current)),Ct=null;return}}catch(p){if(g!==null)throw Ct=g,p;Wt=1,Zl(n,D(r,n.current)),Ct=null;return}a.flags&32768?(At||c===1?n=!0:$a||(Tt&536870912)!==0?n=!1:(xi=n=!0,(c===2||c===9||c===3||c===6)&&(c=Fe.current,c!==null&&c.tag===13&&(c.flags|=16384))),id(a,n)):nr(a)}function nr(n){var a=n;do{if((a.flags&32768)!==0){id(a,xi);return}n=a.return;var r=Qg(a.alternate,a,ii);if(r!==null){Ct=r;return}if(a=a.sibling,a!==null){Ct=a;return}Ct=a=n}while(a!==null);Wt===0&&(Wt=5)}function id(n,a){do{var r=Zg(n.alternate,n);if(r!==null){r.flags&=32767,Ct=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(n=n.sibling,n!==null)){Ct=n;return}Ct=n=r}while(n!==null);Wt=6,Ct=null}function ad(n,a,r,c,g,p,E,z,Z){n.cancelPendingCommit=null;do Bs();while(fe!==0);if((bt&6)!==0)throw Error(l(327));if(a!==null){if(a===n.current)throw Error(l(177));if(p=a.lanes|a.childLanes,p|=Lu,X(n,r,p,E,z,Z),n===Yt&&(Ct=Yt=null,Tt=0),es=a,Ti=n,ai=r,ju=p,Fu=g,e0=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,nm(wu,function(){return ud(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=mt.T,mt.T=null,g=$n(),ge(2),E=bt,bt|=4;try{kg(n,a,r)}finally{bt=E,ge(g),mt.T=c}}fe=1,sd(),ld(),rd()}}function sd(){if(fe===1){fe=0;var n=Ti,a=es,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=mt.T,mt.T=null;var c=$n();ge(2);var g=bt;bt|=4;try{Yf(a,n),gm(n.containerInfo)}finally{bt=g,ge(c),mt.T=r}}n.current=a,fe=2}}function ld(){if(fe===2){fe=0;var n=Ti,a=es,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=mt.T,mt.T=null;var c=$n();ge(2);var g=bt;bt|=4;try{Gf(n,a.alternate,a)}finally{bt=g,ge(c),mt.T=r}}fe=3}}function rd(){if(fe===4||fe===3){fe=0,Yp();var n=Ti,a=es,r=ai,c=e0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?fe=5:(fe=0,es=Ti=null,od(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ci=null),j(r),a=a.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Xs,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=mt.T,g=$n(),ge(2),mt.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var z=c[E];p(z.value,{componentStack:z.stack})}}finally{mt.T=a,ge(g)}}(ai&3)!==0&&Bs(),ve(n),g=n.pendingLanes,(r&261930)!==0&&(g&42)!==0?n===Iu?Is++:(Is=0,Iu=n):Is=0,Ae&&bp(),nn(0)}}function od(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,qe(a)))}function Bs(){return sd(),ld(),rd(),ud()}function ud(){if(fe!==5)return!1;var n=Ti,a=ju;ju=0;var r=j(ai),c=32>r?32:r;r=mt.T;var g=$n();try{ge(c),mt.T=null,c=Fu,Fu=null;var p=Ti,E=ai;if(fe=0,es=Ti=null,ai=0,(bt&6)!==0)throw Error(l(331));var z=bt;if(bt|=4,Kf(p.current),Vf(p,p.current,E,c),bt=z,nn(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Xs,p)}catch{}return!0}finally{ge(g),mt.T=r,od(n,a)}}function cd(n,a,r){a=D(r,a),a=qo(n.stateNode,a,2),n=Dn(n,a,2),n!==null&&(H(n,2),ve(n))}function Dt(n,a,r){if(n.tag===3)cd(n,n,r);else for(;a!==null;){if(a.tag===3){cd(a,n,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ci===null||!Ci.has(c))){n=D(r,n),r=uf(2),c=Dn(a,r,2),c!==null&&(cf(r,c,a,n),H(c,2),ve(c));break}}a=a.return}}function hu(n,a,r){var c=n.pingCache;if(c===null){c=n.pingCache=new Ip;var g=new Set;c.set(a,g)}else g=c.get(a),g===void 0&&(g=new Set,c.set(a,g));g.has(r)||(Qu=!0,g.add(r),n=$g.bind(null,n,a,r),a.then(n,n))}function $g(n,a,r){var c=n.pingCache;c!==null&&c.delete(a),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Yt===n&&(Tt&r)===r&&(Wt===4||Wt===3&&(Tt&62914560)===Tt&&300>Ue()-Nr?(bt&2)===0&&Oa(n,0):Zu|=r,ts===Tt&&(ts=0)),ve(n)}function hd(n,a){a===0&&(a=M()),n=Zn(n,a),n!==null&&(H(n,a),ve(n))}function tm(n){var a=n.memoizedState,r=0;a!==null&&(r=a.retryLane),hd(n,r)}function em(n,a){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,g=n.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(a),hd(n,r)}function nm(n,a){return cr(n,a)}function im(n,a,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jn(n,a){var r=n.alternate;return r===null?(r=i(n.tag,a,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=a,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,a=n.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function fd(n,a){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,a=r.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function ir(n,a,r,c,g,p){var E=0;if(c=n,typeof n=="function")fu(n)&&(E=1);else if(typeof n=="string")E=_n&&he?Gd(n,r,Se.current)?26:Kd(n)?27:5:_n?Gd(n,r,Se.current)?26:5:he&&Kd(n)?27:5;else t:switch(n){case xu:return n=i(31,r,a,g),n.elementType=xu,n.lanes=p,n;case Ba:return Ji(r.children,g,p,a);case _d:E=8,g|=24;break;case yu:return n=i(12,r,a,g|2),n.elementType=yu,n.lanes=p,n;case _u:return n=i(13,r,a,g),n.elementType=_u,n.lanes=p,n;case Su:return n=i(19,r,a,g),n.elementType=Su,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pi:E=10;break t;case Sd:E=9;break t;case vu:E=11;break t;case Eu:E=14;break t;case yi:E=16,c=null;break t}E=29,r=Error(l(130,n===null?"null":typeof n,"")),c=null}return a=i(E,r,a,g),a.elementType=n,a.type=c,a.lanes=p,a}function Ji(n,a,r,c){return n=i(7,n,c,a),n.lanes=r,n}function du(n,a,r){return n=i(6,n,null,a),n.lanes=r,n}function dd(n){var a=i(18,null,null,0);return a.stateNode=n,a}function gu(n,a,r){return a=i(4,n.children!==null?n.children:[],n.key,a),a.lanes=r,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function am(n,a,r,c,g,p,E,z,Z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Wi,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=G(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G(0),this.hiddenUpdates=G(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function gd(n,a,r,c,g,p,E,z,Z,et,ot,it){return n=new am(n,a,r,E,Z,et,ot,it,z),a=1,p===!0&&(a|=24),p=i(3,null,null,a),n.current=p,p.stateNode=n,a=fn(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:c,isDehydrated:r,cache:a},Ra(p),n}function md(n){return n?(n=Xa,n):Xa}function pd(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(l(188)):(n=Object.keys(n).join(","),Error(l(268,n)));return n=h(a),n=n!==null?f(n):null,n===null?null:Us(n.stateNode)}function yd(n,a,r,c,g,p){g=md(g),c.context===null?c.context=g:c.pendingContext=g,c=zn(a),c.payload={element:r},p=p===void 0?null:p,p!==null&&(c.callback=p),r=Dn(n,c,a),r!==null&&(Be(r,n,a),Ki(r,n,a))}function vd(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<a?r:a}}function mu(n,a){vd(n,a),(n=n.alternate)&&vd(n,a)}var xt={},sm=mo(),Qe=z1(),pu=Object.assign,lm=Symbol.for("react.element"),ar=Symbol.for("react.transitional.element"),Ga=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),_d=Symbol.for("react.strict_mode"),yu=Symbol.for("react.profiler"),Sd=Symbol.for("react.consumer"),pi=Symbol.for("react.context"),vu=Symbol.for("react.forward_ref"),_u=Symbol.for("react.suspense"),Su=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),xu=Symbol.for("react.activity"),rm=Symbol.for("react.memo_cache_sentinel"),Ed=Symbol.iterator,om=Symbol.for("react.client.reference"),sr=Array.isArray,mt=sm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,um=t.rendererVersion,cm=t.rendererPackageName,xd=t.extraDevToolsConfig,Us=t.getPublicInstance,hm=t.getRootHostContext,fm=t.getChildHostContext,dm=t.prepareForCommit,gm=t.resetAfterCommit,mm=t.createInstance;t.cloneMutableInstance;var bu=t.appendInitialChild,bd=t.finalizeInitialChildren,lr=t.shouldSetTextContent,Cd=t.createTextInstance;t.cloneMutableTextInstance;var pm=t.scheduleTimeout,ym=t.cancelTimeout,Wi=t.noTimeout,Wn=t.isPrimaryRenderer;t.warnsIfNotActing;var Ne=t.supportsMutation,Gn=t.supportsPersistence,Ae=t.supportsHydration,vm=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var _m=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ge=t.setCurrentUpdatePriority,$n=t.getCurrentUpdatePriority,Sm=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Em=t.shouldAttemptEagerTransition,xm=t.detachDeletedInstance;t.requestPostPaintCallback;var bm=t.maySuspendCommit,Cm=t.maySuspendCommitOnUpdate,Cu=t.maySuspendCommitInSyncRender,Td=t.preloadInstance,Tm=t.startSuspendingCommit,Nd=t.suspendInstance;t.suspendOnActiveViewTransition;var Nm=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Ua=t.NotPendingTransition,$i=t.HostTransitionContext,Am=t.resetFormInstance;t.bindToConsole;var Mm=t.supportsMicrotasks,Rm=t.scheduleMicrotask,Ls=t.supportsTestSelectors,wm=t.findFiberRoot,zm=t.getBoundingRect,Dm=t.getTextContent,Ys=t.isHiddenSubtree,Om=t.matchAccessibilityRole,Hm=t.setFocusIfFocusable,Gm=t.setupIntersectionObserver,Bm=t.appendChild,Um=t.appendChildToContainer,Lm=t.commitTextUpdate,Ym=t.commitMount,Xm=t.commitUpdate,Vm=t.insertBefore,qm=t.insertInContainerBefore,Pm=t.removeChild,Km=t.removeChildFromContainer,Ad=t.resetTextContent,Qm=t.hideInstance,Zm=t.hideTextInstance,km=t.unhideInstance,jm=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Fm=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var Im=t.cloneInstance,Md=t.createContainerChildSet,Rd=t.appendChildToContainerChildSet,Jm=t.finalizeContainerChildren,wd=t.replaceContainerChildren,zd=t.cloneHiddenInstance,Dd=t.cloneHiddenTextInstance,Tu=t.isSuspenseInstancePending,Nu=t.isSuspenseInstanceFallback,Wm=t.getSuspenseInstanceFallbackErrorDetails,$m=t.registerSuspenseInstanceRetry,tp=t.canHydrateFormStateMarker,ep=t.isFormStateMarkerMatching,Od=t.getNextHydratableSibling,np=t.getNextHydratableSiblingAfterSingleton,ip=t.getFirstHydratableChild,ap=t.getFirstHydratableChildWithinContainer,sp=t.getFirstHydratableChildWithinActivityInstance,lp=t.getFirstHydratableChildWithinSuspenseInstance,rp=t.getFirstHydratableChildWithinSingleton,op=t.canHydrateInstance,up=t.canHydrateTextInstance,cp=t.canHydrateActivityInstance,hp=t.canHydrateSuspenseInstance,fp=t.hydrateInstance,dp=t.hydrateTextInstance,gp=t.hydrateActivityInstance,mp=t.hydrateSuspenseInstance,pp=t.getNextHydratableInstanceAfterActivityInstance,yp=t.getNextHydratableInstanceAfterSuspenseInstance,vp=t.commitHydratedInstance,_p=t.commitHydratedContainer,Sp=t.commitHydratedActivityInstance,Ep=t.commitHydratedSuspenseInstance,xp=t.finalizeHydratedChildren,bp=t.flushHydrationEvents;t.clearActivityBoundary;var Cp=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var Tp=t.clearSuspenseBoundaryFromContainer,Np=t.hideDehydratedBoundary,Ap=t.unhideDehydratedBoundary,Hd=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Mp=t.validateHydratableInstance,Rp=t.validateHydratableTextInstance,_n=t.supportsResources,Gd=t.isHostHoistableType,Au=t.getHoistableRoot,Bd=t.getResource,Ud=t.acquireResource,Ld=t.releaseResource,wp=t.hydrateHoistable,Yd=t.mountHoistable,Xd=t.unmountHoistable,zp=t.createHoistableInstance,Dp=t.prepareToCommitHoistables,Op=t.mayResourceSuspendCommit,Vd=t.preloadResource,Hp=t.suspendResource,he=t.supportsSingletons,qd=t.resolveSingletonInstance,Gp=t.acquireSingletonInstance,Pd=t.releaseSingletonInstance,Kd=t.isHostSingletonType,La=t.isSingletonScope,Mu=[],Ya=-1,Xa={},Ze=Math.clz32?Math.clz32:b,Bp=Math.log,Up=Math.LN2,rr=256,or=262144,ur=4194304,cr=Qe.unstable_scheduleCallback,Ru=Qe.unstable_cancelCallback,Lp=Qe.unstable_shouldYield,Yp=Qe.unstable_requestPaint,Ue=Qe.unstable_now,Qd=Qe.unstable_ImmediatePriority,Xp=Qe.unstable_UserBlockingPriority,wu=Qe.unstable_NormalPriority,Vp=Qe.unstable_IdlePriority,qp=Qe.log,Pp=Qe.unstable_setDisableYieldValue,Xs=null,ke=null,je=typeof Object.is=="function"?Object.is:T,Zd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Kp=Object.prototype.hasOwnProperty,zu,kd,Du=!1,jd=new WeakMap,Va=[],qa=0,hr=null,Vs=0,sn=[],ln=0,vi=null,Bn=1,Un="",Se=v(null),qs=v(null),_i=v(null),fr=v(null),Ee=null,jt=null,At=!1,Si=null,rn=!1,Ou=Error(l(519)),dr=v(null),ta=null,ti=null,Qp=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){a.aborted=!0,n.forEach(function(r){return r()})}},Zp=Qe.unstable_scheduleCallback,kp=Qe.unstable_NormalPriority,Ft={$$typeof:pi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},gr=null,Pa=null,Hu=!1,mr=!1,Gu=!1,ea=0,Ps=null,Bu=0,Ka=0,Qa=null,Fd=mt.S;mt.S=function(n,a){t0=Ue(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ss(n,a),Fd!==null&&Fd(n,a)};var na=v(null),Za=Error(l(460)),Uu=Error(l(474)),pr=Error(l(542)),yr={then:function(){}},ia=null,ka=null,Ks=0,aa=Gl(!0),Id=Gl(!1),on=[],ja=0,Lu=0,Ei=!1,Yu=!1,Fa=v(null),vr=v(0),Fe=v(null),un=null,ne=v(0),ei=0,_t=null,Lt=null,ie=null,_r=!1,Ia=!1,sa=!1,Sr=0,Qs=0,Ja=null,jp=0,Zs={readContext:Zt,use:Vl,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Zs.useEffectEvent=kt;var Jd={readContext:Zt,use:Vl,useCallback:function(n,a){return we().memoizedState=[n,a===void 0?null:a],n},useContext:Zt,useEffect:Ph,useImperativeHandle:function(n,a,r){r=r!=null?r.concat([n]):null,Pl(4194308,4,kh.bind(null,a,n),r)},useLayoutEffect:function(n,a){return Pl(4194308,4,n,a)},useInsertionEffect:function(n,a){Pl(4,2,n,a)},useMemo:function(n,a){var r=we();a=a===void 0?null:a;var c=n();if(sa){W(!0);try{n()}finally{W(!1)}}return r.memoizedState=[c,a],c},useReducer:function(n,a,r){var c=we();if(r!==void 0){var g=r(a);if(sa){W(!0);try{r(a)}finally{W(!1)}}}else g=a;return c.memoizedState=c.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},c.queue=n,n=n.dispatch=Vg.bind(null,_t,n),[c.memoizedState,n]},useRef:function(n){var a=we();return n={current:n},a.memoizedState=n},useState:function(n){n=Ho(n);var a=n.queue,r=nf.bind(null,_t,a);return a.dispatch=r,[n.memoizedState,r]},useDebugValue:Uo,useDeferredValue:function(n,a){var r=we();return Lo(r,n,a)},useTransition:function(){var n=Ho(!1);return n=Wh.bind(null,_t,n.queue,!0,!1),we().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,r){var c=_t,g=we();if(At){if(r===void 0)throw Error(l(407));r=r()}else{if(r=a(),Yt===null)throw Error(l(349));(Tt&127)!==0||Ah(c,a,r)}g.memoizedState=r;var p={value:r,getSnapshot:a};return g.queue=p,Ph(Rh.bind(null,c,p,n),[n]),c.flags|=2048,za(9,{destroy:void 0},Mh.bind(null,c,p,r,a),null),r},useId:function(){var n=we(),a=Yt.identifierPrefix;if(At){var r=Un,c=Bn;r=(c&~(1<<32-Ze(c)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Sr++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=jp++,a="_"+a+"r_"+r.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:Yo,useFormState:Lh,useActionState:Lh,useOptimistic:function(n){var a=we();a.memoizedState=a.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Xo.bind(null,_t,!0,r),r.dispatch=a,[n,a]},useMemoCache:zo,useCacheRefresh:function(){return we().memoizedState=Xg.bind(null,_t)},useEffectEvent:function(n){var a=we(),r={impl:n};return a.memoizedState=r,function(){if((bt&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},Xu={readContext:Zt,use:Vl,useCallback:Fh,useContext:Zt,useEffect:Bo,useImperativeHandle:jh,useInsertionEffect:Qh,useLayoutEffect:Zh,useMemo:Ih,useReducer:ql,useRef:qh,useState:function(){return ql(kn)},useDebugValue:Uo,useDeferredValue:function(n,a){var r=ee();return Jh(r,Lt.memoizedState,n,a)},useTransition:function(){var n=ql(kn)[0],a=ee().memoizedState;return[typeof n=="boolean"?n:Ms(n),a]},useSyncExternalStore:Nh,useId:tf,useHostTransitionStatus:Yo,useFormState:Yh,useActionState:Yh,useOptimistic:function(n,a){var r=ee();return Dh(r,Lt,n,a)},useMemoCache:zo,useCacheRefresh:ef};Xu.useEffectEvent=Kh;var Wd={readContext:Zt,use:Vl,useCallback:Fh,useContext:Zt,useEffect:Bo,useImperativeHandle:jh,useInsertionEffect:Qh,useLayoutEffect:Zh,useMemo:Ih,useReducer:Oo,useRef:qh,useState:function(){return Oo(kn)},useDebugValue:Uo,useDeferredValue:function(n,a){var r=ee();return Lt===null?Lo(r,n,a):Jh(r,Lt.memoizedState,n,a)},useTransition:function(){var n=Oo(kn)[0],a=ee().memoizedState;return[typeof n=="boolean"?n:Ms(n),a]},useSyncExternalStore:Nh,useId:tf,useHostTransitionStatus:Yo,useFormState:Vh,useActionState:Vh,useOptimistic:function(n,a){var r=ee();return Lt!==null?Dh(r,Lt,n,a):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:zo,useCacheRefresh:ef};Wd.useEffectEvent=Kh;var Vu={enqueueSetState:function(n,a,r){n=n._reactInternals;var c=Ke(),g=zn(c);g.payload=a,r!=null&&(g.callback=r),a=Dn(n,g,c),a!==null&&(Be(a,n,c),Ki(a,n,c))},enqueueReplaceState:function(n,a,r){n=n._reactInternals;var c=Ke(),g=zn(c);g.tag=1,g.payload=a,r!=null&&(g.callback=r),a=Dn(n,g,c),a!==null&&(Be(a,n,c),Ki(a,n,c))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var r=Ke(),c=zn(r);c.tag=2,a!=null&&(c.callback=a),a=Dn(n,c,r),a!==null&&(Be(a,n,r),Ki(a,n,r))}},qu=Error(l(461)),ae=!1,Pu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},ni=!1,se=!1,Ku=!1,$d=typeof WeakSet=="function"?WeakSet:Set,me=null,le=null,Le=!1,Sn=null,Wa=8192,Fp={getCacheForType:function(n){var a=Zt(Ft),r=a.data.get(n);return r===void 0&&(r=n(),a.data.set(n,r)),r},cacheSignal:function(){return Zt(Ft).controller.signal}},Er=0,xr=1,br=2,Cr=3,Tr=4;if(typeof Symbol=="function"&&Symbol.for){var ks=Symbol.for;Er=ks("selector.component"),xr=ks("selector.has_pseudo_class"),br=ks("selector.role"),Cr=ks("selector.test_id"),Tr=ks("selector.text")}var Ip=typeof WeakMap=="function"?WeakMap:Map,bt=0,Yt=null,Ct=null,Tt=0,Bt=0,Ie=null,xi=!1,$a=!1,Qu=!1,ii=0,Wt=0,bi=0,la=0,Zu=0,Je=0,ts=0,js=null,Ye=null,ku=!1,Nr=0,t0=0,Fs=1/0,Ar=null,Ci=null,fe=0,Ti=null,es=null,ai=0,ju=0,Fu=null,e0=null,Is=0,Iu=null;return xt.attemptContinuousHydration=function(n){if(n.tag===13||n.tag===31){var a=Zn(n,67108864);a!==null&&Be(a,n,67108864),mu(n,67108864)}},xt.attemptHydrationAtCurrentPriority=function(n){if(n.tag===13||n.tag===31){var a=Ke();a=J(a);var r=Zn(n,a);r!==null&&Be(r,n,a),mu(n,a)}},xt.attemptSynchronousHydration=function(n){switch(n.tag){case 3:if(n=n.stateNode,n.current.memoizedState.isDehydrated){var a=C(n.pendingLanes);if(a!==0){for(n.pendingLanes|=2,n.entangledLanes|=2;a;){var r=1<<31-Ze(a);n.entanglements[1]|=r,a&=~r}ve(n),(bt&6)===0&&(Fs=Ue()+500,nn(0))}}break;case 31:case 13:a=Zn(n,2),a!==null&&Be(a,n,2),If(),mu(n,2)}},xt.batchedUpdates=function(n,a){return n(a)},xt.createComponentSelector=function(n){return{$$typeof:Er,value:n}},xt.createContainer=function(n,a,r,c,g,p,E,z,Z,et){return gd(n,a,!1,null,r,c,p,null,E,z,Z,et)},xt.createHasPseudoClassSelector=function(n){return{$$typeof:xr,value:n}},xt.createHydrationContainer=function(n,a,r,c,g,p,E,z,Z,et,ot,it,ht,vt){return n=gd(r,c,!0,n,g,p,z,vt,Z,et,ot,it),n.context=md(null),r=n.current,c=Ke(),c=J(c),g=zn(c),g.callback=a??null,Dn(r,g,c),a=c,n.current.lanes=a,H(n,a),ve(n),n},xt.createPortal=function(n,a,r){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:c==null?null:""+c,children:n,containerInfo:a,implementation:r}},xt.createRoleSelector=function(n){return{$$typeof:br,value:n}},xt.createTestNameSelector=function(n){return{$$typeof:Cr,value:n}},xt.createTextSelector=function(n){return{$$typeof:Tr,value:n}},xt.defaultOnCaughtError=function(n){console.error(n)},xt.defaultOnRecoverableError=function(n){Zd(n)},xt.defaultOnUncaughtError=function(n){Zd(n)},xt.deferredUpdates=function(n){var a=mt.T,r=$n();try{return ge(32),mt.T=null,n()}finally{ge(r),mt.T=a}},xt.discreteUpdates=function(n,a,r,c,g){var p=mt.T,E=$n();try{return ge(2),mt.T=null,n(a,r,c,g)}finally{ge(E),mt.T=p,bt===0&&(Fs=Ue()+500)}},xt.findAllNodes=ou,xt.findBoundingRects=function(n,a){if(!Ls)throw Error(l(363));a=ou(n,a),n=[];for(var r=0;r<a.length;r++)n.push(zm(a[r]));for(a=n.length-1;0<a;a--){r=n[a];for(var c=r.x,g=c+r.width,p=r.y,E=p+r.height,z=a-1;0<=z;z--)if(a!==z){var Z=n[z],et=Z.x,ot=et+Z.width,it=Z.y,ht=it+Z.height;if(c>=et&&p>=it&&g<=ot&&E<=ht){n.splice(a,1);break}else if(c!==et||r.width!==Z.width||ht<p||it>E){if(!(p!==it||r.height!==Z.height||ot<c||et>g)){et>c&&(Z.width+=et-c,Z.x=c),ot<g&&(Z.width=g-et),n.splice(a,1);break}}else{it>p&&(Z.height+=it-p,Z.y=p),ht<E&&(Z.height=E-it),n.splice(a,1);break}}}return n},xt.findHostInstance=pd,xt.findHostInstanceWithNoPortals=function(n){return n=h(n),n=n!==null?d(n):null,n===null?null:Us(n.stateNode)},xt.findHostInstanceWithWarning=function(n){return pd(n)},xt.flushPassiveEffects=Bs,xt.flushSyncFromReconciler=function(n){var a=bt;bt|=1;var r=mt.T,c=$n();try{if(ge(2),mt.T=null,n)return n()}finally{ge(c),mt.T=r,bt=a,(bt&6)===0&&nn(0)}},xt.flushSyncWork=If,xt.focusWithin=function(n,a){if(!Ls)throw Error(l(363));for(n=su(n),a=Zf(n,a),a=Array.from(a),n=0;n<a.length;){var r=a[n++],c=r.tag;if(!Ys(r)){if((c===5||c===26||c===27)&&Hm(r.stateNode))return!0;for(r=r.child;r!==null;)a.push(r),r=r.sibling}}return!1},xt.getFindAllNodesFailureDescription=function(n,a){if(!Ls)throw Error(l(363));var r=0,c=[];n=[su(n),0];for(var g=0;g<n.length;){var p=n[g++],E=p.tag,z=n[g++],Z=a[z];if((E!==5&&E!==26&&E!==27||!Ys(p))&&(lu(p,Z)&&(c.push(ru(Z)),z++,z>r&&(r=z)),z<a.length))for(p=p.child;p!==null;)n.push(p,z),p=p.sibling}if(r<a.length){for(n=[];r<a.length;r++)n.push(ru(a[r]));return`findAllNodes was able to match part of the selector:
  `+(c.join(" > ")+`

No matching component was found for:
  `)+n.join(" > ")}return null},xt.getPublicRootInstance=function(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 27:case 5:return Us(n.child.stateNode);default:return n.child.stateNode}},xt.injectIntoDevTools=function(){var n={bundleType:0,version:um,rendererPackageName:cm,currentDispatcherRef:mt,reconcilerVersion:"19.2.0"};if(xd!==null&&(n.rendererConfig=xd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")n=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)n=!0;else{try{Xs=a.inject(n),ke=a}catch{}n=!!a.checkDCE}}return n},xt.isAlreadyRendering=function(){return(bt&6)!==0},xt.observeVisibleRects=function(n,a,r,c){if(!Ls)throw Error(l(363));n=ou(n,a);var g=Gm(n,r,c).disconnect;return{disconnect:function(){g()}}},xt.shouldError=function(){return null},xt.shouldSuspend=function(){return!1},xt.startHostTransition=function(n,a,r,c){if(n.tag!==5)throw Error(l(476));var g=$h(n).queue;Wh(n,g,a,Ua,r===null?s:function(){var p=$h(n);return p.next===null&&(p=n.alternate.memoizedState),Rs(n,p.next.queue,{},Ke()),r(c)})},xt.updateContainer=function(n,a,r,c){var g=a.current,p=Ke();return yd(g,p,n,a,r,c),p},xt.updateContainerSync=function(n,a,r,c){return yd(a.current,2,n,a,r,c),2},xt},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})})(uc)),uc.exports}var D0;function C4(){return D0||(D0=1,oc.exports=b4()),oc.exports}var T4=C4();const N4=w1(T4);var cc={exports:{}},si={};var O0;function A4(){return O0||(O0=1,si.ConcurrentRoot=1,si.ContinuousEventPriority=8,si.DefaultEventPriority=32,si.DiscreteEventPriority=2,si.IdleEventPriority=268435456,si.LegacyRoot=0,si.NoEventPriority=0),si}var H0;function M4(){return H0||(H0=1,cc.exports=A4()),cc.exports}var _o=M4();const G0={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let B0=!1,U0=!1;const no=".react-konva-event",R4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,w4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,z4={};function So(e,t,i=z4){if(!B0&&"zIndex"in t&&(console.warn(w4),B0=!0),!U0&&t.draggable){var s=t.x!==void 0||t.y!==void 0,l=t.onDragEnd||t.onDragMove;s&&!l&&(console.warn(R4),U0=!0)}for(var o in i)if(!G0[o]){var u=o.slice(0,2)==="on",h=i[o]!==t[o];if(u&&h){var f=o.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e.off(f,i[o])}var d=!t.hasOwnProperty(o);d&&e.setAttr(o,void 0)}var m=t._useStrictMode,y={},v=!1;const _={};for(var o in t)if(!G0[o]){var u=o.slice(0,2)==="on",S=i[o]!==t[o];if(u&&S){var f=o.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),t[o]&&(_[f]=t[o])}!u&&(t[o]!==i[o]||m&&t[o]!==e.getAttr(o))&&(v=!0,y[o]=t[o])}v&&(e.setAttrs(y),Yi(e));for(var f in _)e.off(f+no),e.on(f+no,_[f])}function Yi(e){if(!rt.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var hc=z1();const c2={},D4={};ms.Node.prototype._applyProps=So;let h2=_o.DefaultEventPriority;function O4(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Yi(e)}function H4(e,t,i){let s=ms[e];s||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=ms.Group);const l={},o={};for(var u in t)if(u!=="ref"){var h=u.slice(0,2)==="on";h?o[u]=t[u]:l[u]=t[u]}const f=new s(l);return So(f,o),f}function G4(e,t,i){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function B4(e,t,i){return!1}function U4(e){return e}function L4(){return null}function Y4(){return null}function X4(e,t,i,s){return D4}function V4(){}function q4(e){}function P4(e,t){return!1}function K4(){return c2}function Q4(){return c2}const Z4=setTimeout,k4=clearTimeout,j4=!0,F4=e=>{e()},I4=-1;function J4(e,t){return!1}const W4=!1,$4=!1,ty=!0,ey=!1,ny=!1;function iy(e,t){t.parent===e?t.moveToTop():e.add(t),Yi(e)}function ay(e,t){t.parent===e?t.moveToTop():e.add(t),Yi(e)}function f2(e,t,i){t._remove(),e.add(t),t.setZIndex(i.getZIndex()),Yi(e)}function sy(e,t,i){f2(e,t,i)}function ly(e,t){t.destroy(),t.off(no),Yi(e)}function ry(e,t){t.destroy(),t.off(no),Yi(e)}function oy(e,t,i){console.error(`Text components are not yet supported in ReactKonva. You text is: "${i}"`)}function uy(e,t,i){}function cy(e,t,i,s){So(e,s,i)}function hy(e){e.hide(),Yi(e)}function fy(e){}function dy(e,t){(t.visible==null||t.visible)&&e.show()}function gy(e,t){}function my(e){}function py(){}function yy(){return null}function vy(){}function _y(){}function Sy(){return _o.DefaultEventPriority}function Ey(){}function xy(){return null}function by(e){h2=e}function Cy(){return h2}function Ty(){return _o.DiscreteEventPriority}function Ny(){return!1}function Ay(){}function My(){return null}function Ry(){return-1.1}function wy(){}function zy(){return!1}function Dy(){return!0}function Oy(){}function Hy(){}function Gy(){return null}const By=null,Uy=$.createContext(null);function Ly(){}const Yy=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:Uy,NotPendingTransition:By,afterActiveInstanceBlur:_y,appendChild:iy,appendChildToContainer:ay,appendInitialChild:O4,beforeActiveInstanceBlur:vy,cancelTimeout:k4,clearContainer:my,commitMount:uy,commitTextUpdate:oy,commitUpdate:cy,createInstance:H4,createTextInstance:G4,detachDeletedInstance:py,finalizeInitialChildren:B4,getChildHostContext:Q4,getCurrentEventPriority:Sy,getCurrentUpdatePriority:Cy,getInstanceFromNode:yy,getInstanceFromScope:xy,getPublicInstance:U4,getRootHostContext:K4,hideInstance:hy,hideTextInstance:fy,idlePriority:hc.unstable_IdlePriority,insertBefore:f2,insertInContainerBefore:sy,isPrimaryRenderer:W4,maySuspendCommit:zy,noTimeout:I4,now:hc.unstable_now,preloadInstance:Dy,prepareForCommit:L4,preparePortalMount:Y4,prepareScopeUpdate:Ey,prepareUpdate:X4,removeChild:ly,removeChildFromContainer:ry,requestPostPaintCallback:wy,resetAfterCommit:V4,resetFormInstance:Ly,resetTextContent:q4,resolveEventTimeStamp:Ry,resolveEventType:My,resolveUpdatePriority:Ty,run:hc.unstable_runWithPriority,scheduleMicrotask:F4,scheduleTimeout:Z4,setCurrentUpdatePriority:by,shouldAttemptEagerTransition:Ny,shouldDeprioritizeSubtree:P4,shouldSetTextContent:J4,startSuspendingCommit:Oy,supportsHydration:ny,supportsMicrotasks:j4,supportsMutation:ty,supportsPersistence:ey,suspendInstance:Hy,trackSchedulerEvent:Ay,unhideInstance:dy,unhideTextInstance:gy,waitForCommitToBeReady:Gy,warnsIfNotActing:$4},Symbol.toStringTag,{value:"Module"}));function d2(e,t,i){if(!e)return;if(i(e)===!0)return e;let s=e.child;for(;s;){const l=d2(s,t,i);if(l)return l;s=s.sibling}}function g2(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const ah=g2(k.createContext(null));class m2 extends k.Component{render(){return k.createElement(ah.Provider,{value:this._reactInternals},this.props.children)}}function Xy(){const e=k.useContext(ah);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=k.useId();return k.useMemo(()=>{for(const i of[e,e?.alternate]){if(!i)continue;const s=d2(i,!1,l=>{let o=l.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(s)return s}},[e,t])}const Vy=Symbol.for("react.context"),qy=e=>e!==null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Vy;function Py(){const e=Xy(),[t]=k.useState(()=>new Map);t.clear();let i=e;for(;i;){const s=i.type;qy(s)&&s!==ah&&!t.has(s)&&t.set(s,k.use(g2(s))),i=i.return}return t}function Ky(){const e=Py();return k.useMemo(()=>Array.from(e.keys()).reduce((t,i)=>s=>k.createElement(t,null,k.createElement(i.Provider,{...s,value:e.get(i)})),t=>k.createElement(m2,{...t})),[e])}if($.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function Qy(e){const t=$.useRef({});return $.useLayoutEffect(()=>{t.current=e}),$.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Zy=()=>{const e=$.useRef(0);return $.useMemo(()=>{e.current++},[]),e.current>1},ky=e=>{const t=$.useRef(null),i=$.useRef(null),s=$.useRef(null),l=Qy(e),o=Ky(),u=$.useRef(null),h=m=>{const{forwardedRef:y}=e;y&&(typeof y=="function"?y(m):y.current=m)},f=Zy(),d=()=>{h(null),Yr.updateContainer(null,s.current,null),i.current?.destroy(),i.current=null};return $.useLayoutEffect(()=>(u.current&&(clearTimeout(u.current),u.current=null),i.current?h(i.current):(i.current=new ms.Stage({width:e.width,height:e.height,container:t.current}),h(i.current),s.current=Yr.createContainer(i.current,_o.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Yr.updateContainer($.createElement(o,{},e.children),s.current,null,()=>{})),()=>{f?u.current=setTimeout(d,0):d()}),[]),$.useLayoutEffect(()=>{h(i.current),So(i.current,e,l),Yr.updateContainer($.createElement(o,{},e.children),s.current,null)}),$.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},j_="Layer",F_="Group",I_="Rect",J_="Circle",W_="Wedge",$_="Text",Yr=N4(Yy),tS=$.forwardRef((e,t)=>$.createElement(m2,{},$.createElement(ky,{...e,forwardedRef:t})));function en(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let i=0,s;i<e.length;i++)(s=en(e[i]))!==""&&(t+=(t&&" ")+s);else for(let i in e)e[i]&&(t+=(t&&" ")+i);return t}var fc={exports:{}},dc={},gc={exports:{}},mc={};var L0;function jy(){if(L0)return mc;L0=1;var e=mo();function t(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var i=typeof Object.is=="function"?Object.is:t,s=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function h(y,v){var _=v(),S=s({inst:{value:_,getSnapshot:v}}),b=S[0].inst,C=S[1];return o(function(){b.value=_,b.getSnapshot=v,f(b)&&C({inst:b})},[y,_,v]),l(function(){return f(b)&&C({inst:b}),y(function(){f(b)&&C({inst:b})})},[y]),u(_),_}function f(y){var v=y.getSnapshot;y=y.value;try{var _=v();return!i(y,_)}catch{return!0}}function d(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:h;return mc.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,mc}var Y0;function Fy(){return Y0||(Y0=1,gc.exports=jy()),gc.exports}var X0;function Iy(){if(X0)return dc;X0=1;var e=mo(),t=Fy();function i(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var s=typeof Object.is=="function"?Object.is:i,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,h=e.useMemo,f=e.useDebugValue;return dc.useSyncExternalStoreWithSelector=function(d,m,y,v,_){var S=o(null);if(S.current===null){var b={hasValue:!1,value:null};S.current=b}else b=S.current;S=h(function(){function x(H){if(!A){if(A=!0,w=H,H=v(H),_!==void 0&&b.hasValue){var X=b.value;if(_(X,H))return M=X}return M=H}if(X=M,s(w,H))return X;var q=v(H);return _!==void 0&&_(X,q)?(w=H,X):(w=H,M=q)}var A=!1,w,M,G=y===void 0?null:y;return[function(){return x(m())},G===null?void 0:function(){return x(G())}]},[m,y,v,_]);var C=l(d,S[0],S[1]);return u(function(){b.hasValue=!0,b.value=C},[C]),f(C),C},dc}var V0;function Jy(){return V0||(V0=1,fc.exports=Iy()),fc.exports}var Wy=Jy();const $y=w1(Wy),t6={},q0=e=>{let t;const i=new Set,s=(m,y)=>{const v=typeof m=="function"?m(t):m;if(!Object.is(v,t)){const _=t;t=y??(typeof v!="object"||v===null)?v:Object.assign({},t,v),i.forEach(S=>S(t,_))}},l=()=>t,f={setState:s,getState:l,getInitialState:()=>d,subscribe:m=>(i.add(m),()=>i.delete(m)),destroy:()=>{(t6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},d=t=e(s,l,f);return f},e6=e=>e?q0(e):q0,{useDebugValue:n6}=$,{useSyncExternalStoreWithSelector:i6}=$y,a6=e=>e;function p2(e,t=a6,i){const s=i6(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return n6(s),s}const P0=(e,t)=>{const i=e6(e),s=(l,o=t)=>p2(i,l,o);return Object.assign(s,i),s},s6=(e,t)=>e?P0(e,t):P0;function Ve(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,l]of e)if(!Object.is(l,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const s of i)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var l6={value:()=>{}};function Eo(){for(var e=0,t=arguments.length,i={},s;e<t;++e){if(!(s=arguments[e]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new Jr(i)}function Jr(e){this._=e}function r6(e,t){return e.trim().split(/^|\s+/).map(function(i){var s="",l=i.indexOf(".");if(l>=0&&(s=i.slice(l+1),i=i.slice(0,l)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}Jr.prototype=Eo.prototype={constructor:Jr,on:function(e,t){var i=this._,s=r6(e+"",i),l,o=-1,u=s.length;if(arguments.length<2){for(;++o<u;)if((l=(e=s[o]).type)&&(l=o6(i[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<u;)if(l=(e=s[o]).type)i[l]=K0(i[l],e.name,t);else if(t==null)for(l in i)i[l]=K0(i[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new Jr(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var i=new Array(l),s=0,l,o;s<l;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],s=0,l=o.length;s<l;++s)o[s].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],l=0,o=s.length;l<o;++l)s[l].value.apply(t,i)}};function o6(e,t){for(var i=0,s=e.length,l;i<s;++i)if((l=e[i]).name===t)return l.value}function K0(e,t,i){for(var s=0,l=e.length;s<l;++s)if(e[s].name===t){e[s]=l6,e=e.slice(0,s).concat(e.slice(s+1));break}return i!=null&&e.push({name:t,value:i}),e}var Bc="http://www.w3.org/1999/xhtml";const Q0={svg:"http://www.w3.org/2000/svg",xhtml:Bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xo(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Q0.hasOwnProperty(t)?{space:Q0[t],local:e}:e}function u6(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Bc&&t.documentElement.namespaceURI===Bc?t.createElement(e):t.createElementNS(i,e)}}function c6(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function y2(e){var t=xo(e);return(t.local?c6:u6)(t)}function h6(){}function sh(e){return e==null?h6:function(){return this.querySelector(e)}}function f6(e){typeof e!="function"&&(e=sh(e));for(var t=this._groups,i=t.length,s=new Array(i),l=0;l<i;++l)for(var o=t[l],u=o.length,h=s[l]=new Array(u),f,d,m=0;m<u;++m)(f=o[m])&&(d=e.call(f,f.__data__,m,o))&&("__data__"in f&&(d.__data__=f.__data__),h[m]=d);return new $e(s,this._parents)}function d6(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function g6(){return[]}function v2(e){return e==null?g6:function(){return this.querySelectorAll(e)}}function m6(e){return function(){return d6(e.apply(this,arguments))}}function p6(e){typeof e=="function"?e=m6(e):e=v2(e);for(var t=this._groups,i=t.length,s=[],l=[],o=0;o<i;++o)for(var u=t[o],h=u.length,f,d=0;d<h;++d)(f=u[d])&&(s.push(e.call(f,f.__data__,d,u)),l.push(f));return new $e(s,l)}function _2(e){return function(){return this.matches(e)}}function S2(e){return function(t){return t.matches(e)}}var y6=Array.prototype.find;function v6(e){return function(){return y6.call(this.children,e)}}function _6(){return this.firstElementChild}function S6(e){return this.select(e==null?_6:v6(typeof e=="function"?e:S2(e)))}var E6=Array.prototype.filter;function x6(){return Array.from(this.children)}function b6(e){return function(){return E6.call(this.children,e)}}function C6(e){return this.selectAll(e==null?x6:b6(typeof e=="function"?e:S2(e)))}function T6(e){typeof e!="function"&&(e=_2(e));for(var t=this._groups,i=t.length,s=new Array(i),l=0;l<i;++l)for(var o=t[l],u=o.length,h=s[l]=[],f,d=0;d<u;++d)(f=o[d])&&e.call(f,f.__data__,d,o)&&h.push(f);return new $e(s,this._parents)}function E2(e){return new Array(e.length)}function N6(){return new $e(this._enter||this._groups.map(E2),this._parents)}function io(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}io.prototype={constructor:io,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function A6(e){return function(){return e}}function M6(e,t,i,s,l,o){for(var u=0,h,f=t.length,d=o.length;u<d;++u)(h=t[u])?(h.__data__=o[u],s[u]=h):i[u]=new io(e,o[u]);for(;u<f;++u)(h=t[u])&&(l[u]=h)}function R6(e,t,i,s,l,o,u){var h,f,d=new Map,m=t.length,y=o.length,v=new Array(m),_;for(h=0;h<m;++h)(f=t[h])&&(v[h]=_=u.call(f,f.__data__,h,t)+"",d.has(_)?l[h]=f:d.set(_,f));for(h=0;h<y;++h)_=u.call(e,o[h],h,o)+"",(f=d.get(_))?(s[h]=f,f.__data__=o[h],d.delete(_)):i[h]=new io(e,o[h]);for(h=0;h<m;++h)(f=t[h])&&d.get(v[h])===f&&(l[h]=f)}function w6(e){return e.__data__}function z6(e,t){if(!arguments.length)return Array.from(this,w6);var i=t?R6:M6,s=this._parents,l=this._groups;typeof e!="function"&&(e=A6(e));for(var o=l.length,u=new Array(o),h=new Array(o),f=new Array(o),d=0;d<o;++d){var m=s[d],y=l[d],v=y.length,_=D6(e.call(m,m&&m.__data__,d,s)),S=_.length,b=h[d]=new Array(S),C=u[d]=new Array(S),x=f[d]=new Array(v);i(m,y,b,C,x,_,t);for(var A=0,w=0,M,G;A<S;++A)if(M=b[A]){for(A>=w&&(w=A+1);!(G=C[w])&&++w<S;);M._next=G||null}}return u=new $e(u,s),u._enter=h,u._exit=f,u}function D6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O6(){return new $e(this._exit||this._groups.map(E2),this._parents)}function H6(e,t,i){var s=this.enter(),l=this,o=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),i==null?o.remove():i(o),s&&l?s.merge(l).order():l}function G6(e){for(var t=e.selection?e.selection():e,i=this._groups,s=t._groups,l=i.length,o=s.length,u=Math.min(l,o),h=new Array(l),f=0;f<u;++f)for(var d=i[f],m=s[f],y=d.length,v=h[f]=new Array(y),_,S=0;S<y;++S)(_=d[S]||m[S])&&(v[S]=_);for(;f<l;++f)h[f]=i[f];return new $e(h,this._parents)}function B6(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var s=e[t],l=s.length-1,o=s[l],u;--l>=0;)(u=s[l])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function U6(e){e||(e=L6);function t(y,v){return y&&v?e(y.__data__,v.__data__):!y-!v}for(var i=this._groups,s=i.length,l=new Array(s),o=0;o<s;++o){for(var u=i[o],h=u.length,f=l[o]=new Array(h),d,m=0;m<h;++m)(d=u[m])&&(f[m]=d);f.sort(t)}return new $e(l,this._parents).order()}function L6(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Y6(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function X6(){return Array.from(this)}function V6(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],l=0,o=s.length;l<o;++l){var u=s[l];if(u)return u}return null}function q6(){let e=0;for(const t of this)++e;return e}function P6(){return!this.node()}function K6(e){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var l=t[i],o=0,u=l.length,h;o<u;++o)(h=l[o])&&e.call(h,h.__data__,o,l);return this}function Q6(e){return function(){this.removeAttribute(e)}}function Z6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function k6(e,t){return function(){this.setAttribute(e,t)}}function j6(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function F6(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function I6(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function J6(e,t){var i=xo(e);if(arguments.length<2){var s=this.node();return i.local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}return this.each((t==null?i.local?Z6:Q6:typeof t=="function"?i.local?I6:F6:i.local?j6:k6)(i,t))}function x2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function W6(e){return function(){this.style.removeProperty(e)}}function $6(e,t,i){return function(){this.style.setProperty(e,t,i)}}function t8(e,t,i){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,i)}}function e8(e,t,i){return arguments.length>1?this.each((t==null?W6:typeof t=="function"?t8:$6)(e,t,i??"")):ps(this.node(),e)}function ps(e,t){return e.style.getPropertyValue(t)||x2(e).getComputedStyle(e,null).getPropertyValue(t)}function n8(e){return function(){delete this[e]}}function i8(e,t){return function(){this[e]=t}}function a8(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function s8(e,t){return arguments.length>1?this.each((t==null?n8:typeof t=="function"?a8:i8)(e,t)):this.node()[e]}function b2(e){return e.trim().split(/^|\s+/)}function lh(e){return e.classList||new C2(e)}function C2(e){this._node=e,this._names=b2(e.getAttribute("class")||"")}C2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function T2(e,t){for(var i=lh(e),s=-1,l=t.length;++s<l;)i.add(t[s])}function N2(e,t){for(var i=lh(e),s=-1,l=t.length;++s<l;)i.remove(t[s])}function l8(e){return function(){T2(this,e)}}function r8(e){return function(){N2(this,e)}}function o8(e,t){return function(){(t.apply(this,arguments)?T2:N2)(this,e)}}function u8(e,t){var i=b2(e+"");if(arguments.length<2){for(var s=lh(this.node()),l=-1,o=i.length;++l<o;)if(!s.contains(i[l]))return!1;return!0}return this.each((typeof t=="function"?o8:t?l8:r8)(i,t))}function c8(){this.textContent=""}function h8(e){return function(){this.textContent=e}}function f8(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function d8(e){return arguments.length?this.each(e==null?c8:(typeof e=="function"?f8:h8)(e)):this.node().textContent}function g8(){this.innerHTML=""}function m8(e){return function(){this.innerHTML=e}}function p8(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function y8(e){return arguments.length?this.each(e==null?g8:(typeof e=="function"?p8:m8)(e)):this.node().innerHTML}function v8(){this.nextSibling&&this.parentNode.appendChild(this)}function _8(){return this.each(v8)}function S8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function E8(){return this.each(S8)}function x8(e){var t=typeof e=="function"?e:y2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function b8(){return null}function C8(e,t){var i=typeof e=="function"?e:y2(e),s=t==null?b8:typeof t=="function"?t:sh(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)})}function T8(){var e=this.parentNode;e&&e.removeChild(this)}function N8(){return this.each(T8)}function A8(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function M8(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function R8(e){return this.select(e?M8:A8)}function w8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function z8(e){return function(t){e.call(this,t,this.__data__)}}function D8(e){return e.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}})}function O8(e){return function(){var t=this.__on;if(t){for(var i=0,s=-1,l=t.length,o;i<l;++i)o=t[i],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++s]=o;++s?t.length=s:delete this.__on}}}function H8(e,t,i){return function(){var s=this.__on,l,o=z8(t);if(s){for(var u=0,h=s.length;u<h;++u)if((l=s[u]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=o,l.options=i),l.value=t;return}}this.addEventListener(e.type,o,i),l={type:e.type,name:e.name,value:t,listener:o,options:i},s?s.push(l):this.__on=[l]}}function G8(e,t,i){var s=D8(e+""),l,o=s.length,u;if(arguments.length<2){var h=this.node().__on;if(h){for(var f=0,d=h.length,m;f<d;++f)for(l=0,m=h[f];l<o;++l)if((u=s[l]).type===m.type&&u.name===m.name)return m.value}return}for(h=t?H8:O8,l=0;l<o;++l)this.each(h(s[l],t,i));return this}function A2(e,t,i){var s=x2(e),l=s.CustomEvent;typeof l=="function"?l=new l(t,i):(l=s.document.createEvent("Event"),i?(l.initEvent(t,i.bubbles,i.cancelable),l.detail=i.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function B8(e,t){return function(){return A2(this,e,t)}}function U8(e,t){return function(){return A2(this,e,t.apply(this,arguments))}}function L8(e,t){return this.each((typeof t=="function"?U8:B8)(e,t))}function*Y8(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],l=0,o=s.length,u;l<o;++l)(u=s[l])&&(yield u)}var M2=[null];function $e(e,t){this._groups=e,this._parents=t}function Ml(){return new $e([[document.documentElement]],M2)}function X8(){return this}$e.prototype=Ml.prototype={constructor:$e,select:f6,selectAll:p6,selectChild:S6,selectChildren:C6,filter:T6,data:z6,enter:N6,exit:O6,join:H6,merge:G6,selection:X8,order:B6,sort:U6,call:Y6,nodes:X6,node:V6,size:q6,empty:P6,each:K6,attr:J6,style:e8,property:s8,classed:u8,text:d8,html:y8,raise:_8,lower:E8,append:x8,insert:C8,remove:N8,clone:R8,datum:w8,on:G8,dispatch:L8,[Symbol.iterator]:Y8};function xn(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],M2)}function V8(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ln(e,t){if(e=V8(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var s=i.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}const q8={passive:!1},El={capture:!0,passive:!1};function pc(e){e.stopImmediatePropagation()}function cs(e){e.preventDefault(),e.stopImmediatePropagation()}function R2(e){var t=e.document.documentElement,i=xn(e).on("dragstart.drag",cs,El);"onselectstart"in t?i.on("selectstart.drag",cs,El):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function w2(e,t){var i=e.document.documentElement,s=xn(e).on("dragstart.drag",null);t&&(s.on("click.drag",cs,El),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const Xr=e=>()=>e;function Uc(e,{sourceEvent:t,subject:i,target:s,identifier:l,active:o,x:u,y:h,dx:f,dy:d,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:m}})}Uc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function P8(e){return!e.ctrlKey&&!e.button}function K8(){return this.parentNode}function Q8(e,t){return t??{x:e.x,y:e.y}}function Z8(){return navigator.maxTouchPoints||"ontouchstart"in this}function k8(){var e=P8,t=K8,i=Q8,s=Z8,l={},o=Eo("start","drag","end"),u=0,h,f,d,m,y=0;function v(M){M.on("mousedown.drag",_).filter(s).on("touchstart.drag",C).on("touchmove.drag",x,q8).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(M,G){if(!(m||!e.call(this,M,G))){var H=w(this,t.call(this,M,G),M,G,"mouse");H&&(xn(M.view).on("mousemove.drag",S,El).on("mouseup.drag",b,El),R2(M.view),pc(M),d=!1,h=M.clientX,f=M.clientY,H("start",M))}}function S(M){if(cs(M),!d){var G=M.clientX-h,H=M.clientY-f;d=G*G+H*H>y}l.mouse("drag",M)}function b(M){xn(M.view).on("mousemove.drag mouseup.drag",null),w2(M.view,d),cs(M),l.mouse("end",M)}function C(M,G){if(e.call(this,M,G)){var H=M.changedTouches,X=t.call(this,M,G),q=H.length,P,I;for(P=0;P<q;++P)(I=w(this,X,M,G,H[P].identifier,H[P]))&&(pc(M),I("start",M,H[P]))}}function x(M){var G=M.changedTouches,H=G.length,X,q;for(X=0;X<H;++X)(q=l[G[X].identifier])&&(cs(M),q("drag",M,G[X]))}function A(M){var G=M.changedTouches,H=G.length,X,q;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),X=0;X<H;++X)(q=l[G[X].identifier])&&(pc(M),q("end",M,G[X]))}function w(M,G,H,X,q,P){var I=o.copy(),J=Ln(P||H,G),j,W,T;if((T=i.call(M,new Uc("beforestart",{sourceEvent:H,target:v,identifier:q,active:u,x:J[0],y:J[1],dx:0,dy:0,dispatch:I}),X))!=null)return j=T.x-J[0]||0,W=T.y-J[1]||0,function O(N,Y,B){var D=J,K;switch(N){case"start":l[q]=O,K=u++;break;case"end":delete l[q],--u;case"drag":J=Ln(B||Y,G),K=u;break}I.call(N,M,new Uc(N,{sourceEvent:Y,subject:T,target:v,identifier:q,active:K,x:J[0]+j,y:J[1]+W,dx:J[0]-D[0],dy:J[1]-D[1],dispatch:I}),X)}}return v.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Xr(!!M),v):e},v.container=function(M){return arguments.length?(t=typeof M=="function"?M:Xr(M),v):t},v.subject=function(M){return arguments.length?(i=typeof M=="function"?M:Xr(M),v):i},v.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Xr(!!M),v):s},v.on=function(){var M=o.on.apply(o,arguments);return M===o?v:M},v.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,v):Math.sqrt(y)},v}function rh(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function z2(e,t){var i=Object.create(e.prototype);for(var s in t)i[s]=t[s];return i}function Rl(){}var xl=.7,ao=1/xl,hs="\\s*([+-]?\\d+)\\s*",bl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j8=/^#([0-9a-f]{3,8})$/,F8=new RegExp(`^rgb\\(${hs},${hs},${hs}\\)$`),I8=new RegExp(`^rgb\\(${Xn},${Xn},${Xn}\\)$`),J8=new RegExp(`^rgba\\(${hs},${hs},${hs},${bl}\\)$`),W8=new RegExp(`^rgba\\(${Xn},${Xn},${Xn},${bl}\\)$`),$8=new RegExp(`^hsl\\(${bl},${Xn},${Xn}\\)$`),t9=new RegExp(`^hsla\\(${bl},${Xn},${Xn},${bl}\\)$`),Z0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rh(Rl,ga,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:k0,formatHex:k0,formatHex8:e9,formatHsl:n9,formatRgb:j0,toString:j0});function k0(){return this.rgb().formatHex()}function e9(){return this.rgb().formatHex8()}function n9(){return D2(this).formatHsl()}function j0(){return this.rgb().formatRgb()}function ga(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=j8.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?F0(t):i===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Vr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Vr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=F8.exec(e))?new Xe(t[1],t[2],t[3],1):(t=I8.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=J8.exec(e))?Vr(t[1],t[2],t[3],t[4]):(t=W8.exec(e))?Vr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$8.exec(e))?W0(t[1],t[2]/100,t[3]/100,1):(t=t9.exec(e))?W0(t[1],t[2]/100,t[3]/100,t[4]):Z0.hasOwnProperty(e)?F0(Z0[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function F0(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function Vr(e,t,i,s){return s<=0&&(e=t=i=NaN),new Xe(e,t,i,s)}function i9(e){return e instanceof Rl||(e=ga(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function Lc(e,t,i,s){return arguments.length===1?i9(e):new Xe(e,t,i,s??1)}function Xe(e,t,i,s){this.r=+e,this.g=+t,this.b=+i,this.opacity=+s}rh(Xe,Lc,z2(Rl,{brighter(e){return e=e==null?ao:Math.pow(ao,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xl:Math.pow(xl,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(da(this.r),da(this.g),da(this.b),so(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:I0,formatHex:I0,formatHex8:a9,formatRgb:J0,toString:J0}));function I0(){return`#${ha(this.r)}${ha(this.g)}${ha(this.b)}`}function a9(){return`#${ha(this.r)}${ha(this.g)}${ha(this.b)}${ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function J0(){const e=so(this.opacity);return`${e===1?"rgb(":"rgba("}${da(this.r)}, ${da(this.g)}, ${da(this.b)}${e===1?")":`, ${e})`}`}function so(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function da(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ha(e){return e=da(e),(e<16?"0":"")+e.toString(16)}function W0(e,t,i,s){return s<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,i,s)}function D2(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof Rl||(e=ga(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,i=e.g/255,s=e.b/255,l=Math.min(t,i,s),o=Math.max(t,i,s),u=NaN,h=o-l,f=(o+l)/2;return h?(t===o?u=(i-s)/h+(i<s)*6:i===o?u=(s-t)/h+2:u=(t-i)/h+4,h/=f<.5?o+l:2-o-l,u*=60):h=f>0&&f<1?0:u,new bn(u,h,f,e.opacity)}function s9(e,t,i,s){return arguments.length===1?D2(e):new bn(e,t,i,s??1)}function bn(e,t,i,s){this.h=+e,this.s=+t,this.l=+i,this.opacity=+s}rh(bn,s9,z2(Rl,{brighter(e){return e=e==null?ao:Math.pow(ao,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xl:Math.pow(xl,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*t,l=2*i-s;return new Xe(yc(e>=240?e-240:e+120,l,s),yc(e,l,s),yc(e<120?e+240:e-120,l,s),this.opacity)},clamp(){return new bn($0(this.h),qr(this.s),qr(this.l),so(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=so(this.opacity);return`${e===1?"hsl(":"hsla("}${$0(this.h)}, ${qr(this.s)*100}%, ${qr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $0(e){return e=(e||0)%360,e<0?e+360:e}function qr(e){return Math.max(0,Math.min(1,e||0))}function yc(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const oh=e=>()=>e;function l9(e,t){return function(i){return e+i*t}}function r9(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(s){return Math.pow(e+s*t,i)}}function o9(e){return(e=+e)==1?O2:function(t,i){return i-t?r9(t,i,e):oh(isNaN(t)?i:t)}}function O2(e,t){var i=t-e;return i?l9(e,i):oh(isNaN(e)?t:e)}const lo=(function e(t){var i=o9(t);function s(l,o){var u=i((l=Lc(l)).r,(o=Lc(o)).r),h=i(l.g,o.g),f=i(l.b,o.b),d=O2(l.opacity,o.opacity);return function(m){return l.r=u(m),l.g=h(m),l.b=f(m),l.opacity=d(m),l+""}}return s.gamma=e,s})(1);function u9(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,s=t.slice(),l;return function(o){for(l=0;l<i;++l)s[l]=e[l]*(1-o)+t[l]*o;return s}}function c9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function h9(e,t){var i=t?t.length:0,s=e?Math.min(i,e.length):0,l=new Array(s),o=new Array(i),u;for(u=0;u<s;++u)l[u]=uh(e[u],t[u]);for(;u<i;++u)o[u]=t[u];return function(h){for(u=0;u<s;++u)o[u]=l[u](h);return o}}function f9(e,t){var i=new Date;return e=+e,t=+t,function(s){return i.setTime(e*(1-s)+t*s),i}}function Yn(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function d9(e,t){var i={},s={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?i[l]=uh(e[l],t[l]):s[l]=t[l];return function(o){for(l in i)s[l]=i[l](o);return s}}var Yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vc=new RegExp(Yc.source,"g");function g9(e){return function(){return e}}function m9(e){return function(t){return e(t)+""}}function H2(e,t){var i=Yc.lastIndex=vc.lastIndex=0,s,l,o,u=-1,h=[],f=[];for(e=e+"",t=t+"";(s=Yc.exec(e))&&(l=vc.exec(t));)(o=l.index)>i&&(o=t.slice(i,o),h[u]?h[u]+=o:h[++u]=o),(s=s[0])===(l=l[0])?h[u]?h[u]+=l:h[++u]=l:(h[++u]=null,f.push({i:u,x:Yn(s,l)})),i=vc.lastIndex;return i<t.length&&(o=t.slice(i),h[u]?h[u]+=o:h[++u]=o),h.length<2?f[0]?m9(f[0].x):g9(t):(t=f.length,function(d){for(var m=0,y;m<t;++m)h[(y=f[m]).i]=y.x(d);return h.join("")})}function uh(e,t){var i=typeof t,s;return t==null||i==="boolean"?oh(t):(i==="number"?Yn:i==="string"?(s=ga(t))?(t=s,lo):H2:t instanceof ga?lo:t instanceof Date?f9:c9(t)?u9:Array.isArray(t)?h9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?d9:Yn)(e,t)}function eS(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var t1=180/Math.PI,Xc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function G2(e,t,i,s,l,o){var u,h,f;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(f=e*i+t*s)&&(i-=e*f,s-=t*f),(h=Math.sqrt(i*i+s*s))&&(i/=h,s/=h,f/=h),e*s<t*i&&(e=-e,t=-t,f=-f,u=-u),{translateX:l,translateY:o,rotate:Math.atan2(t,e)*t1,skewX:Math.atan(f)*t1,scaleX:u,scaleY:h}}var Pr;function p9(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xc:G2(t.a,t.b,t.c,t.d,t.e,t.f)}function y9(e){return e==null||(Pr||(Pr=document.createElementNS("http://www.w3.org/2000/svg","g")),Pr.setAttribute("transform",e),!(e=Pr.transform.baseVal.consolidate()))?Xc:(e=e.matrix,G2(e.a,e.b,e.c,e.d,e.e,e.f))}function B2(e,t,i,s){function l(d){return d.length?d.pop()+" ":""}function o(d,m,y,v,_,S){if(d!==y||m!==v){var b=_.push("translate(",null,t,null,i);S.push({i:b-4,x:Yn(d,y)},{i:b-2,x:Yn(m,v)})}else(y||v)&&_.push("translate("+y+t+v+i)}function u(d,m,y,v){d!==m?(d-m>180?m+=360:m-d>180&&(d+=360),v.push({i:y.push(l(y)+"rotate(",null,s)-2,x:Yn(d,m)})):m&&y.push(l(y)+"rotate("+m+s)}function h(d,m,y,v){d!==m?v.push({i:y.push(l(y)+"skewX(",null,s)-2,x:Yn(d,m)}):m&&y.push(l(y)+"skewX("+m+s)}function f(d,m,y,v,_,S){if(d!==y||m!==v){var b=_.push(l(_)+"scale(",null,",",null,")");S.push({i:b-4,x:Yn(d,y)},{i:b-2,x:Yn(m,v)})}else(y!==1||v!==1)&&_.push(l(_)+"scale("+y+","+v+")")}return function(d,m){var y=[],v=[];return d=e(d),m=e(m),o(d.translateX,d.translateY,m.translateX,m.translateY,y,v),u(d.rotate,m.rotate,y,v),h(d.skewX,m.skewX,y,v),f(d.scaleX,d.scaleY,m.scaleX,m.scaleY,y,v),d=m=null,function(_){for(var S=-1,b=v.length,C;++S<b;)y[(C=v[S]).i]=C.x(_);return y.join("")}}}var v9=B2(p9,"px, ","px)","deg)"),_9=B2(y9,", ",")",")"),S9=1e-12;function e1(e){return((e=Math.exp(e))+1/e)/2}function E9(e){return((e=Math.exp(e))-1/e)/2}function x9(e){return((e=Math.exp(2*e))-1)/(e+1)}const b9=(function e(t,i,s){function l(o,u){var h=o[0],f=o[1],d=o[2],m=u[0],y=u[1],v=u[2],_=m-h,S=y-f,b=_*_+S*S,C,x;if(b<S9)x=Math.log(v/d)/t,C=function(X){return[h+X*_,f+X*S,d*Math.exp(t*X*x)]};else{var A=Math.sqrt(b),w=(v*v-d*d+s*b)/(2*d*i*A),M=(v*v-d*d-s*b)/(2*v*i*A),G=Math.log(Math.sqrt(w*w+1)-w),H=Math.log(Math.sqrt(M*M+1)-M);x=(H-G)/t,C=function(X){var q=X*x,P=e1(G),I=d/(i*A)*(P*x9(t*q+G)-E9(G));return[h+I*_,f+I*S,d*P/e1(t*q+G)]}}return C.duration=x*1e3*t/Math.SQRT2,C}return l.rho=function(o){var u=Math.max(.001,+o),h=u*u,f=h*h;return e(u,h,f)},l})(Math.SQRT2,2,4);function nS(e,t){t===void 0&&(t=e,e=uh);for(var i=0,s=t.length-1,l=t[0],o=new Array(s<0?0:s);i<s;)o[i]=e(l,l=t[++i]);return function(u){var h=Math.max(0,Math.min(s-1,Math.floor(u*=s)));return o[h](u-h)}}var ys=0,gl=0,al=0,U2=1e3,ro,ml,oo=0,ma=0,bo=0,Cl=typeof performance=="object"&&performance.now?performance:Date,L2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ch(){return ma||(L2(C9),ma=Cl.now()+bo)}function C9(){ma=0}function uo(){this._call=this._time=this._next=null}uo.prototype=Y2.prototype={constructor:uo,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?ch():+i)+(t==null?0:+t),!this._next&&ml!==this&&(ml?ml._next=this:ro=this,ml=this),this._call=e,this._time=i,Vc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vc())}};function Y2(e,t,i){var s=new uo;return s.restart(e,t,i),s}function T9(){ch(),++ys;for(var e=ro,t;e;)(t=ma-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ys}function n1(){ma=(oo=Cl.now())+bo,ys=gl=0;try{T9()}finally{ys=0,A9(),ma=0}}function N9(){var e=Cl.now(),t=e-oo;t>U2&&(bo-=t,oo=e)}function A9(){for(var e,t=ro,i,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:ro=i);ml=e,Vc(s)}function Vc(e){if(!ys){gl&&(gl=clearTimeout(gl));var t=e-ma;t>24?(e<1/0&&(gl=setTimeout(n1,e-Cl.now()-bo)),al&&(al=clearInterval(al))):(al||(oo=Cl.now(),al=setInterval(N9,U2)),ys=1,L2(n1))}}function i1(e,t,i){var s=new uo;return t=t==null?0:+t,s.restart(l=>{s.stop(),e(l+t)},t,i),s}var M9=Eo("start","end","cancel","interrupt"),R9=[],X2=0,a1=1,qc=2,Wr=3,s1=4,Pc=5,$r=6;function Co(e,t,i,s,l,o){var u=e.__transition;if(!u)e.__transition={};else if(i in u)return;w9(e,i,{name:t,index:s,group:l,on:M9,tween:R9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:X2})}function hh(e,t){var i=Nn(e,t);if(i.state>X2)throw new Error("too late; already scheduled");return i}function qn(e,t){var i=Nn(e,t);if(i.state>Wr)throw new Error("too late; already running");return i}function Nn(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function w9(e,t,i){var s=e.__transition,l;s[t]=i,i.timer=Y2(o,0,i.time);function o(d){i.state=a1,i.timer.restart(u,i.delay,i.time),i.delay<=d&&u(d-i.delay)}function u(d){var m,y,v,_;if(i.state!==a1)return f();for(m in s)if(_=s[m],_.name===i.name){if(_.state===Wr)return i1(u);_.state===s1?(_.state=$r,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete s[m]):+m<t&&(_.state=$r,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete s[m])}if(i1(function(){i.state===Wr&&(i.state=s1,i.timer.restart(h,i.delay,i.time),h(d))}),i.state=qc,i.on.call("start",e,e.__data__,i.index,i.group),i.state===qc){for(i.state=Wr,l=new Array(v=i.tween.length),m=0,y=-1;m<v;++m)(_=i.tween[m].value.call(e,e.__data__,i.index,i.group))&&(l[++y]=_);l.length=y+1}}function h(d){for(var m=d<i.duration?i.ease.call(null,d/i.duration):(i.timer.restart(f),i.state=Pc,1),y=-1,v=l.length;++y<v;)l[y].call(e,m);i.state===Pc&&(i.on.call("end",e,e.__data__,i.index,i.group),f())}function f(){i.state=$r,i.timer.stop(),delete s[t];for(var d in s)return;delete e.__transition}}function to(e,t){var i=e.__transition,s,l,o=!0,u;if(i){t=t==null?null:t+"";for(u in i){if((s=i[u]).name!==t){o=!1;continue}l=s.state>qc&&s.state<Pc,s.state=$r,s.timer.stop(),s.on.call(l?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete i[u]}o&&delete e.__transition}}function z9(e){return this.each(function(){to(this,e)})}function D9(e,t){var i,s;return function(){var l=qn(this,e),o=l.tween;if(o!==i){s=i=o;for(var u=0,h=s.length;u<h;++u)if(s[u].name===t){s=s.slice(),s.splice(u,1);break}}l.tween=s}}function O9(e,t,i){var s,l;if(typeof i!="function")throw new Error;return function(){var o=qn(this,e),u=o.tween;if(u!==s){l=(s=u).slice();for(var h={name:t,value:i},f=0,d=l.length;f<d;++f)if(l[f].name===t){l[f]=h;break}f===d&&l.push(h)}o.tween=l}}function H9(e,t){var i=this._id;if(e+="",arguments.length<2){for(var s=Nn(this.node(),i).tween,l=0,o=s.length,u;l<o;++l)if((u=s[l]).name===e)return u.value;return null}return this.each((t==null?D9:O9)(i,e,t))}function fh(e,t,i){var s=e._id;return e.each(function(){var l=qn(this,s);(l.value||(l.value={}))[t]=i.apply(this,arguments)}),function(l){return Nn(l,s).value[t]}}function V2(e,t){var i;return(typeof t=="number"?Yn:t instanceof ga?lo:(i=ga(t))?(t=i,lo):H2)(e,t)}function G9(e){return function(){this.removeAttribute(e)}}function B9(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U9(e,t,i){var s,l=i+"",o;return function(){var u=this.getAttribute(e);return u===l?null:u===s?o:o=t(s=u,i)}}function L9(e,t,i){var s,l=i+"",o;return function(){var u=this.getAttributeNS(e.space,e.local);return u===l?null:u===s?o:o=t(s=u,i)}}function Y9(e,t,i){var s,l,o;return function(){var u,h=i(this),f;return h==null?void this.removeAttribute(e):(u=this.getAttribute(e),f=h+"",u===f?null:u===s&&f===l?o:(l=f,o=t(s=u,h)))}}function X9(e,t,i){var s,l,o;return function(){var u,h=i(this),f;return h==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),f=h+"",u===f?null:u===s&&f===l?o:(l=f,o=t(s=u,h)))}}function V9(e,t){var i=xo(e),s=i==="transform"?_9:V2;return this.attrTween(e,typeof t=="function"?(i.local?X9:Y9)(i,s,fh(this,"attr."+e,t)):t==null?(i.local?B9:G9)(i):(i.local?L9:U9)(i,s,t))}function q9(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function P9(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function K9(e,t){var i,s;function l(){var o=t.apply(this,arguments);return o!==s&&(i=(s=o)&&P9(e,o)),i}return l._value=t,l}function Q9(e,t){var i,s;function l(){var o=t.apply(this,arguments);return o!==s&&(i=(s=o)&&q9(e,o)),i}return l._value=t,l}function Z9(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var s=xo(e);return this.tween(i,(s.local?K9:Q9)(s,t))}function k9(e,t){return function(){hh(this,e).delay=+t.apply(this,arguments)}}function j9(e,t){return t=+t,function(){hh(this,e).delay=t}}function F9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?k9:j9)(t,e)):Nn(this.node(),t).delay}function I9(e,t){return function(){qn(this,e).duration=+t.apply(this,arguments)}}function J9(e,t){return t=+t,function(){qn(this,e).duration=t}}function W9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?I9:J9)(t,e)):Nn(this.node(),t).duration}function $9(e,t){if(typeof t!="function")throw new Error;return function(){qn(this,e).ease=t}}function tv(e){var t=this._id;return arguments.length?this.each($9(t,e)):Nn(this.node(),t).ease}function ev(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;qn(this,e).ease=i}}function nv(e){if(typeof e!="function")throw new Error;return this.each(ev(this._id,e))}function iv(e){typeof e!="function"&&(e=_2(e));for(var t=this._groups,i=t.length,s=new Array(i),l=0;l<i;++l)for(var o=t[l],u=o.length,h=s[l]=[],f,d=0;d<u;++d)(f=o[d])&&e.call(f,f.__data__,d,o)&&h.push(f);return new ui(s,this._parents,this._name,this._id)}function av(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,s=t.length,l=i.length,o=Math.min(s,l),u=new Array(s),h=0;h<o;++h)for(var f=t[h],d=i[h],m=f.length,y=u[h]=new Array(m),v,_=0;_<m;++_)(v=f[_]||d[_])&&(y[_]=v);for(;h<s;++h)u[h]=t[h];return new ui(u,this._parents,this._name,this._id)}function sv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function lv(e,t,i){var s,l,o=sv(t)?hh:qn;return function(){var u=o(this,e),h=u.on;h!==s&&(l=(s=h).copy()).on(t,i),u.on=l}}function rv(e,t){var i=this._id;return arguments.length<2?Nn(this.node(),i).on.on(e):this.each(lv(i,e,t))}function ov(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function uv(){return this.on("end.remove",ov(this._id))}function cv(e){var t=this._name,i=this._id;typeof e!="function"&&(e=sh(e));for(var s=this._groups,l=s.length,o=new Array(l),u=0;u<l;++u)for(var h=s[u],f=h.length,d=o[u]=new Array(f),m,y,v=0;v<f;++v)(m=h[v])&&(y=e.call(m,m.__data__,v,h))&&("__data__"in m&&(y.__data__=m.__data__),d[v]=y,Co(d[v],t,i,v,d,Nn(m,i)));return new ui(o,this._parents,t,i)}function hv(e){var t=this._name,i=this._id;typeof e!="function"&&(e=v2(e));for(var s=this._groups,l=s.length,o=[],u=[],h=0;h<l;++h)for(var f=s[h],d=f.length,m,y=0;y<d;++y)if(m=f[y]){for(var v=e.call(m,m.__data__,y,f),_,S=Nn(m,i),b=0,C=v.length;b<C;++b)(_=v[b])&&Co(_,t,i,b,v,S);o.push(v),u.push(m)}return new ui(o,u,t,i)}var fv=Ml.prototype.constructor;function dv(){return new fv(this._groups,this._parents)}function gv(e,t){var i,s,l;return function(){var o=ps(this,e),u=(this.style.removeProperty(e),ps(this,e));return o===u?null:o===i&&u===s?l:l=t(i=o,s=u)}}function q2(e){return function(){this.style.removeProperty(e)}}function mv(e,t,i){var s,l=i+"",o;return function(){var u=ps(this,e);return u===l?null:u===s?o:o=t(s=u,i)}}function pv(e,t,i){var s,l,o;return function(){var u=ps(this,e),h=i(this),f=h+"";return h==null&&(f=h=(this.style.removeProperty(e),ps(this,e))),u===f?null:u===s&&f===l?o:(l=f,o=t(s=u,h))}}function yv(e,t){var i,s,l,o="style."+t,u="end."+o,h;return function(){var f=qn(this,e),d=f.on,m=f.value[o]==null?h||(h=q2(t)):void 0;(d!==i||l!==m)&&(s=(i=d).copy()).on(u,l=m),f.on=s}}function vv(e,t,i){var s=(e+="")=="transform"?v9:V2;return t==null?this.styleTween(e,gv(e,s)).on("end.style."+e,q2(e)):typeof t=="function"?this.styleTween(e,pv(e,s,fh(this,"style."+e,t))).each(yv(this._id,e)):this.styleTween(e,mv(e,s,t),i).on("end.style."+e,null)}function _v(e,t,i){return function(s){this.style.setProperty(e,t.call(this,s),i)}}function Sv(e,t,i){var s,l;function o(){var u=t.apply(this,arguments);return u!==l&&(s=(l=u)&&_v(e,u,i)),s}return o._value=t,o}function Ev(e,t,i){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,Sv(e,t,i??""))}function xv(e){return function(){this.textContent=e}}function bv(e){return function(){var t=e(this);this.textContent=t??""}}function Cv(e){return this.tween("text",typeof e=="function"?bv(fh(this,"text",e)):xv(e==null?"":e+""))}function Tv(e){return function(t){this.textContent=e.call(this,t)}}function Nv(e){var t,i;function s(){var l=e.apply(this,arguments);return l!==i&&(t=(i=l)&&Tv(l)),t}return s._value=e,s}function Av(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Nv(e))}function Mv(){for(var e=this._name,t=this._id,i=P2(),s=this._groups,l=s.length,o=0;o<l;++o)for(var u=s[o],h=u.length,f,d=0;d<h;++d)if(f=u[d]){var m=Nn(f,t);Co(f,e,i,d,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ui(s,this._parents,e,i)}function Rv(){var e,t,i=this,s=i._id,l=i.size();return new Promise(function(o,u){var h={value:u},f={value:function(){--l===0&&o()}};i.each(function(){var d=qn(this,s),m=d.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(h),t._.interrupt.push(h),t._.end.push(f)),d.on=t}),l===0&&o()})}var wv=0;function ui(e,t,i,s){this._groups=e,this._parents=t,this._name=i,this._id=s}function P2(){return++wv}var li=Ml.prototype;ui.prototype={constructor:ui,select:cv,selectAll:hv,selectChild:li.selectChild,selectChildren:li.selectChildren,filter:iv,merge:av,selection:dv,transition:Mv,call:li.call,nodes:li.nodes,node:li.node,size:li.size,empty:li.empty,each:li.each,on:rv,attr:V9,attrTween:Z9,style:vv,styleTween:Ev,text:Cv,textTween:Av,remove:uv,tween:H9,delay:F9,duration:W9,ease:tv,easeVarying:nv,end:Rv,[Symbol.iterator]:li[Symbol.iterator]};function zv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dv={time:null,delay:0,duration:250,ease:zv};function Ov(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Hv(e){var t,i;e instanceof ui?(t=e._id,e=e._name):(t=P2(),(i=Dv).time=ch(),e=e==null?null:e+"");for(var s=this._groups,l=s.length,o=0;o<l;++o)for(var u=s[o],h=u.length,f,d=0;d<h;++d)(f=u[d])&&Co(f,e,t,d,u,i||Ov(f,t));return new ui(s,this._parents,e,t)}Ml.prototype.interrupt=z9;Ml.prototype.transition=Hv;const Kr=e=>()=>e;function Gv(e,{sourceEvent:t,target:i,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function oi(e,t,i){this.k=e,this.x=t,this.y=i}oi.prototype={constructor:oi,scale:function(e){return e===1?this:new oi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oi=new oi(1,0,0);oi.prototype;function _c(e){e.stopImmediatePropagation()}function sl(e){e.preventDefault(),e.stopImmediatePropagation()}function Bv(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Uv(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function l1(){return this.__zoom||Oi}function Lv(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xv(e,t,i){var s=e.invertX(t[0][0])-i[0][0],l=e.invertX(t[1][0])-i[1][0],o=e.invertY(t[0][1])-i[0][1],u=e.invertY(t[1][1])-i[1][1];return e.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function Vv(){var e=Bv,t=Uv,i=Xv,s=Lv,l=Yv,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],h=250,f=b9,d=Eo("start","zoom","end"),m,y,v,_=500,S=150,b=0,C=10;function x(T){T.property("__zoom",l1).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",I).filter(l).on("touchstart.zoom",J).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(T,O,N,Y){var B=T.selection?T.selection():T;B.property("__zoom",l1),T!==B?G(T,O,N,Y):B.interrupt().each(function(){H(this,arguments).event(Y).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},x.scaleBy=function(T,O,N,Y){x.scaleTo(T,function(){var B=this.__zoom.k,D=typeof O=="function"?O.apply(this,arguments):O;return B*D},N,Y)},x.scaleTo=function(T,O,N,Y){x.transform(T,function(){var B=t.apply(this,arguments),D=this.__zoom,K=N==null?M(B):typeof N=="function"?N.apply(this,arguments):N,F=D.invert(K),tt=typeof O=="function"?O.apply(this,arguments):O;return i(w(A(D,tt),K,F),B,u)},N,Y)},x.translateBy=function(T,O,N,Y){x.transform(T,function(){return i(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),u)},null,Y)},x.translateTo=function(T,O,N,Y,B){x.transform(T,function(){var D=t.apply(this,arguments),K=this.__zoom,F=Y==null?M(D):typeof Y=="function"?Y.apply(this,arguments):Y;return i(Oi.translate(F[0],F[1]).scale(K.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof N=="function"?-N.apply(this,arguments):-N),D,u)},Y,B)};function A(T,O){return O=Math.max(o[0],Math.min(o[1],O)),O===T.k?T:new oi(O,T.x,T.y)}function w(T,O,N){var Y=O[0]-N[0]*T.k,B=O[1]-N[1]*T.k;return Y===T.x&&B===T.y?T:new oi(T.k,Y,B)}function M(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function G(T,O,N,Y){T.on("start.zoom",function(){H(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(Y).end()}).tween("zoom",function(){var B=this,D=arguments,K=H(B,D).event(Y),F=t.apply(B,D),tt=N==null?M(F):typeof N=="function"?N.apply(B,D):N,ut=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),ct=B.__zoom,gt=typeof O=="function"?O.apply(B,D):O,St=f(ct.invert(tt).concat(ut/ct.k),gt.invert(tt).concat(ut/gt.k));return function(Rt){if(Rt===1)Rt=gt;else{var wt=St(Rt),zt=ut/wt[2];Rt=new oi(zt,tt[0]-wt[0]*zt,tt[1]-wt[1]*zt)}K.zoom(null,Rt)}})}function H(T,O,N){return!N&&T.__zooming||new X(T,O)}function X(T,O){this.that=T,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,O),this.taps=0}X.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,O){return this.mouse&&T!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var O=xn(this.that).datum();d.call(T,this.that,new Gv(T,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:d}),O)}};function q(T,...O){if(!e.apply(this,arguments))return;var N=H(this,O).event(T),Y=this.__zoom,B=Math.max(o[0],Math.min(o[1],Y.k*Math.pow(2,s.apply(this,arguments)))),D=Ln(T);if(N.wheel)(N.mouse[0][0]!==D[0]||N.mouse[0][1]!==D[1])&&(N.mouse[1]=Y.invert(N.mouse[0]=D)),clearTimeout(N.wheel);else{if(Y.k===B)return;N.mouse=[D,Y.invert(D)],to(this),N.start()}sl(T),N.wheel=setTimeout(K,S),N.zoom("mouse",i(w(A(Y,B),N.mouse[0],N.mouse[1]),N.extent,u));function K(){N.wheel=null,N.end()}}function P(T,...O){if(v||!e.apply(this,arguments))return;var N=T.currentTarget,Y=H(this,O,!0).event(T),B=xn(T.view).on("mousemove.zoom",tt,!0).on("mouseup.zoom",ut,!0),D=Ln(T,N),K=T.clientX,F=T.clientY;R2(T.view),_c(T),Y.mouse=[D,this.__zoom.invert(D)],to(this),Y.start();function tt(ct){if(sl(ct),!Y.moved){var gt=ct.clientX-K,St=ct.clientY-F;Y.moved=gt*gt+St*St>b}Y.event(ct).zoom("mouse",i(w(Y.that.__zoom,Y.mouse[0]=Ln(ct,N),Y.mouse[1]),Y.extent,u))}function ut(ct){B.on("mousemove.zoom mouseup.zoom",null),w2(ct.view,Y.moved),sl(ct),Y.event(ct).end()}}function I(T,...O){if(e.apply(this,arguments)){var N=this.__zoom,Y=Ln(T.changedTouches?T.changedTouches[0]:T,this),B=N.invert(Y),D=N.k*(T.shiftKey?.5:2),K=i(w(A(N,D),Y,B),t.apply(this,O),u);sl(T),h>0?xn(this).transition().duration(h).call(G,K,Y,T):xn(this).call(x.transform,K,Y,T)}}function J(T,...O){if(e.apply(this,arguments)){var N=T.touches,Y=N.length,B=H(this,O,T.changedTouches.length===Y).event(T),D,K,F,tt;for(_c(T),K=0;K<Y;++K)F=N[K],tt=Ln(F,this),tt=[tt,this.__zoom.invert(tt),F.identifier],B.touch0?!B.touch1&&B.touch0[2]!==tt[2]&&(B.touch1=tt,B.taps=0):(B.touch0=tt,D=!0,B.taps=1+!!m);m&&(m=clearTimeout(m)),D&&(B.taps<2&&(y=tt[0],m=setTimeout(function(){m=null},_)),to(this),B.start())}}function j(T,...O){if(this.__zooming){var N=H(this,O).event(T),Y=T.changedTouches,B=Y.length,D,K,F,tt;for(sl(T),D=0;D<B;++D)K=Y[D],F=Ln(K,this),N.touch0&&N.touch0[2]===K.identifier?N.touch0[0]=F:N.touch1&&N.touch1[2]===K.identifier&&(N.touch1[0]=F);if(K=N.that.__zoom,N.touch1){var ut=N.touch0[0],ct=N.touch0[1],gt=N.touch1[0],St=N.touch1[1],Rt=(Rt=gt[0]-ut[0])*Rt+(Rt=gt[1]-ut[1])*Rt,wt=(wt=St[0]-ct[0])*wt+(wt=St[1]-ct[1])*wt;K=A(K,Math.sqrt(Rt/wt)),F=[(ut[0]+gt[0])/2,(ut[1]+gt[1])/2],tt=[(ct[0]+St[0])/2,(ct[1]+St[1])/2]}else if(N.touch0)F=N.touch0[0],tt=N.touch0[1];else return;N.zoom("touch",i(w(K,F,tt),N.extent,u))}}function W(T,...O){if(this.__zooming){var N=H(this,O).event(T),Y=T.changedTouches,B=Y.length,D,K;for(_c(T),v&&clearTimeout(v),v=setTimeout(function(){v=null},_),D=0;D<B;++D)K=Y[D],N.touch0&&N.touch0[2]===K.identifier?delete N.touch0:N.touch1&&N.touch1[2]===K.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(K=Ln(K,this),Math.hypot(y[0]-K[0],y[1]-K[1])<C)){var F=xn(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return x.wheelDelta=function(T){return arguments.length?(s=typeof T=="function"?T:Kr(+T),x):s},x.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Kr(!!T),x):e},x.touchable=function(T){return arguments.length?(l=typeof T=="function"?T:Kr(!!T),x):l},x.extent=function(T){return arguments.length?(t=typeof T=="function"?T:Kr([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),x):t},x.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],x):[o[0],o[1]]},x.translateExtent=function(T){return arguments.length?(u[0][0]=+T[0][0],u[1][0]=+T[1][0],u[0][1]=+T[0][1],u[1][1]=+T[1][1],x):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},x.constrain=function(T){return arguments.length?(i=T,x):i},x.duration=function(T){return arguments.length?(h=+T,x):h},x.interpolate=function(T){return arguments.length?(f=T,x):f},x.on=function(){var T=d.on.apply(d,arguments);return T===d?x:T},x.clickDistance=function(T){return arguments.length?(b=(T=+T)*T,x):Math.sqrt(b)},x.tapDistance=function(T){return arguments.length?(C=+T,x):C},x}const To=k.createContext(null),qv=To.Provider,ci={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},K2=ci.error001();function te(e,t){const i=k.useContext(To);if(i===null)throw new Error(K2);return p2(i,e,t)}const be=()=>{const e=k.useContext(To);if(e===null)throw new Error(K2);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Pv=e=>e.userSelectionActive?"none":"all";function Kv({position:e,children:t,className:i,style:s,...l}){const o=te(Pv),u=`${e}`.split("-");return $.createElement("div",{className:en(["react-flow__panel",i,...u]),style:{...s,pointerEvents:o},...l},t)}function Qv({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:$.createElement(Kv,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},$.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Zv=({x:e,y:t,label:i,labelStyle:s={},labelShowBg:l=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:h=2,children:f,className:d,...m})=>{const y=k.useRef(null),[v,_]=k.useState({x:0,y:0,width:0,height:0}),S=en(["react-flow__edge-textwrapper",d]);return k.useEffect(()=>{if(y.current){const b=y.current.getBBox();_({x:b.x,y:b.y,width:b.width,height:b.height})}},[i]),typeof i>"u"||!i?null:$.createElement("g",{transform:`translate(${e-v.width/2} ${t-v.height/2})`,className:S,visibility:v.width?"visible":"hidden",...m},l&&$.createElement("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:h,ry:h}),$.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:y,style:s},i),f)};var kv=k.memo(Zv);const dh=e=>({width:e.offsetWidth,height:e.offsetHeight}),vs=(e,t=0,i=1)=>Math.min(Math.max(e,t),i),gh=(e={x:0,y:0},t)=>({x:vs(e.x,t[0][0],t[1][0]),y:vs(e.y,t[0][1],t[1][1])}),r1=(e,t,i)=>e<t?vs(Math.abs(e-t),1,50)/50:e>i?-vs(Math.abs(e-i),1,50)/50:0,Q2=(e,t)=>{const i=r1(e.x,35,t.width-35)*20,s=r1(e.y,35,t.height-35)*20;return[i,s]},Z2=e=>e.getRootNode?.()||window?.document,jv=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),mh=({x:e,y:t,width:i,height:s})=>({x:e,y:t,x2:e+i,y2:t+s}),Fv=({x:e,y:t,x2:i,y2:s})=>({x:e,y:t,width:i-e,height:s-t}),o1=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Kc=(e,t)=>{const i=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(i*s)},Iv=e=>hn(e.width)&&hn(e.height)&&hn(e.x)&&hn(e.y),hn=e=>!isNaN(e)&&isFinite(e),$t=Symbol.for("internals"),k2=["Enter"," ","Escape"],Jv=(e,t)=>{},Wv=e=>"nativeEvent"in e;function Qc(e){const i=(Wv(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(i?.nodeName)||i?.hasAttribute("contenteditable")||!!i?.closest(".nokey")}const j2=e=>"clientX"in e,Hi=(e,t)=>{const i=j2(e),s=i?e.clientX:e.touches?.[0].clientX,l=i?e.clientY:e.touches?.[0].clientY;return{x:s-(t?.left??0),y:l-(t?.top??0)}},co=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,wl=({id:e,path:t,labelX:i,labelY:s,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:y,markerStart:v,interactionWidth:_=20})=>$.createElement($.Fragment,null,$.createElement("path",{id:e,style:m,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:v}),_&&$.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}),l&&hn(i)&&hn(s)?$.createElement(kv,{x:i,y:s,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d}):null);wl.displayName="BaseEdge";function ll(e,t,i){return i===void 0?i:s=>{const l=t().edges.find(o=>o.id===e);l&&i(s,{...l})}}function F2({sourceX:e,sourceY:t,targetX:i,targetY:s}){const l=Math.abs(i-e)/2,o=i<e?i+l:i-l,u=Math.abs(s-t)/2,h=s<t?s+u:s-u;return[o,h,l,u]}function I2({sourceX:e,sourceY:t,targetX:i,targetY:s,sourceControlX:l,sourceControlY:o,targetControlX:u,targetControlY:h}){const f=e*.125+l*.375+u*.375+i*.125,d=t*.125+o*.375+h*.375+s*.125,m=Math.abs(f-e),y=Math.abs(d-t);return[f,d,m,y]}var pa;(function(e){e.Strict="strict",e.Loose="loose"})(pa||(pa={}));var fa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(fa||(fa={}));var Tl;(function(e){e.Partial="partial",e.Full="full"})(Tl||(Tl={}));var Di;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Di||(Di={}));var ho;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ho||(ho={}));var dt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(dt||(dt={}));function u1({pos:e,x1:t,y1:i,x2:s,y2:l}){return e===dt.Left||e===dt.Right?[.5*(t+s),i]:[t,.5*(i+l)]}function J2({sourceX:e,sourceY:t,sourcePosition:i=dt.Bottom,targetX:s,targetY:l,targetPosition:o=dt.Top}){const[u,h]=u1({pos:i,x1:e,y1:t,x2:s,y2:l}),[f,d]=u1({pos:o,x1:s,y1:l,x2:e,y2:t}),[m,y,v,_]=I2({sourceX:e,sourceY:t,targetX:s,targetY:l,sourceControlX:u,sourceControlY:h,targetControlX:f,targetControlY:d});return[`M${e},${t} C${u},${h} ${f},${d} ${s},${l}`,m,y,v,_]}const ph=k.memo(({sourceX:e,sourceY:t,targetX:i,targetY:s,sourcePosition:l=dt.Bottom,targetPosition:o=dt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:y,style:v,markerEnd:_,markerStart:S,interactionWidth:b})=>{const[C,x,A]=J2({sourceX:e,sourceY:t,sourcePosition:l,targetX:i,targetY:s,targetPosition:o});return $.createElement(wl,{path:C,labelX:x,labelY:A,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:y,style:v,markerEnd:_,markerStart:S,interactionWidth:b})});ph.displayName="SimpleBezierEdge";const c1={[dt.Left]:{x:-1,y:0},[dt.Right]:{x:1,y:0},[dt.Top]:{x:0,y:-1},[dt.Bottom]:{x:0,y:1}},$v=({source:e,sourcePosition:t=dt.Bottom,target:i})=>t===dt.Left||t===dt.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},h1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function t7({source:e,sourcePosition:t=dt.Bottom,target:i,targetPosition:s=dt.Top,center:l,offset:o}){const u=c1[t],h=c1[s],f={x:e.x+u.x*o,y:e.y+u.y*o},d={x:i.x+h.x*o,y:i.y+h.y*o},m=$v({source:f,sourcePosition:t,target:d}),y=m.x!==0?"x":"y",v=m[y];let _=[],S,b;const C={x:0,y:0},x={x:0,y:0},[A,w,M,G]=F2({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(u[y]*h[y]===-1){S=l.x??A,b=l.y??w;const X=[{x:S,y:f.y},{x:S,y:d.y}],q=[{x:f.x,y:b},{x:d.x,y:b}];u[y]===v?_=y==="x"?X:q:_=y==="x"?q:X}else{const X=[{x:f.x,y:d.y}],q=[{x:d.x,y:f.y}];if(y==="x"?_=u.x===v?q:X:_=u.y===v?X:q,t===s){const W=Math.abs(e[y]-i[y]);if(W<=o){const T=Math.min(o-1,o-W);u[y]===v?C[y]=(f[y]>e[y]?-1:1)*T:x[y]=(d[y]>i[y]?-1:1)*T}}if(t!==s){const W=y==="x"?"y":"x",T=u[y]===h[W],O=f[W]>d[W],N=f[W]<d[W];(u[y]===1&&(!T&&O||T&&N)||u[y]!==1&&(!T&&N||T&&O))&&(_=y==="x"?X:q)}const P={x:f.x+C.x,y:f.y+C.y},I={x:d.x+x.x,y:d.y+x.y},J=Math.max(Math.abs(P.x-_[0].x),Math.abs(I.x-_[0].x)),j=Math.max(Math.abs(P.y-_[0].y),Math.abs(I.y-_[0].y));J>=j?(S=(P.x+I.x)/2,b=_[0].y):(S=_[0].x,b=(P.y+I.y)/2)}return[[e,{x:f.x+C.x,y:f.y+C.y},..._,{x:d.x+x.x,y:d.y+x.y},i],S,b,M,G]}function e7(e,t,i,s){const l=Math.min(h1(e,t)/2,h1(t,i)/2,s),{x:o,y:u}=t;if(e.x===o&&o===i.x||e.y===u&&u===i.y)return`L${o} ${u}`;if(e.y===u){const d=e.x<i.x?-1:1,m=e.y<i.y?1:-1;return`L ${o+l*d},${u}Q ${o},${u} ${o},${u+l*m}`}const h=e.x<i.x?1:-1,f=e.y<i.y?-1:1;return`L ${o},${u+l*f}Q ${o},${u} ${o+l*h},${u}`}function Zc({sourceX:e,sourceY:t,sourcePosition:i=dt.Bottom,targetX:s,targetY:l,targetPosition:o=dt.Top,borderRadius:u=5,centerX:h,centerY:f,offset:d=20}){const[m,y,v,_,S]=t7({source:{x:e,y:t},sourcePosition:i,target:{x:s,y:l},targetPosition:o,center:{x:h,y:f},offset:d});return[m.reduce((C,x,A)=>{let w="";return A>0&&A<m.length-1?w=e7(m[A-1],x,m[A+1],u):w=`${A===0?"M":"L"}${x.x} ${x.y}`,C+=w,C},""),y,v,_,S]}const No=k.memo(({sourceX:e,sourceY:t,targetX:i,targetY:s,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:m,sourcePosition:y=dt.Bottom,targetPosition:v=dt.Top,markerEnd:_,markerStart:S,pathOptions:b,interactionWidth:C})=>{const[x,A,w]=Zc({sourceX:e,sourceY:t,sourcePosition:y,targetX:i,targetY:s,targetPosition:v,borderRadius:b?.borderRadius,offset:b?.offset});return $.createElement(wl,{path:x,labelX:A,labelY:w,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:_,markerStart:S,interactionWidth:C})});No.displayName="SmoothStepEdge";const yh=k.memo(e=>$.createElement(No,{...e,pathOptions:k.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));yh.displayName="StepEdge";function n7({sourceX:e,sourceY:t,targetX:i,targetY:s}){const[l,o,u,h]=F2({sourceX:e,sourceY:t,targetX:i,targetY:s});return[`M ${e},${t}L ${i},${s}`,l,o,u,h]}const vh=k.memo(({sourceX:e,sourceY:t,targetX:i,targetY:s,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:y,markerStart:v,interactionWidth:_})=>{const[S,b,C]=n7({sourceX:e,sourceY:t,targetX:i,targetY:s});return $.createElement(wl,{path:S,labelX:b,labelY:C,label:l,labelStyle:o,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:y,markerStart:v,interactionWidth:_})});vh.displayName="StraightEdge";function Qr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function f1({pos:e,x1:t,y1:i,x2:s,y2:l,c:o}){switch(e){case dt.Left:return[t-Qr(t-s,o),i];case dt.Right:return[t+Qr(s-t,o),i];case dt.Top:return[t,i-Qr(i-l,o)];case dt.Bottom:return[t,i+Qr(l-i,o)]}}function W2({sourceX:e,sourceY:t,sourcePosition:i=dt.Bottom,targetX:s,targetY:l,targetPosition:o=dt.Top,curvature:u=.25}){const[h,f]=f1({pos:i,x1:e,y1:t,x2:s,y2:l,c:u}),[d,m]=f1({pos:o,x1:s,y1:l,x2:e,y2:t,c:u}),[y,v,_,S]=I2({sourceX:e,sourceY:t,targetX:s,targetY:l,sourceControlX:h,sourceControlY:f,targetControlX:d,targetControlY:m});return[`M${e},${t} C${h},${f} ${d},${m} ${s},${l}`,y,v,_,S]}const fo=k.memo(({sourceX:e,sourceY:t,targetX:i,targetY:s,sourcePosition:l=dt.Bottom,targetPosition:o=dt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:y,style:v,markerEnd:_,markerStart:S,pathOptions:b,interactionWidth:C})=>{const[x,A,w]=W2({sourceX:e,sourceY:t,sourcePosition:l,targetX:i,targetY:s,targetPosition:o,curvature:b?.curvature});return $.createElement(wl,{path:x,labelX:A,labelY:w,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:y,style:v,markerEnd:_,markerStart:S,interactionWidth:C})});fo.displayName="BezierEdge";const _h=k.createContext(null),i7=_h.Provider;_h.Consumer;const a7=()=>k.useContext(_h),s7=e=>"id"in e&&"source"in e&&"target"in e,l7=({source:e,sourceHandle:t,target:i,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${i}${s||""}`,kc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,r7=(e,t)=>t.some(i=>i.source===e.source&&i.target===e.target&&(i.sourceHandle===e.sourceHandle||!i.sourceHandle&&!e.sourceHandle)&&(i.targetHandle===e.targetHandle||!i.targetHandle&&!e.targetHandle)),o7=(e,t)=>{if(!e.source||!e.target)return t;let i;return s7(e)?i={...e}:i={...e,id:l7(e)},r7(i,t)?t:t.concat(i)},jc=({x:e,y:t},[i,s,l],o,[u,h])=>{const f={x:(e-i)/l,y:(t-s)/l};return o?{x:u*Math.round(f.x/u),y:h*Math.round(f.y/h)}:f},$2=({x:e,y:t},[i,s,l])=>({x:e*l+i,y:t*l+s}),fs=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const i=(e.width??0)*t[0],s=(e.height??0)*t[1],l={x:e.position.x-i,y:e.position.y-s};return{...l,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-i,y:e.positionAbsolute.y-s}:l}},Sh=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const i=e.reduce((s,l)=>{const{x:o,y:u}=fs(l,t).positionAbsolute;return jv(s,mh({x:o,y:u,width:l.width||0,height:l.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Fv(i)},tg=(e,t,[i,s,l]=[0,0,1],o=!1,u=!1,h=[0,0])=>{const f={x:(t.x-i)/l,y:(t.y-s)/l,width:t.width/l,height:t.height/l},d=[];return e.forEach(m=>{const{width:y,height:v,selectable:_=!0,hidden:S=!1}=m;if(u&&!_||S)return!1;const{positionAbsolute:b}=fs(m,h),C={x:b.x,y:b.y,width:y||0,height:v||0},x=Kc(f,C),A=typeof y>"u"||typeof v>"u"||y===null||v===null,w=o&&x>0,M=(y||0)*(v||0);(A||w||x>=M||m.dragging)&&d.push(m)}),d},eg=(e,t)=>{const i=e.map(s=>s.id);return t.filter(s=>i.includes(s.source)||i.includes(s.target))},ng=(e,t,i,s,l,o=.1)=>{const u=t/(e.width*(1+o)),h=i/(e.height*(1+o)),f=Math.min(u,h),d=vs(f,s,l),m=e.x+e.width/2,y=e.y+e.height/2,v=t/2-m*d,_=i/2-y*d;return{x:v,y:_,zoom:d}},ua=(e,t=0)=>e.transition().duration(t);function d1(e,t,i,s){return(t[i]||[]).reduce((l,o)=>(`${e.id}-${o.id}-${i}`!==s&&l.push({id:o.id||null,type:i,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),l),[])}function u7(e,t,i,s,l,o){const{x:u,y:h}=Hi(e),d=t.elementsFromPoint(u,h).find(S=>S.classList.contains("react-flow__handle"));if(d){const S=d.getAttribute("data-nodeid");if(S){const b=Eh(void 0,d),C=d.getAttribute("data-handleid"),x=o({nodeId:S,id:C,type:b});if(x){const A=l.find(w=>w.nodeId===S&&w.type===b&&w.id===C);return{handle:{id:C,type:b,nodeId:S,x:A?.x||i.x,y:A?.y||i.y},validHandleResult:x}}}}let m=[],y=1/0;if(l.forEach(S=>{const b=Math.sqrt((S.x-i.x)**2+(S.y-i.y)**2);if(b<=s){const C=o(S);b<=y&&(b<y?m=[{handle:S,validHandleResult:C}]:b===y&&m.push({handle:S,validHandleResult:C}),y=b)}}),!m.length)return{handle:null,validHandleResult:ig()};if(m.length===1)return m[0];const v=m.some(({validHandleResult:S})=>S.isValid),_=m.some(({handle:S})=>S.type==="target");return m.find(({handle:S,validHandleResult:b})=>_?S.type==="target":v?b.isValid:!0)||m[0]}const c7={source:null,target:null,sourceHandle:null,targetHandle:null},ig=()=>({handleDomNode:null,isValid:!1,connection:c7,endHandle:null});function ag(e,t,i,s,l,o,u){const h=l==="target",f=u.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),d={...ig(),handleDomNode:f};if(f){const m=Eh(void 0,f),y=f.getAttribute("data-nodeid"),v=f.getAttribute("data-handleid"),_=f.classList.contains("connectable"),S=f.classList.contains("connectableend"),b={source:h?y:i,sourceHandle:h?v:s,target:h?i:y,targetHandle:h?s:v};d.connection=b,_&&S&&(t===pa.Strict?h&&m==="source"||!h&&m==="target":y!==i||v!==s)&&(d.endHandle={nodeId:y,handleId:v,type:m},d.isValid=o(b))}return d}function h7({nodes:e,nodeId:t,handleId:i,handleType:s}){return e.reduce((l,o)=>{if(o[$t]){const{handleBounds:u}=o[$t];let h=[],f=[];u&&(h=d1(o,u,"source",`${t}-${i}-${s}`),f=d1(o,u,"target",`${t}-${i}-${s}`)),l.push(...h,...f)}return l},[])}function Eh(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Sc(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function f7(e,t){let i=null;return t?i="valid":e&&!t&&(i="invalid"),i}function sg({event:e,handleId:t,nodeId:i,onConnect:s,isTarget:l,getState:o,setState:u,isValidConnection:h,edgeUpdaterType:f,onReconnectEnd:d}){const m=Z2(e.target),{connectionMode:y,domNode:v,autoPanOnConnect:_,connectionRadius:S,onConnectStart:b,panBy:C,getNodes:x,cancelConnection:A}=o();let w=0,M;const{x:G,y:H}=Hi(e),X=m?.elementFromPoint(G,H),q=Eh(f,X),P=v?.getBoundingClientRect();if(!P||!q)return;let I,J=Hi(e,P),j=!1,W=null,T=!1,O=null;const N=h7({nodes:x(),nodeId:i,handleId:t,handleType:q}),Y=()=>{if(!_)return;const[K,F]=Q2(J,P);C({x:K,y:F}),w=requestAnimationFrame(Y)};u({connectionPosition:J,connectionStatus:null,connectionNodeId:i,connectionHandleId:t,connectionHandleType:q,connectionStartHandle:{nodeId:i,handleId:t,type:q},connectionEndHandle:null}),b?.(e,{nodeId:i,handleId:t,handleType:q});function B(K){const{transform:F}=o();J=Hi(K,P);const{handle:tt,validHandleResult:ut}=u7(K,m,jc(J,F,!1,[1,1]),S,N,ct=>ag(ct,y,i,t,l?"target":"source",h,m));if(M=tt,j||(Y(),j=!0),O=ut.handleDomNode,W=ut.connection,T=ut.isValid,u({connectionPosition:M&&T?$2({x:M.x,y:M.y},F):J,connectionStatus:f7(!!M,T),connectionEndHandle:ut.endHandle}),!M&&!T&&!O)return Sc(I);W.source!==W.target&&O&&(Sc(I),I=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",T),O.classList.toggle("react-flow__handle-valid",T))}function D(K){(M||O)&&W&&T&&s?.(W),o().onConnectEnd?.(K),f&&d?.(K),Sc(I),A(),cancelAnimationFrame(w),j=!1,T=!1,W=null,O=null,m.removeEventListener("mousemove",B),m.removeEventListener("mouseup",D),m.removeEventListener("touchmove",B),m.removeEventListener("touchend",D)}m.addEventListener("mousemove",B),m.addEventListener("mouseup",D),m.addEventListener("touchmove",B),m.addEventListener("touchend",D)}const g1=()=>!0,d7=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),g7=(e,t,i)=>s=>{const{connectionStartHandle:l,connectionEndHandle:o,connectionClickStartHandle:u}=s;return{connecting:l?.nodeId===e&&l?.handleId===t&&l?.type===i||o?.nodeId===e&&o?.handleId===t&&o?.type===i,clickConnecting:u?.nodeId===e&&u?.handleId===t&&u?.type===i}},lg=k.forwardRef(({type:e="source",position:t=dt.Top,isValidConnection:i,isConnectable:s=!0,isConnectableStart:l=!0,isConnectableEnd:o=!0,id:u,onConnect:h,children:f,className:d,onMouseDown:m,onTouchStart:y,...v},_)=>{const S=u||null,b=e==="target",C=be(),x=a7(),{connectOnClick:A,noPanClassName:w}=te(d7,Ve),{connecting:M,clickConnecting:G}=te(g7(x,S,e),Ve);x||C.getState().onError?.("010",ci.error010());const H=P=>{const{defaultEdgeOptions:I,onConnect:J,hasDefaultEdges:j}=C.getState(),W={...I,...P};if(j){const{edges:T,setEdges:O}=C.getState();O(o7(W,T))}J?.(W),h?.(W)},X=P=>{if(!x)return;const I=j2(P);l&&(I&&P.button===0||!I)&&sg({event:P,handleId:S,nodeId:x,onConnect:H,isTarget:b,getState:C.getState,setState:C.setState,isValidConnection:i||C.getState().isValidConnection||g1}),I?m?.(P):y?.(P)},q=P=>{const{onClickConnectStart:I,onClickConnectEnd:J,connectionClickStartHandle:j,connectionMode:W,isValidConnection:T}=C.getState();if(!x||!j&&!l)return;if(!j){I?.(P,{nodeId:x,handleId:S,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:S}});return}const O=Z2(P.target),N=i||T||g1,{connection:Y,isValid:B}=ag({nodeId:x,id:S,type:e},W,j.nodeId,j.handleId||null,j.type,N,O);B&&H(Y),J?.(P),C.setState({connectionClickStartHandle:null})};return $.createElement("div",{"data-handleid":S,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${S}-${e}`,className:en(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,d,{source:!b,target:b,connectable:s,connectablestart:l,connectableend:o,connecting:G,connectionindicator:s&&(l&&!M||o&&M)}]),onMouseDown:X,onTouchStart:X,onClick:A?q:void 0,ref:_,...v},f)});lg.displayName="Handle";var go=k.memo(lg);const rg=({data:e,isConnectable:t,targetPosition:i=dt.Top,sourcePosition:s=dt.Bottom})=>$.createElement($.Fragment,null,$.createElement(go,{type:"target",position:i,isConnectable:t}),e?.label,$.createElement(go,{type:"source",position:s,isConnectable:t}));rg.displayName="DefaultNode";var Fc=k.memo(rg);const og=({data:e,isConnectable:t,sourcePosition:i=dt.Bottom})=>$.createElement($.Fragment,null,e?.label,$.createElement(go,{type:"source",position:i,isConnectable:t}));og.displayName="InputNode";var ug=k.memo(og);const cg=({data:e,isConnectable:t,targetPosition:i=dt.Top})=>$.createElement($.Fragment,null,$.createElement(go,{type:"target",position:i,isConnectable:t}),e?.label);cg.displayName="OutputNode";var hg=k.memo(cg);const xh=()=>null;xh.displayName="GroupNode";const m7=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Zr=e=>e.id;function p7(e,t){return Ve(e.selectedNodes.map(Zr),t.selectedNodes.map(Zr))&&Ve(e.selectedEdges.map(Zr),t.selectedEdges.map(Zr))}const fg=k.memo(({onSelectionChange:e})=>{const t=be(),{selectedNodes:i,selectedEdges:s}=te(m7,p7);return k.useEffect(()=>{const l={nodes:i,edges:s};e?.(l),t.getState().onSelectionChange.forEach(o=>o(l))},[i,s,e]),null});fg.displayName="SelectionListener";const y7=e=>!!e.onSelectionChange;function v7({onSelectionChange:e}){const t=te(y7);return e||t?$.createElement(fg,{onSelectionChange:e}):null}const _7=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function as(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Et(e,t,i){k.useEffect(()=>{typeof t<"u"&&i({[e]:t})},[t])}const S7=({nodes:e,edges:t,defaultNodes:i,defaultEdges:s,onConnect:l,onConnectStart:o,onConnectEnd:u,onClickConnectStart:h,onClickConnectEnd:f,nodesDraggable:d,nodesConnectable:m,nodesFocusable:y,edgesFocusable:v,edgesUpdatable:_,elevateNodesOnSelect:S,minZoom:b,maxZoom:C,nodeExtent:x,onNodesChange:A,onEdgesChange:w,elementsSelectable:M,connectionMode:G,snapGrid:H,snapToGrid:X,translateExtent:q,connectOnClick:P,defaultEdgeOptions:I,fitView:J,fitViewOptions:j,onNodesDelete:W,onEdgesDelete:T,onNodeDrag:O,onNodeDragStart:N,onNodeDragStop:Y,onSelectionDrag:B,onSelectionDragStart:D,onSelectionDragStop:K,noPanClassName:F,nodeOrigin:tt,rfId:ut,autoPanOnConnect:ct,autoPanOnNodeDrag:gt,onError:St,connectionRadius:Rt,isValidConnection:wt,nodeDragThreshold:zt})=>{const{setNodes:Ut,setEdges:De,setDefaultNodesAndEdges:re,setMinZoom:oe,setMaxZoom:Ce,setTranslateExtent:Pt,setNodeExtent:ue,reset:Nt}=te(_7,Ve),ft=be();return k.useEffect(()=>{const ye=s?.map(Oe=>({...Oe,...I}));return re(i,ye),()=>{Nt()}},[]),Et("defaultEdgeOptions",I,ft.setState),Et("connectionMode",G,ft.setState),Et("onConnect",l,ft.setState),Et("onConnectStart",o,ft.setState),Et("onConnectEnd",u,ft.setState),Et("onClickConnectStart",h,ft.setState),Et("onClickConnectEnd",f,ft.setState),Et("nodesDraggable",d,ft.setState),Et("nodesConnectable",m,ft.setState),Et("nodesFocusable",y,ft.setState),Et("edgesFocusable",v,ft.setState),Et("edgesUpdatable",_,ft.setState),Et("elementsSelectable",M,ft.setState),Et("elevateNodesOnSelect",S,ft.setState),Et("snapToGrid",X,ft.setState),Et("snapGrid",H,ft.setState),Et("onNodesChange",A,ft.setState),Et("onEdgesChange",w,ft.setState),Et("connectOnClick",P,ft.setState),Et("fitViewOnInit",J,ft.setState),Et("fitViewOnInitOptions",j,ft.setState),Et("onNodesDelete",W,ft.setState),Et("onEdgesDelete",T,ft.setState),Et("onNodeDrag",O,ft.setState),Et("onNodeDragStart",N,ft.setState),Et("onNodeDragStop",Y,ft.setState),Et("onSelectionDrag",B,ft.setState),Et("onSelectionDragStart",D,ft.setState),Et("onSelectionDragStop",K,ft.setState),Et("noPanClassName",F,ft.setState),Et("nodeOrigin",tt,ft.setState),Et("rfId",ut,ft.setState),Et("autoPanOnConnect",ct,ft.setState),Et("autoPanOnNodeDrag",gt,ft.setState),Et("onError",St,ft.setState),Et("connectionRadius",Rt,ft.setState),Et("isValidConnection",wt,ft.setState),Et("nodeDragThreshold",zt,ft.setState),as(e,Ut),as(t,De),as(b,oe),as(C,Ce),as(q,Pt),as(x,ue),null},m1={display:"none"},E7={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},dg="react-flow__node-desc",gg="react-flow__edge-desc",x7="react-flow__aria-live",b7=e=>e.ariaLiveMessage;function C7({rfId:e}){const t=te(b7);return $.createElement("div",{id:`${x7}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:E7},t)}function T7({rfId:e,disableKeyboardA11y:t}){return $.createElement($.Fragment,null,$.createElement("div",{id:`${dg}-${e}`,style:m1},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),$.createElement("div",{id:`${gg}-${e}`,style:m1},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&$.createElement(C7,{rfId:e}))}var Nl=(e=null,t={actInsideInputWithModifier:!0})=>{const[i,s]=k.useState(!1),l=k.useRef(!1),o=k.useRef(new Set([])),[u,h]=k.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=d.reduce((y,v)=>y.concat(...v),[]);return[d,m]}return[[],[]]},[e]);return k.useEffect(()=>{const f=typeof document<"u"?document:null,d=t?.target||f;if(e!==null){const m=_=>{if(l.current=_.ctrlKey||_.metaKey||_.shiftKey,(!l.current||l.current&&!t.actInsideInputWithModifier)&&Qc(_))return!1;const b=y1(_.code,h);o.current.add(_[b]),p1(u,o.current,!1)&&(_.preventDefault(),s(!0))},y=_=>{if((!l.current||l.current&&!t.actInsideInputWithModifier)&&Qc(_))return!1;const b=y1(_.code,h);p1(u,o.current,!0)?(s(!1),o.current.clear()):o.current.delete(_[b]),_.key==="Meta"&&o.current.clear(),l.current=!1},v=()=>{o.current.clear(),s(!1)};return d?.addEventListener("keydown",m),d?.addEventListener("keyup",y),window.addEventListener("blur",v),()=>{d?.removeEventListener("keydown",m),d?.removeEventListener("keyup",y),window.removeEventListener("blur",v)}}},[e,s]),i};function p1(e,t,i){return e.filter(s=>i||s.length===t.size).some(s=>s.every(l=>t.has(l)))}function y1(e,t){return t.includes(e)?"code":"key"}function mg(e,t,i,s){const l=e.parentNode||e.parentId;if(!l)return i;const o=t.get(l),u=fs(o,s);return mg(o,t,{x:(i.x??0)+u.x,y:(i.y??0)+u.y,z:(o[$t]?.z??0)>(i.z??0)?o[$t]?.z??0:i.z??0},s)}function pg(e,t,i){e.forEach(s=>{const l=s.parentNode||s.parentId;if(l&&!e.has(l))throw new Error(`Parent node ${l} not found`);if(l||i?.[s.id]){const{x:o,y:u,z:h}=mg(s,e,{...s.position,z:s[$t]?.z??0},t);s.positionAbsolute={x:o,y:u},s[$t].z=h,i?.[s.id]&&(s[$t].isParent=!0)}})}function Ec(e,t,i,s){const l=new Map,o={},u=s?1e3:0;return e.forEach(h=>{const f=(hn(h.zIndex)?h.zIndex:0)+(h.selected?u:0),d=t.get(h.id),m={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},y=h.parentNode||h.parentId;y&&(o[y]=!0);const v=d?.type&&d?.type!==h.type;Object.defineProperty(m,$t,{enumerable:!1,value:{handleBounds:v?void 0:d?.[$t]?.handleBounds,z:f}}),l.set(h.id,m)}),pg(l,i,o),l}function yg(e,t={}){const{getNodes:i,width:s,height:l,minZoom:o,maxZoom:u,d3Zoom:h,d3Selection:f,fitViewOnInitDone:d,fitViewOnInit:m,nodeOrigin:y}=e(),v=t.initial&&!d&&m;if(h&&f&&(v||!t.initial)){const S=i().filter(C=>{const x=t.includeHiddenNodes?C.width&&C.height:!C.hidden;return t.nodes?.length?x&&t.nodes.some(A=>A.id===C.id):x}),b=S.every(C=>C.width&&C.height);if(S.length>0&&b){const C=Sh(S,y),{x,y:A,zoom:w}=ng(C,s,l,t.minZoom??o,t.maxZoom??u,t.padding??.1),M=Oi.translate(x,A).scale(w);return typeof t.duration=="number"&&t.duration>0?h.transform(ua(f,t.duration),M):h.transform(f,M),!0}}return!1}function N7(e,t){return e.forEach(i=>{const s=t.get(i.id);s&&t.set(s.id,{...s,[$t]:s[$t],selected:i.selected})}),new Map(t)}function A7(e,t){return t.map(i=>{const s=e.find(l=>l.id===i.id);return s&&(i.selected=s.selected),i})}function kr({changedNodes:e,changedEdges:t,get:i,set:s}){const{nodeInternals:l,edges:o,onNodesChange:u,onEdgesChange:h,hasDefaultNodes:f,hasDefaultEdges:d}=i();e?.length&&(f&&s({nodeInternals:N7(e,l)}),u?.(e)),t?.length&&(d&&s({edges:A7(t,o)}),h?.(t))}const ss=()=>{},M7={zoomIn:ss,zoomOut:ss,zoomTo:ss,getZoom:()=>1,setViewport:ss,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ss,fitBounds:ss,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},R7=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),w7=()=>{const e=be(),{d3Zoom:t,d3Selection:i}=te(R7,Ve);return k.useMemo(()=>i&&t?{zoomIn:l=>t.scaleBy(ua(i,l?.duration),1.2),zoomOut:l=>t.scaleBy(ua(i,l?.duration),1/1.2),zoomTo:(l,o)=>t.scaleTo(ua(i,o?.duration),l),getZoom:()=>e.getState().transform[2],setViewport:(l,o)=>{const[u,h,f]=e.getState().transform,d=Oi.translate(l.x??u,l.y??h).scale(l.zoom??f);t.transform(ua(i,o?.duration),d)},getViewport:()=>{const[l,o,u]=e.getState().transform;return{x:l,y:o,zoom:u}},fitView:l=>yg(e.getState,l),setCenter:(l,o,u)=>{const{width:h,height:f,maxZoom:d}=e.getState(),m=typeof u?.zoom<"u"?u.zoom:d,y=h/2-l*m,v=f/2-o*m,_=Oi.translate(y,v).scale(m);t.transform(ua(i,u?.duration),_)},fitBounds:(l,o)=>{const{width:u,height:h,minZoom:f,maxZoom:d}=e.getState(),{x:m,y,zoom:v}=ng(l,u,h,f,d,o?.padding??.1),_=Oi.translate(m,y).scale(v);t.transform(ua(i,o?.duration),_)},project:l=>{const{transform:o,snapToGrid:u,snapGrid:h}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),jc(l,o,u,h)},screenToFlowPosition:l=>{const{transform:o,snapToGrid:u,snapGrid:h,domNode:f}=e.getState();if(!f)return l;const{x:d,y:m}=f.getBoundingClientRect(),y={x:l.x-d,y:l.y-m};return jc(y,o,u,h)},flowToScreenPosition:l=>{const{transform:o,domNode:u}=e.getState();if(!u)return l;const{x:h,y:f}=u.getBoundingClientRect(),d=$2(l,o);return{x:d.x+h,y:d.y+f}},viewportInitialized:!0}:M7,[t,i])};function vg(){const e=w7(),t=be(),i=k.useCallback(()=>t.getState().getNodes().map(b=>({...b})),[]),s=k.useCallback(b=>t.getState().nodeInternals.get(b),[]),l=k.useCallback(()=>{const{edges:b=[]}=t.getState();return b.map(C=>({...C}))},[]),o=k.useCallback(b=>{const{edges:C=[]}=t.getState();return C.find(x=>x.id===b)},[]),u=k.useCallback(b=>{const{getNodes:C,setNodes:x,hasDefaultNodes:A,onNodesChange:w}=t.getState(),M=C(),G=typeof b=="function"?b(M):b;if(A)x(G);else if(w){const H=G.length===0?M.map(X=>({type:"remove",id:X.id})):G.map(X=>({item:X,type:"reset"}));w(H)}},[]),h=k.useCallback(b=>{const{edges:C=[],setEdges:x,hasDefaultEdges:A,onEdgesChange:w}=t.getState(),M=typeof b=="function"?b(C):b;if(A)x(M);else if(w){const G=M.length===0?C.map(H=>({type:"remove",id:H.id})):M.map(H=>({item:H,type:"reset"}));w(G)}},[]),f=k.useCallback(b=>{const C=Array.isArray(b)?b:[b],{getNodes:x,setNodes:A,hasDefaultNodes:w,onNodesChange:M}=t.getState();if(w){const H=[...x(),...C];A(H)}else if(M){const G=C.map(H=>({item:H,type:"add"}));M(G)}},[]),d=k.useCallback(b=>{const C=Array.isArray(b)?b:[b],{edges:x=[],setEdges:A,hasDefaultEdges:w,onEdgesChange:M}=t.getState();if(w)A([...x,...C]);else if(M){const G=C.map(H=>({item:H,type:"add"}));M(G)}},[]),m=k.useCallback(()=>{const{getNodes:b,edges:C=[],transform:x}=t.getState(),[A,w,M]=x;return{nodes:b().map(G=>({...G})),edges:C.map(G=>({...G})),viewport:{x:A,y:w,zoom:M}}},[]),y=k.useCallback(({nodes:b,edges:C})=>{const{nodeInternals:x,getNodes:A,edges:w,hasDefaultNodes:M,hasDefaultEdges:G,onNodesDelete:H,onEdgesDelete:X,onNodesChange:q,onEdgesChange:P}=t.getState(),I=(b||[]).map(O=>O.id),J=(C||[]).map(O=>O.id),j=A().reduce((O,N)=>{const Y=N.parentNode||N.parentId,B=!I.includes(N.id)&&Y&&O.find(K=>K.id===Y);return(typeof N.deletable!="boolean"||N.deletable)&&(I.includes(N.id)||B)&&O.push(N),O},[]),W=w.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),T=W.filter(O=>J.includes(O.id));if(j||T){const O=eg(j,W),N=[...T,...O],Y=N.reduce((B,D)=>(B.includes(D.id)||B.push(D.id),B),[]);if((G||M)&&(G&&t.setState({edges:w.filter(B=>!Y.includes(B.id))}),M&&(j.forEach(B=>{x.delete(B.id)}),t.setState({nodeInternals:new Map(x)}))),Y.length>0&&(X?.(N),P&&P(Y.map(B=>({id:B,type:"remove"})))),j.length>0&&(H?.(j),q)){const B=j.map(D=>({id:D.id,type:"remove"}));q(B)}}},[]),v=k.useCallback(b=>{const C=Iv(b),x=C?null:t.getState().nodeInternals.get(b.id);return!C&&!x?[null,null,C]:[C?b:o1(x),x,C]},[]),_=k.useCallback((b,C=!0,x)=>{const[A,w,M]=v(b);return A?(x||t.getState().getNodes()).filter(G=>{if(!M&&(G.id===w.id||!G.positionAbsolute))return!1;const H=o1(G),X=Kc(H,A);return C&&X>0||X>=A.width*A.height}):[]},[]),S=k.useCallback((b,C,x=!0)=>{const[A]=v(b);if(!A)return!1;const w=Kc(A,C);return x&&w>0||w>=A.width*A.height},[]);return k.useMemo(()=>({...e,getNodes:i,getNode:s,getEdges:l,getEdge:o,setNodes:u,setEdges:h,addNodes:f,addEdges:d,toObject:m,deleteElements:y,getIntersectingNodes:_,isNodeIntersecting:S}),[e,i,s,l,o,u,h,f,d,m,y,_,S])}const z7={actInsideInputWithModifier:!1};var D7=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const i=be(),{deleteElements:s}=vg(),l=Nl(e,z7),o=Nl(t);k.useEffect(()=>{if(l){const{edges:u,getNodes:h}=i.getState(),f=h().filter(m=>m.selected),d=u.filter(m=>m.selected);s({nodes:f,edges:d}),i.setState({nodesSelectionActive:!1})}},[l]),k.useEffect(()=>{i.setState({multiSelectionActive:o})},[o])};function O7(e){const t=be();k.useEffect(()=>{let i;const s=()=>{if(!e.current)return;const l=dh(e.current);(l.height===0||l.width===0)&&t.getState().onError?.("004",ci.error004()),t.setState({width:l.width||500,height:l.height||500})};return s(),window.addEventListener("resize",s),e.current&&(i=new ResizeObserver(()=>s()),i.observe(e.current)),()=>{window.removeEventListener("resize",s),i&&e.current&&i.unobserve(e.current)}},[])}const bh={position:"absolute",width:"100%",height:"100%",top:0,left:0},H7=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,jr=e=>({x:e.x,y:e.y,zoom:e.k}),ls=(e,t)=>e.target.closest(`.${t}`),v1=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),_1=e=>{const t=e.ctrlKey&&co()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},G7=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),B7=({onMove:e,onMoveStart:t,onMoveEnd:i,onPaneContextMenu:s,zoomOnScroll:l=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:h=.5,panOnScrollMode:f=fa.Free,zoomOnDoubleClick:d=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:v,translateExtent:_,minZoom:S,maxZoom:b,zoomActivationKeyCode:C,preventScrolling:x=!0,children:A,noWheelClassName:w,noPanClassName:M})=>{const G=k.useRef(),H=be(),X=k.useRef(!1),q=k.useRef(!1),P=k.useRef(null),I=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:J,d3Selection:j,d3ZoomHandler:W,userSelectionActive:T}=te(G7,Ve),O=Nl(C),N=k.useRef(0),Y=k.useRef(!1),B=k.useRef();return O7(P),k.useEffect(()=>{if(P.current){const D=P.current.getBoundingClientRect(),K=Vv().scaleExtent([S,b]).translateExtent(_),F=xn(P.current).call(K),tt=Oi.translate(v.x,v.y).scale(vs(v.zoom,S,b)),ut=[[0,0],[D.width,D.height]],ct=K.constrain()(tt,ut,_);K.transform(F,ct),K.wheelDelta(_1),H.setState({d3Zoom:K,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:P.current.closest(".react-flow")})}},[]),k.useEffect(()=>{j&&J&&(u&&!O&&!T?j.on("wheel.zoom",D=>{if(ls(D,w))return!1;D.preventDefault(),D.stopImmediatePropagation();const K=j.property("__zoom").k||1;if(D.ctrlKey&&o){const wt=Ln(D),zt=_1(D),Ut=K*Math.pow(2,zt);J.scaleTo(j,Ut,wt,D);return}const F=D.deltaMode===1?20:1;let tt=f===fa.Vertical?0:D.deltaX*F,ut=f===fa.Horizontal?0:D.deltaY*F;!co()&&D.shiftKey&&f!==fa.Vertical&&(tt=D.deltaY*F,ut=0),J.translateBy(j,-(tt/K)*h,-(ut/K)*h,{internal:!0});const ct=jr(j.property("__zoom")),{onViewportChangeStart:gt,onViewportChange:St,onViewportChangeEnd:Rt}=H.getState();clearTimeout(B.current),Y.current||(Y.current=!0,t?.(D,ct),gt?.(ct)),Y.current&&(e?.(D,ct),St?.(ct),B.current=setTimeout(()=>{i?.(D,ct),Rt?.(ct),Y.current=!1},150))},{passive:!1}):typeof W<"u"&&j.on("wheel.zoom",function(D,K){if(!x&&D.type==="wheel"&&!D.ctrlKey||ls(D,w))return null;D.preventDefault(),W.call(this,D,K)},{passive:!1}))},[T,u,f,j,J,W,O,o,x,w,t,e,i]),k.useEffect(()=>{J&&J.on("start",D=>{if(!D.sourceEvent||D.sourceEvent.internal)return null;N.current=D.sourceEvent?.button;const{onViewportChangeStart:K}=H.getState(),F=jr(D.transform);X.current=!0,I.current=F,D.sourceEvent?.type==="mousedown"&&H.setState({paneDragging:!0}),K?.(F),t?.(D.sourceEvent,F)})},[J,t]),k.useEffect(()=>{J&&(T&&!X.current?J.on("zoom",null):T||J.on("zoom",D=>{const{onViewportChange:K}=H.getState();if(H.setState({transform:[D.transform.x,D.transform.y,D.transform.k]}),q.current=!!(s&&v1(y,N.current??0)),(e||K)&&!D.sourceEvent?.internal){const F=jr(D.transform);K?.(F),e?.(D.sourceEvent,F)}}))},[T,J,e,y,s]),k.useEffect(()=>{J&&J.on("end",D=>{if(!D.sourceEvent||D.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=H.getState();if(X.current=!1,H.setState({paneDragging:!1}),s&&v1(y,N.current??0)&&!q.current&&s(D.sourceEvent),q.current=!1,(i||K)&&H7(I.current,D.transform)){const F=jr(D.transform);I.current=F,clearTimeout(G.current),G.current=setTimeout(()=>{K?.(F),i?.(D.sourceEvent,F)},u?150:0)}})},[J,u,y,i,s]),k.useEffect(()=>{J&&J.filter(D=>{const K=O||l,F=o&&D.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&D.button===1&&D.type==="mousedown"&&(ls(D,"react-flow__node")||ls(D,"react-flow__edge")))return!0;if(!y&&!K&&!u&&!d&&!o||T||!d&&D.type==="dblclick"||ls(D,w)&&D.type==="wheel"||ls(D,M)&&(D.type!=="wheel"||u&&D.type==="wheel"&&!O)||!o&&D.ctrlKey&&D.type==="wheel"||!K&&!u&&!F&&D.type==="wheel"||!y&&(D.type==="mousedown"||D.type==="touchstart")||Array.isArray(y)&&!y.includes(D.button)&&D.type==="mousedown")return!1;const tt=Array.isArray(y)&&y.includes(D.button)||!D.button||D.button<=1;return(!D.ctrlKey||D.type==="wheel")&&tt})},[T,J,l,o,u,d,y,m,O]),$.createElement("div",{className:"react-flow__renderer",ref:P,style:bh},A)},U7=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function L7(){const{userSelectionActive:e,userSelectionRect:t}=te(U7,Ve);return e&&t?$.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function S1(e,t){const i=t.parentNode||t.parentId,s=e.find(l=>l.id===i);if(s){const l=t.position.x+t.width-s.width,o=t.position.y+t.height-s.height;if(l>0||o>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,l>0&&(s.style.width+=l),o>0&&(s.style.height+=o),t.position.x<0){const u=Math.abs(t.position.x);s.position.x=s.position.x-u,s.style.width+=u,t.position.x=0}if(t.position.y<0){const u=Math.abs(t.position.y);s.position.y=s.position.y-u,s.style.height+=u,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function _g(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const i=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,l)=>{const o=e.filter(h=>h.id===l.id);if(o.length===0)return s.push(l),s;const u={...l};for(const h of o)if(h)switch(h.type){case"select":{u.selected=h.selected;break}case"position":{typeof h.position<"u"&&(u.position=h.position),typeof h.positionAbsolute<"u"&&(u.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(u.dragging=h.dragging),u.expandParent&&S1(s,u);break}case"dimensions":{typeof h.dimensions<"u"&&(u.width=h.dimensions.width,u.height=h.dimensions.height),typeof h.updateStyle<"u"&&(u.style={...u.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(u.resizing=h.resizing),u.expandParent&&S1(s,u);break}case"remove":return s}return s.push(u),s},i)}function Sg(e,t){return _g(e,t)}function Y7(e,t){return _g(e,t)}const wi=(e,t)=>({id:e,type:"select",selected:t});function us(e,t){return e.reduce((i,s)=>{const l=t.includes(s.id);return!s.selected&&l?(s.selected=!0,i.push(wi(s.id,!0))):s.selected&&!l&&(s.selected=!1,i.push(wi(s.id,!1))),i},[])}const xc=(e,t)=>i=>{i.target===t.current&&e?.(i)},X7=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Eg=k.memo(({isSelecting:e,selectionMode:t=Tl.Full,panOnDrag:i,onSelectionStart:s,onSelectionEnd:l,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:m,children:y})=>{const v=k.useRef(null),_=be(),S=k.useRef(0),b=k.useRef(0),C=k.useRef(),{userSelectionActive:x,elementsSelectable:A,dragging:w}=te(X7,Ve),M=()=>{_.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,b.current=0},G=W=>{o?.(W),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},H=W=>{if(Array.isArray(i)&&i?.includes(2)){W.preventDefault();return}u?.(W)},X=h?W=>h(W):void 0,q=W=>{const{resetSelectedElements:T,domNode:O}=_.getState();if(C.current=O?.getBoundingClientRect(),!A||!e||W.button!==0||W.target!==v.current||!C.current)return;const{x:N,y:Y}=Hi(W,C.current);T(),_.setState({userSelectionRect:{width:0,height:0,startX:N,startY:Y,x:N,y:Y}}),s?.(W)},P=W=>{const{userSelectionRect:T,nodeInternals:O,edges:N,transform:Y,onNodesChange:B,onEdgesChange:D,nodeOrigin:K,getNodes:F}=_.getState();if(!e||!C.current||!T)return;_.setState({userSelectionActive:!0,nodesSelectionActive:!1});const tt=Hi(W,C.current),ut=T.startX??0,ct=T.startY??0,gt={...T,x:tt.x<ut?tt.x:ut,y:tt.y<ct?tt.y:ct,width:Math.abs(tt.x-ut),height:Math.abs(tt.y-ct)},St=F(),Rt=tg(O,gt,Y,t===Tl.Partial,!0,K),wt=eg(Rt,N).map(Ut=>Ut.id),zt=Rt.map(Ut=>Ut.id);if(S.current!==zt.length){S.current=zt.length;const Ut=us(St,zt);Ut.length&&B?.(Ut)}if(b.current!==wt.length){b.current=wt.length;const Ut=us(N,wt);Ut.length&&D?.(Ut)}_.setState({userSelectionRect:gt})},I=W=>{if(W.button!==0)return;const{userSelectionRect:T}=_.getState();!x&&T&&W.target===v.current&&G?.(W),_.setState({nodesSelectionActive:S.current>0}),M(),l?.(W)},J=W=>{x&&(_.setState({nodesSelectionActive:S.current>0}),l?.(W)),M()},j=A&&(e||x);return $.createElement("div",{className:en(["react-flow__pane",{dragging:w,selection:e}]),onClick:j?void 0:xc(G,v),onContextMenu:xc(H,v),onWheel:xc(X,v),onMouseEnter:j?void 0:f,onMouseDown:j?q:void 0,onMouseMove:j?P:d,onMouseUp:j?I:void 0,onMouseLeave:j?J:m,ref:v,style:bh},y,$.createElement(L7,null))});Eg.displayName="Pane";function xg(e,t){const i=e.parentNode||e.parentId;if(!i)return!1;const s=t.get(i);return s?s.selected?!0:xg(s,t):!1}function E1(e,t,i){let s=e;do{if(s?.matches(t))return!0;if(s===i.current)return!1;s=s.parentElement}while(s);return!1}function V7(e,t,i,s){return Array.from(e.values()).filter(l=>(l.selected||l.id===s)&&(!l.parentNode||l.parentId||!xg(l,e))&&(l.draggable||t&&typeof l.draggable>"u")).map(l=>({id:l.id,position:l.position||{x:0,y:0},positionAbsolute:l.positionAbsolute||{x:0,y:0},distance:{x:i.x-(l.positionAbsolute?.x??0),y:i.y-(l.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:l.extent,parentNode:l.parentNode||l.parentId,parentId:l.parentNode||l.parentId,width:l.width,height:l.height,expandParent:l.expandParent}))}function q7(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function bg(e,t,i,s,l=[0,0],o){const u=q7(e,e.extent||s);let h=u;const f=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(f&&e.width&&e.height){const y=i.get(f),{x:v,y:_}=fs(y,l).positionAbsolute;h=y&&hn(v)&&hn(_)&&hn(y.width)&&hn(y.height)?[[v+e.width*l[0],_+e.height*l[1]],[v+y.width-e.width+e.width*l[0],_+y.height-e.height+e.height*l[1]]]:h}else o?.("005",ci.error005()),h=u;else if(e.extent&&f&&e.extent!=="parent"){const y=i.get(f),{x:v,y:_}=fs(y,l).positionAbsolute;h=[[e.extent[0][0]+v,e.extent[0][1]+_],[e.extent[1][0]+v,e.extent[1][1]+_]]}let d={x:0,y:0};if(f){const y=i.get(f);d=fs(y,l).positionAbsolute}const m=h&&h!=="parent"?gh(t,h):t;return{position:{x:m.x-d.x,y:m.y-d.y},positionAbsolute:m}}function bc({nodeId:e,dragItems:t,nodeInternals:i}){const s=t.map(l=>({...i.get(l.id),position:l.position,positionAbsolute:l.positionAbsolute}));return[e?s.find(l=>l.id===e):s[0],s]}const x1=(e,t,i,s)=>{const l=t.querySelectorAll(e);if(!l||!l.length)return null;const o=Array.from(l),u=t.getBoundingClientRect(),h={x:u.width*s[0],y:u.height*s[1]};return o.map(f=>{const d=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(d.left-u.left-h.x)/i,y:(d.top-u.top-h.y)/i,...dh(f)}})};function rl(e,t,i){return i===void 0?i:s=>{const l=t().nodeInternals.get(e);l&&i(s,{...l})}}function Ic({id:e,store:t,unselect:i=!1,nodeRef:s}){const{addSelectedNodes:l,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:h,onError:f}=t.getState(),d=h.get(e);if(!d){f?.("012",ci.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(i||d.selected&&u)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):l([e])}function P7(){const e=be();return k.useCallback(({sourceEvent:i})=>{const{transform:s,snapGrid:l,snapToGrid:o}=e.getState(),u=i.touches?i.touches[0].clientX:i.clientX,h=i.touches?i.touches[0].clientY:i.clientY,f={x:(u-s[0])/s[2],y:(h-s[1])/s[2]};return{xSnapped:o?l[0]*Math.round(f.x/l[0]):f.x,ySnapped:o?l[1]*Math.round(f.y/l[1]):f.y,...f}},[])}function Cc(e){return(t,i,s)=>e?.(t,s)}function Cg({nodeRef:e,disabled:t=!1,noDragClassName:i,handleSelector:s,nodeId:l,isSelectable:o,selectNodesOnDrag:u}){const h=be(),[f,d]=k.useState(!1),m=k.useRef([]),y=k.useRef({x:null,y:null}),v=k.useRef(0),_=k.useRef(null),S=k.useRef({x:0,y:0}),b=k.useRef(null),C=k.useRef(!1),x=k.useRef(!1),A=k.useRef(!1),w=P7();return k.useEffect(()=>{if(e?.current){const M=xn(e.current),G=({x:q,y:P})=>{const{nodeInternals:I,onNodeDrag:J,onSelectionDrag:j,updateNodePositions:W,nodeExtent:T,snapGrid:O,snapToGrid:N,nodeOrigin:Y,onError:B}=h.getState();y.current={x:q,y:P};let D=!1,K={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&T){const tt=Sh(m.current,Y);K=mh(tt)}if(m.current=m.current.map(tt=>{const ut={x:q-tt.distance.x,y:P-tt.distance.y};N&&(ut.x=O[0]*Math.round(ut.x/O[0]),ut.y=O[1]*Math.round(ut.y/O[1]));const ct=[[T[0][0],T[0][1]],[T[1][0],T[1][1]]];m.current.length>1&&T&&!tt.extent&&(ct[0][0]=tt.positionAbsolute.x-K.x+T[0][0],ct[1][0]=tt.positionAbsolute.x+(tt.width??0)-K.x2+T[1][0],ct[0][1]=tt.positionAbsolute.y-K.y+T[0][1],ct[1][1]=tt.positionAbsolute.y+(tt.height??0)-K.y2+T[1][1]);const gt=bg(tt,ut,I,ct,Y,B);return D=D||tt.position.x!==gt.position.x||tt.position.y!==gt.position.y,tt.position=gt.position,tt.positionAbsolute=gt.positionAbsolute,tt}),!D)return;W(m.current,!0,!0),d(!0);const F=l?J:Cc(j);if(F&&b.current){const[tt,ut]=bc({nodeId:l,dragItems:m.current,nodeInternals:I});F(b.current,tt,ut)}},H=()=>{if(!_.current)return;const[q,P]=Q2(S.current,_.current);if(q!==0||P!==0){const{transform:I,panBy:J}=h.getState();y.current.x=(y.current.x??0)-q/I[2],y.current.y=(y.current.y??0)-P/I[2],J({x:q,y:P})&&G(y.current)}v.current=requestAnimationFrame(H)},X=q=>{const{nodeInternals:P,multiSelectionActive:I,nodesDraggable:J,unselectNodesAndEdges:j,onNodeDragStart:W,onSelectionDragStart:T}=h.getState();x.current=!0;const O=l?W:Cc(T);(!u||!o)&&!I&&l&&(P.get(l)?.selected||j()),l&&o&&u&&Ic({id:l,store:h,nodeRef:e});const N=w(q);if(y.current=N,m.current=V7(P,J,N,l),O&&m.current){const[Y,B]=bc({nodeId:l,dragItems:m.current,nodeInternals:P});O(q.sourceEvent,Y,B)}};if(t)M.on(".drag",null);else{const q=k8().on("start",P=>{const{domNode:I,nodeDragThreshold:J}=h.getState();J===0&&X(P),A.current=!1;const j=w(P);y.current=j,_.current=I?.getBoundingClientRect()||null,S.current=Hi(P.sourceEvent,_.current)}).on("drag",P=>{const I=w(P),{autoPanOnNodeDrag:J,nodeDragThreshold:j}=h.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(A.current=!0),!A.current){if(!C.current&&x.current&&J&&(C.current=!0,H()),!x.current){const W=I.xSnapped-(y?.current?.x??0),T=I.ySnapped-(y?.current?.y??0);Math.sqrt(W*W+T*T)>j&&X(P)}(y.current.x!==I.xSnapped||y.current.y!==I.ySnapped)&&m.current&&x.current&&(b.current=P.sourceEvent,S.current=Hi(P.sourceEvent,_.current),G(I))}}).on("end",P=>{if(!(!x.current||A.current)&&(d(!1),C.current=!1,x.current=!1,cancelAnimationFrame(v.current),m.current)){const{updateNodePositions:I,nodeInternals:J,onNodeDragStop:j,onSelectionDragStop:W}=h.getState(),T=l?j:Cc(W);if(I(m.current,!1,!1),T){const[O,N]=bc({nodeId:l,dragItems:m.current,nodeInternals:J});T(P.sourceEvent,O,N)}}}).filter(P=>{const I=P.target;return!P.button&&(!i||!E1(I,`.${i}`,e))&&(!s||E1(I,s,e))});return M.call(q),()=>{M.on(".drag",null)}}}},[e,t,i,s,o,h,l,u,w]),f}function Tg(){const e=be();return k.useCallback(i=>{const{nodeInternals:s,nodeExtent:l,updateNodePositions:o,getNodes:u,snapToGrid:h,snapGrid:f,onError:d,nodesDraggable:m}=e.getState(),y=u().filter(A=>A.selected&&(A.draggable||m&&typeof A.draggable>"u")),v=h?f[0]:5,_=h?f[1]:5,S=i.isShiftPressed?4:1,b=i.x*v*S,C=i.y*_*S,x=y.map(A=>{if(A.positionAbsolute){const w={x:A.positionAbsolute.x+b,y:A.positionAbsolute.y+C};h&&(w.x=f[0]*Math.round(w.x/f[0]),w.y=f[1]*Math.round(w.y/f[1]));const{positionAbsolute:M,position:G}=bg(A,w,s,l,void 0,d);A.position=G,A.positionAbsolute=M}return A});o(x,!0,!1)},[])}const ds={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ol=e=>{const t=({id:i,type:s,data:l,xPos:o,yPos:u,xPosOrigin:h,yPosOrigin:f,selected:d,onClick:m,onMouseEnter:y,onMouseMove:v,onMouseLeave:_,onContextMenu:S,onDoubleClick:b,style:C,className:x,isDraggable:A,isSelectable:w,isConnectable:M,isFocusable:G,selectNodesOnDrag:H,sourcePosition:X,targetPosition:q,hidden:P,resizeObserver:I,dragHandle:J,zIndex:j,isParent:W,noDragClassName:T,noPanClassName:O,initialized:N,disableKeyboardA11y:Y,ariaLabel:B,rfId:D,hasHandleBounds:K})=>{const F=be(),tt=k.useRef(null),ut=k.useRef(null),ct=k.useRef(X),gt=k.useRef(q),St=k.useRef(s),Rt=w||A||m||y||v||_,wt=Tg(),zt=rl(i,F.getState,y),Ut=rl(i,F.getState,v),De=rl(i,F.getState,_),re=rl(i,F.getState,S),oe=rl(i,F.getState,b),Ce=Nt=>{const{nodeDragThreshold:ft}=F.getState();if(w&&(!H||!A||ft>0)&&Ic({id:i,store:F,nodeRef:tt}),m){const ye=F.getState().nodeInternals.get(i);ye&&m(Nt,{...ye})}},Pt=Nt=>{if(!Qc(Nt)&&!Y)if(k2.includes(Nt.key)&&w){const ft=Nt.key==="Escape";Ic({id:i,store:F,unselect:ft,nodeRef:tt})}else A&&d&&Object.prototype.hasOwnProperty.call(ds,Nt.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${Nt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),wt({x:ds[Nt.key].x,y:ds[Nt.key].y,isShiftPressed:Nt.shiftKey}))};k.useEffect(()=>()=>{ut.current&&(I?.unobserve(ut.current),ut.current=null)},[]),k.useEffect(()=>{if(tt.current&&!P){const Nt=tt.current;(!N||!K||ut.current!==Nt)&&(ut.current&&I?.unobserve(ut.current),I?.observe(Nt),ut.current=Nt)}},[P,N,K]),k.useEffect(()=>{const Nt=St.current!==s,ft=ct.current!==X,ye=gt.current!==q;tt.current&&(Nt||ft||ye)&&(Nt&&(St.current=s),ft&&(ct.current=X),ye&&(gt.current=q),F.getState().updateNodeDimensions([{id:i,nodeElement:tt.current,forceUpdate:!0}]))},[i,s,X,q]);const ue=Cg({nodeRef:tt,disabled:P||!A,noDragClassName:T,handleSelector:J,nodeId:i,isSelectable:w,selectNodesOnDrag:H});return P?null:$.createElement("div",{className:en(["react-flow__node",`react-flow__node-${s}`,{[O]:A},x,{selected:d,selectable:w,parent:W,dragging:ue}]),ref:tt,style:{zIndex:j,transform:`translate(${h}px,${f}px)`,pointerEvents:Rt?"all":"none",visibility:N?"visible":"hidden",...C},"data-id":i,"data-testid":`rf__node-${i}`,onMouseEnter:zt,onMouseMove:Ut,onMouseLeave:De,onContextMenu:re,onClick:Ce,onDoubleClick:oe,onKeyDown:G?Pt:void 0,tabIndex:G?0:void 0,role:G?"button":void 0,"aria-describedby":Y?void 0:`${dg}-${D}`,"aria-label":B},$.createElement(i7,{value:i},$.createElement(e,{id:i,data:l,type:s,xPos:o,yPos:u,selected:d,isConnectable:M,sourcePosition:X,targetPosition:q,dragging:ue,dragHandle:J,zIndex:j})))};return t.displayName="NodeWrapper",k.memo(t)};const K7=e=>{const t=e.getNodes().filter(i=>i.selected);return{...Sh(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Q7({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:i}){const s=be(),{width:l,height:o,x:u,y:h,transformString:f,userSelectionActive:d}=te(K7,Ve),m=Tg(),y=k.useRef(null);if(k.useEffect(()=>{i||y.current?.focus({preventScroll:!0})},[i]),Cg({nodeRef:y}),d||!l||!o)return null;const v=e?S=>{const b=s.getState().getNodes().filter(C=>C.selected);e(S,b)}:void 0,_=S=>{Object.prototype.hasOwnProperty.call(ds,S.key)&&m({x:ds[S.key].x,y:ds[S.key].y,isShiftPressed:S.shiftKey})};return $.createElement("div",{className:en(["react-flow__nodesselection","react-flow__container",t]),style:{transform:f}},$.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:i?void 0:-1,onKeyDown:i?void 0:_,style:{width:l,height:o,top:h,left:u}}))}var Z7=k.memo(Q7);const k7=e=>e.nodesSelectionActive,Ng=({children:e,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:h,onMove:f,onMoveStart:d,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:v,selectionMode:_,onSelectionStart:S,onSelectionEnd:b,multiSelectionKeyCode:C,panActivationKeyCode:x,zoomActivationKeyCode:A,elementsSelectable:w,zoomOnScroll:M,zoomOnPinch:G,panOnScroll:H,panOnScrollSpeed:X,panOnScrollMode:q,zoomOnDoubleClick:P,panOnDrag:I,defaultViewport:J,translateExtent:j,minZoom:W,maxZoom:T,preventScrolling:O,onSelectionContextMenu:N,noWheelClassName:Y,noPanClassName:B,disableKeyboardA11y:D})=>{const K=te(k7),F=Nl(y),tt=Nl(x),ut=tt||I,ct=tt||H,gt=F||v&&ut!==!0;return D7({deleteKeyCode:h,multiSelectionKeyCode:C}),$.createElement(B7,{onMove:f,onMoveStart:d,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:w,zoomOnScroll:M,zoomOnPinch:G,panOnScroll:ct,panOnScrollSpeed:X,panOnScrollMode:q,zoomOnDoubleClick:P,panOnDrag:!F&&ut,defaultViewport:J,translateExtent:j,minZoom:W,maxZoom:T,zoomActivationKeyCode:A,preventScrolling:O,noWheelClassName:Y,noPanClassName:B},$.createElement(Eg,{onSelectionStart:S,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:l,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:ut,isSelecting:!!gt,selectionMode:_},e,K&&$.createElement(Z7,{onSelectionContextMenu:N,noPanClassName:B,disableKeyboardA11y:D})))};Ng.displayName="FlowRenderer";var j7=k.memo(Ng);function F7(e){return te(k.useCallback(i=>e?tg(i.nodeInternals,{x:0,y:0,width:i.width,height:i.height},i.transform,!0):i.getNodes(),[e]))}function I7(e){const t={input:ol(e.input||ug),default:ol(e.default||Fc),output:ol(e.output||hg),group:ol(e.group||xh)},i={},s=Object.keys(e).filter(l=>!["input","default","output","group"].includes(l)).reduce((l,o)=>(l[o]=ol(e[o]||Fc),l),i);return{...t,...s}}const J7=({x:e,y:t,width:i,height:s,origin:l})=>!i||!s?{x:e,y:t}:l[0]<0||l[1]<0||l[0]>1||l[1]>1?{x:e,y:t}:{x:e-i*l[0],y:t-s*l[1]},W7=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ag=e=>{const{nodesDraggable:t,nodesConnectable:i,nodesFocusable:s,elementsSelectable:l,updateNodeDimensions:o,onError:u}=te(W7,Ve),h=F7(e.onlyRenderVisibleElements),f=k.useRef(),d=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const v=y.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));o(v)});return f.current=m,m},[]);return k.useEffect(()=>()=>{f?.current?.disconnect()},[]),$.createElement("div",{className:"react-flow__nodes",style:bh},h.map(m=>{let y=m.type||"default";e.nodeTypes[y]||(u?.("003",ci.error003(y)),y="default");const v=e.nodeTypes[y]||e.nodeTypes.default,_=!!(m.draggable||t&&typeof m.draggable>"u"),S=!!(m.selectable||l&&typeof m.selectable>"u"),b=!!(m.connectable||i&&typeof m.connectable>"u"),C=!!(m.focusable||s&&typeof m.focusable>"u"),x=e.nodeExtent?gh(m.positionAbsolute,e.nodeExtent):m.positionAbsolute,A=x?.x??0,w=x?.y??0,M=J7({x:A,y:w,width:m.width??0,height:m.height??0,origin:e.nodeOrigin});return $.createElement(v,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||dt.Bottom,targetPosition:m.targetPosition||dt.Top,hidden:m.hidden,xPos:A,yPos:w,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!m.selected,isDraggable:_,isSelectable:S,isConnectable:b,isFocusable:C,resizeObserver:d,dragHandle:m.dragHandle,zIndex:m[$t]?.z??0,isParent:!!m[$t]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!m.width&&!!m.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[$t]?.handleBounds})}))};Ag.displayName="NodeRenderer";var $7=k.memo(Ag);const t_=(e,t,i)=>i===dt.Left?e-t:i===dt.Right?e+t:e,e_=(e,t,i)=>i===dt.Top?e-t:i===dt.Bottom?e+t:e,b1="react-flow__edgeupdater",C1=({position:e,centerX:t,centerY:i,radius:s=10,onMouseDown:l,onMouseEnter:o,onMouseOut:u,type:h})=>$.createElement("circle",{onMouseDown:l,onMouseEnter:o,onMouseOut:u,className:en([b1,`${b1}-${h}`]),cx:t_(t,s,e),cy:e_(i,s,e),r:s,stroke:"transparent",fill:"transparent"}),n_=()=>!0;var rs=e=>{const t=({id:i,className:s,type:l,data:o,onClick:u,onEdgeDoubleClick:h,selected:f,animated:d,label:m,labelStyle:y,labelShowBg:v,labelBgStyle:_,labelBgPadding:S,labelBgBorderRadius:b,style:C,source:x,target:A,sourceX:w,sourceY:M,targetX:G,targetY:H,sourcePosition:X,targetPosition:q,elementsSelectable:P,hidden:I,sourceHandleId:J,targetHandleId:j,onContextMenu:W,onMouseEnter:T,onMouseMove:O,onMouseLeave:N,reconnectRadius:Y,onReconnect:B,onReconnectStart:D,onReconnectEnd:K,markerEnd:F,markerStart:tt,rfId:ut,ariaLabel:ct,isFocusable:gt,isReconnectable:St,pathOptions:Rt,interactionWidth:wt,disableKeyboardA11y:zt})=>{const Ut=k.useRef(null),[De,re]=k.useState(!1),[oe,Ce]=k.useState(!1),Pt=be(),ue=k.useMemo(()=>`url('#${kc(tt,ut)}')`,[tt,ut]),Nt=k.useMemo(()=>`url('#${kc(F,ut)}')`,[F,ut]);if(I)return null;const ft=ce=>{const{edges:Pe,addSelectedEdges:Mn,unselectNodesAndEdges:Rn,multiSelectionActive:Kn}=Pt.getState(),an=Pe.find(gn=>gn.id===i);an&&(P&&(Pt.setState({nodesSelectionActive:!1}),an.selected&&Kn?(Rn({nodes:[],edges:[an]}),Ut.current?.blur()):Mn([i])),u&&u(ce,an))},ye=ll(i,Pt.getState,h),Oe=ll(i,Pt.getState,W),An=ll(i,Pt.getState,T),He=ll(i,Pt.getState,O),Zt=ll(i,Pt.getState,N),Ge=(ce,Pe)=>{if(ce.button!==0)return;const{edges:Mn,isValidConnection:Rn}=Pt.getState(),Kn=Pe?A:x,an=(Pe?j:J)||null,gn=Pe?"target":"source",Ss=Rn||n_,xa=Pe,Xi=Mn.find(wn=>wn.id===i);Ce(!0),D?.(ce,Xi,gn);const Vi=wn=>{Ce(!1),K?.(wn,Xi,gn)};sg({event:ce,handleId:an,nodeId:Kn,onConnect:wn=>B?.(Xi,wn),isTarget:xa,getState:Pt.getState,setState:Pt.setState,isValidConnection:Ss,edgeUpdaterType:gn,onReconnectEnd:Vi})},Pn=ce=>Ge(ce,!0),fn=ce=>Ge(ce,!1),qe=()=>re(!0),dn=()=>re(!1),ve=!P&&!u,nn=ce=>{if(!zt&&k2.includes(ce.key)&&P){const{unselectNodesAndEdges:Pe,addSelectedEdges:Mn,edges:Rn}=Pt.getState();ce.key==="Escape"?(Ut.current?.blur(),Pe({edges:[Rn.find(an=>an.id===i)]})):Mn([i])}};return $.createElement("g",{className:en(["react-flow__edge",`react-flow__edge-${l}`,s,{selected:f,animated:d,inactive:ve,updating:De}]),onClick:ft,onDoubleClick:ye,onContextMenu:Oe,onMouseEnter:An,onMouseMove:He,onMouseLeave:Zt,onKeyDown:gt?nn:void 0,tabIndex:gt?0:void 0,role:gt?"button":"img","data-testid":`rf__edge-${i}`,"aria-label":ct===null?void 0:ct||`Edge from ${x} to ${A}`,"aria-describedby":gt?`${gg}-${ut}`:void 0,ref:Ut},!oe&&$.createElement(e,{id:i,source:x,target:A,selected:f,animated:d,label:m,labelStyle:y,labelShowBg:v,labelBgStyle:_,labelBgPadding:S,labelBgBorderRadius:b,data:o,style:C,sourceX:w,sourceY:M,targetX:G,targetY:H,sourcePosition:X,targetPosition:q,sourceHandleId:J,targetHandleId:j,markerStart:ue,markerEnd:Nt,pathOptions:Rt,interactionWidth:wt}),St&&$.createElement($.Fragment,null,(St==="source"||St===!0)&&$.createElement(C1,{position:X,centerX:w,centerY:M,radius:Y,onMouseDown:Pn,onMouseEnter:qe,onMouseOut:dn,type:"source"}),(St==="target"||St===!0)&&$.createElement(C1,{position:q,centerX:G,centerY:H,radius:Y,onMouseDown:fn,onMouseEnter:qe,onMouseOut:dn,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function i_(e){const t={default:rs(e.default||fo),straight:rs(e.bezier||vh),step:rs(e.step||yh),smoothstep:rs(e.step||No),simplebezier:rs(e.simplebezier||ph)},i={},s=Object.keys(e).filter(l=>!["default","bezier"].includes(l)).reduce((l,o)=>(l[o]=rs(e[o]||fo),l),i);return{...t,...s}}function T1(e,t,i=null){const s=(i?.x||0)+t.x,l=(i?.y||0)+t.y,o=i?.width||t.width,u=i?.height||t.height;switch(e){case dt.Top:return{x:s+o/2,y:l};case dt.Right:return{x:s+o,y:l+u/2};case dt.Bottom:return{x:s+o/2,y:l+u};case dt.Left:return{x:s,y:l+u/2}}}function N1(e,t){return e?e.length===1||!t?e[0]:t&&e.find(i=>i.id===t)||null:null}const a_=(e,t,i,s,l,o)=>{const u=T1(i,e,t),h=T1(o,s,l);return{sourceX:u.x,sourceY:u.y,targetX:h.x,targetY:h.y}};function s_({sourcePos:e,targetPos:t,sourceWidth:i,sourceHeight:s,targetWidth:l,targetHeight:o,width:u,height:h,transform:f}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+i,t.x+l),y2:Math.max(e.y+s,t.y+o)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const m=mh({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:u/f[2],height:h/f[2]}),y=Math.max(0,Math.min(m.x2,d.x2)-Math.max(m.x,d.x)),v=Math.max(0,Math.min(m.y2,d.y2)-Math.max(m.y,d.y));return Math.ceil(y*v)>0}function A1(e){const t=e?.[$t]?.handleBounds||null,i=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!i]}const l_=[{level:0,isMaxLevel:!0,edges:[]}];function r_(e,t,i=!1){let s=-1;const l=e.reduce((u,h)=>{const f=hn(h.zIndex);let d=f?h.zIndex:0;if(i){const m=t.get(h.target),y=t.get(h.source),v=h.selected||m?.selected||y?.selected,_=Math.max(y?.[$t]?.z||0,m?.[$t]?.z||0,1e3);d=(f?h.zIndex:0)+(v?_:0)}return u[d]?u[d].push(h):u[d]=[h],s=d>s?d:s,u},{}),o=Object.entries(l).map(([u,h])=>{const f=+u;return{edges:h,level:f,isMaxLevel:f===s}});return o.length===0?l_:o}function o_(e,t,i){const s=te(k.useCallback(l=>e?l.edges.filter(o=>{const u=t.get(o.source),h=t.get(o.target);return u?.width&&u?.height&&h?.width&&h?.height&&s_({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:h.width,targetHeight:h.height,width:l.width,height:l.height,transform:l.transform})}):l.edges,[e,t]));return r_(s,t,i)}const u_=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),c_=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),M1={[ho.Arrow]:u_,[ho.ArrowClosed]:c_};function h_(e){const t=be();return k.useMemo(()=>Object.prototype.hasOwnProperty.call(M1,e)?M1[e]:(t.getState().onError?.("009",ci.error009(e)),null),[e])}const f_=({id:e,type:t,color:i,width:s=12.5,height:l=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:h="auto-start-reverse"})=>{const f=h_(t);return f?$.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:h,refX:"0",refY:"0"},$.createElement(f,{color:i,strokeWidth:u})):null},d_=({defaultColor:e,rfId:t})=>i=>{const s=[];return i.edges.reduce((l,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const h=kc(u,t);s.includes(h)||(l.push({id:h,color:u.color||e,...u}),s.push(h))}}),l),[]).sort((l,o)=>l.id.localeCompare(o.id))},Mg=({defaultColor:e,rfId:t})=>{const i=te(k.useCallback(d_({defaultColor:e,rfId:t}),[e,t]),(s,l)=>!(s.length!==l.length||s.some((o,u)=>o.id!==l[u].id)));return $.createElement("defs",null,i.map(s=>$.createElement(f_,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};Mg.displayName="MarkerDefinitions";var g_=k.memo(Mg);const m_=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Rg=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:i,rfId:s,edgeTypes:l,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:h,onEdgeMouseMove:f,onEdgeMouseLeave:d,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:v,onReconnectStart:_,onReconnectEnd:S,reconnectRadius:b,children:C,disableKeyboardA11y:x})=>{const{edgesFocusable:A,edgesUpdatable:w,elementsSelectable:M,width:G,height:H,connectionMode:X,nodeInternals:q,onError:P}=te(m_,Ve),I=o_(t,q,i);return G?$.createElement($.Fragment,null,I.map(({level:J,edges:j,isMaxLevel:W})=>$.createElement("svg",{key:J,style:{zIndex:J},width:G,height:H,className:"react-flow__edges react-flow__container"},W&&$.createElement(g_,{defaultColor:e,rfId:s}),$.createElement("g",null,j.map(T=>{const[O,N,Y]=A1(q.get(T.source)),[B,D,K]=A1(q.get(T.target));if(!Y||!K)return null;let F=T.type||"default";l[F]||(P?.("011",ci.error011(F)),F="default");const tt=l[F]||l.default,ut=X===pa.Strict?D.target:(D.target??[]).concat(D.source??[]),ct=N1(N.source,T.sourceHandle),gt=N1(ut,T.targetHandle),St=ct?.position||dt.Bottom,Rt=gt?.position||dt.Top,wt=!!(T.focusable||A&&typeof T.focusable>"u"),zt=T.reconnectable||T.updatable,Ut=typeof v<"u"&&(zt||w&&typeof zt>"u");if(!ct||!gt)return P?.("008",ci.error008(ct,T)),null;const{sourceX:De,sourceY:re,targetX:oe,targetY:Ce}=a_(O,ct,St,B,gt,Rt);return $.createElement(tt,{key:T.id,id:T.id,className:en([T.className,o]),type:F,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:De,sourceY:re,targetX:oe,targetY:Ce,sourcePosition:St,targetPosition:Rt,elementsSelectable:M,onContextMenu:u,onMouseEnter:h,onMouseMove:f,onMouseLeave:d,onClick:m,onEdgeDoubleClick:y,onReconnect:v,onReconnectStart:_,onReconnectEnd:S,reconnectRadius:b,rfId:s,ariaLabel:T.ariaLabel,isFocusable:wt,isReconnectable:Ut,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth,disableKeyboardA11y:x})})))),C):null};Rg.displayName="EdgeRenderer";var p_=k.memo(Rg);const y_=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function v_({children:e}){const t=te(y_);return $.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function __(e){const t=vg(),i=k.useRef(!1);k.useEffect(()=>{!i.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),i.current=!0)},[e,t.viewportInitialized])}const S_={[dt.Left]:dt.Right,[dt.Right]:dt.Left,[dt.Top]:dt.Bottom,[dt.Bottom]:dt.Top},wg=({nodeId:e,handleType:t,style:i,type:s=Di.Bezier,CustomComponent:l,connectionStatus:o})=>{const{fromNode:u,handleId:h,toX:f,toY:d,connectionMode:m}=te(k.useCallback(H=>({fromNode:H.nodeInternals.get(e),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[e]),Ve),y=u?.[$t]?.handleBounds;let v=y?.[t];if(m===pa.Loose&&(v=v||y?.[t==="source"?"target":"source"]),!u||!v)return null;const _=h?v.find(H=>H.id===h):v[0],S=_?_.x+_.width/2:(u.width??0)/2,b=_?_.y+_.height/2:u.height??0,C=(u.positionAbsolute?.x??0)+S,x=(u.positionAbsolute?.y??0)+b,A=_?.position,w=A?S_[A]:null;if(!A||!w)return null;if(l)return $.createElement(l,{connectionLineType:s,connectionLineStyle:i,fromNode:u,fromHandle:_,fromX:C,fromY:x,toX:f,toY:d,fromPosition:A,toPosition:w,connectionStatus:o});let M="";const G={sourceX:C,sourceY:x,sourcePosition:A,targetX:f,targetY:d,targetPosition:w};return s===Di.Bezier?[M]=W2(G):s===Di.Step?[M]=Zc({...G,borderRadius:0}):s===Di.SmoothStep?[M]=Zc(G):s===Di.SimpleBezier?[M]=J2(G):M=`M${C},${x} ${f},${d}`,$.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:i})};wg.displayName="ConnectionLine";const E_=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function x_({containerStyle:e,style:t,type:i,component:s}){const{nodeId:l,handleType:o,nodesConnectable:u,width:h,height:f,connectionStatus:d}=te(E_,Ve);return!(l&&o&&h&&u)?null:$.createElement("svg",{style:e,width:h,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},$.createElement("g",{className:en(["react-flow__connection",d])},$.createElement(wg,{nodeId:l,handleType:o,style:t,type:i,CustomComponent:s,connectionStatus:d})))}function R1(e,t){return k.useRef(null),be(),k.useMemo(()=>t(e),[e])}const zg=({nodeTypes:e,edgeTypes:t,onMove:i,onMoveStart:s,onMoveEnd:l,onInit:o,onNodeClick:u,onEdgeClick:h,onNodeDoubleClick:f,onEdgeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:_,onSelectionContextMenu:S,onSelectionStart:b,onSelectionEnd:C,connectionLineType:x,connectionLineStyle:A,connectionLineComponent:w,connectionLineContainerStyle:M,selectionKeyCode:G,selectionOnDrag:H,selectionMode:X,multiSelectionKeyCode:q,panActivationKeyCode:P,zoomActivationKeyCode:I,deleteKeyCode:J,onlyRenderVisibleElements:j,elementsSelectable:W,selectNodesOnDrag:T,defaultViewport:O,translateExtent:N,minZoom:Y,maxZoom:B,preventScrolling:D,defaultMarkerColor:K,zoomOnScroll:F,zoomOnPinch:tt,panOnScroll:ut,panOnScrollSpeed:ct,panOnScrollMode:gt,zoomOnDoubleClick:St,panOnDrag:Rt,onPaneClick:wt,onPaneMouseEnter:zt,onPaneMouseMove:Ut,onPaneMouseLeave:De,onPaneScroll:re,onPaneContextMenu:oe,onEdgeContextMenu:Ce,onEdgeMouseEnter:Pt,onEdgeMouseMove:ue,onEdgeMouseLeave:Nt,onReconnect:ft,onReconnectStart:ye,onReconnectEnd:Oe,reconnectRadius:An,noDragClassName:He,noWheelClassName:Zt,noPanClassName:Ge,elevateEdgesOnSelect:Pn,disableKeyboardA11y:fn,nodeOrigin:qe,nodeExtent:dn,rfId:ve})=>{const nn=R1(e,I7),ce=R1(t,i_);return __(o),$.createElement(j7,{onPaneClick:wt,onPaneMouseEnter:zt,onPaneMouseMove:Ut,onPaneMouseLeave:De,onPaneContextMenu:oe,onPaneScroll:re,deleteKeyCode:J,selectionKeyCode:G,selectionOnDrag:H,selectionMode:X,onSelectionStart:b,onSelectionEnd:C,multiSelectionKeyCode:q,panActivationKeyCode:P,zoomActivationKeyCode:I,elementsSelectable:W,onMove:i,onMoveStart:s,onMoveEnd:l,zoomOnScroll:F,zoomOnPinch:tt,zoomOnDoubleClick:St,panOnScroll:ut,panOnScrollSpeed:ct,panOnScrollMode:gt,panOnDrag:Rt,defaultViewport:O,translateExtent:N,minZoom:Y,maxZoom:B,onSelectionContextMenu:S,preventScrolling:D,noDragClassName:He,noWheelClassName:Zt,noPanClassName:Ge,disableKeyboardA11y:fn},$.createElement(v_,null,$.createElement(p_,{edgeTypes:ce,onEdgeClick:h,onEdgeDoubleClick:d,onlyRenderVisibleElements:j,onEdgeContextMenu:Ce,onEdgeMouseEnter:Pt,onEdgeMouseMove:ue,onEdgeMouseLeave:Nt,onReconnect:ft,onReconnectStart:ye,onReconnectEnd:Oe,reconnectRadius:An,defaultMarkerColor:K,noPanClassName:Ge,elevateEdgesOnSelect:!!Pn,disableKeyboardA11y:fn,rfId:ve},$.createElement(x_,{style:A,type:x,component:w,containerStyle:M})),$.createElement("div",{className:"react-flow__edgelabel-renderer"}),$.createElement($7,{nodeTypes:nn,onNodeClick:u,onNodeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:_,selectNodesOnDrag:T,onlyRenderVisibleElements:j,noPanClassName:Ge,noDragClassName:He,disableKeyboardA11y:fn,nodeOrigin:qe,nodeExtent:dn,rfId:ve})))};zg.displayName="GraphView";var b_=k.memo(zg);const Jc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ai={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jc,nodeExtent:Jc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:pa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Jv,isValidConnection:void 0},C_=()=>s6((e,t)=>({...Ai,setNodes:i=>{const{nodeInternals:s,nodeOrigin:l,elevateNodesOnSelect:o}=t();e({nodeInternals:Ec(i,s,l,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:i=>{const{defaultEdgeOptions:s={}}=t();e({edges:i.map(l=>({...s,...l}))})},setDefaultNodesAndEdges:(i,s)=>{const l=typeof i<"u",o=typeof s<"u",u=l?Ec(i,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:u,edges:o?s:[],hasDefaultNodes:l,hasDefaultEdges:o})},updateNodeDimensions:i=>{const{onNodesChange:s,nodeInternals:l,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:h,domNode:f,nodeOrigin:d}=t(),m=f?.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:v}=new window.DOMMatrixReadOnly(y.transform),_=i.reduce((b,C)=>{const x=l.get(C.id);if(x?.hidden)l.set(x.id,{...x,[$t]:{...x[$t],handleBounds:void 0}});else if(x){const A=dh(C.nodeElement);A.width&&A.height&&(x.width!==A.width||x.height!==A.height||C.forceUpdate)&&(l.set(x.id,{...x,[$t]:{...x[$t],handleBounds:{source:x1(".source",C.nodeElement,v,d),target:x1(".target",C.nodeElement,v,d)}},...A}),b.push({id:x.id,type:"dimensions",dimensions:A}))}return b},[]);pg(l,d);const S=u||o&&!u&&yg(t,{initial:!0,...h});e({nodeInternals:new Map(l),fitViewOnInitDone:S}),_?.length>0&&s?.(_)},updateNodePositions:(i,s=!0,l=!1)=>{const{triggerNodeChanges:o}=t(),u=i.map(h=>{const f={id:h.id,type:"position",dragging:l};return s&&(f.positionAbsolute=h.positionAbsolute,f.position=h.position),f});o(u)},triggerNodeChanges:i=>{const{onNodesChange:s,nodeInternals:l,hasDefaultNodes:o,nodeOrigin:u,getNodes:h,elevateNodesOnSelect:f}=t();if(i?.length){if(o){const d=Sg(i,h()),m=Ec(d,l,u,f);e({nodeInternals:m})}s?.(i)}},addSelectedNodes:i=>{const{multiSelectionActive:s,edges:l,getNodes:o}=t();let u,h=null;s?u=i.map(f=>wi(f,!0)):(u=us(o(),i),h=us(l,[])),kr({changedNodes:u,changedEdges:h,get:t,set:e})},addSelectedEdges:i=>{const{multiSelectionActive:s,edges:l,getNodes:o}=t();let u,h=null;s?u=i.map(f=>wi(f,!0)):(u=us(l,i),h=us(o(),[])),kr({changedNodes:h,changedEdges:u,get:t,set:e})},unselectNodesAndEdges:({nodes:i,edges:s}={})=>{const{edges:l,getNodes:o}=t(),u=i||o(),h=s||l,f=u.map(m=>(m.selected=!1,wi(m.id,!1))),d=h.map(m=>wi(m.id,!1));kr({changedNodes:f,changedEdges:d,get:t,set:e})},setMinZoom:i=>{const{d3Zoom:s,maxZoom:l}=t();s?.scaleExtent([i,l]),e({minZoom:i})},setMaxZoom:i=>{const{d3Zoom:s,minZoom:l}=t();s?.scaleExtent([l,i]),e({maxZoom:i})},setTranslateExtent:i=>{t().d3Zoom?.translateExtent(i),e({translateExtent:i})},resetSelectedElements:()=>{const{edges:i,getNodes:s}=t(),o=s().filter(h=>h.selected).map(h=>wi(h.id,!1)),u=i.filter(h=>h.selected).map(h=>wi(h.id,!1));kr({changedNodes:o,changedEdges:u,get:t,set:e})},setNodeExtent:i=>{const{nodeInternals:s}=t();s.forEach(l=>{l.positionAbsolute=gh(l.position,i)}),e({nodeExtent:i,nodeInternals:new Map(s)})},panBy:i=>{const{transform:s,width:l,height:o,d3Zoom:u,d3Selection:h,translateExtent:f}=t();if(!u||!h||!i.x&&!i.y)return!1;const d=Oi.translate(s[0]+i.x,s[1]+i.y).scale(s[2]),m=[[0,0],[l,o]],y=u?.constrain()(d,m,f);return u.transform(h,y),s[0]!==y.x||s[1]!==y.y||s[2]!==y.k},cancelConnection:()=>e({connectionNodeId:Ai.connectionNodeId,connectionHandleId:Ai.connectionHandleId,connectionHandleType:Ai.connectionHandleType,connectionStatus:Ai.connectionStatus,connectionStartHandle:Ai.connectionStartHandle,connectionEndHandle:Ai.connectionEndHandle}),reset:()=>e({...Ai})}),Object.is),Dg=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=C_()),$.createElement(qv,{value:t.current},e)};Dg.displayName="ReactFlowProvider";const Og=({children:e})=>k.useContext(To)?$.createElement($.Fragment,null,e):$.createElement(Dg,null,e);Og.displayName="ReactFlowWrapper";const T_={input:ug,default:Fc,output:hg,group:xh},N_={default:fo,straight:vh,step:yh,smoothstep:No,simplebezier:ph},A_=[0,0],M_=[15,15],R_={x:0,y:0,zoom:1},w_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},z_=k.forwardRef(({nodes:e,edges:t,defaultNodes:i,defaultEdges:s,className:l,nodeTypes:o=T_,edgeTypes:u=N_,onNodeClick:h,onEdgeClick:f,onInit:d,onMove:m,onMoveStart:y,onMoveEnd:v,onConnect:_,onConnectStart:S,onConnectEnd:b,onClickConnectStart:C,onClickConnectEnd:x,onNodeMouseEnter:A,onNodeMouseMove:w,onNodeMouseLeave:M,onNodeContextMenu:G,onNodeDoubleClick:H,onNodeDragStart:X,onNodeDrag:q,onNodeDragStop:P,onNodesDelete:I,onEdgesDelete:J,onSelectionChange:j,onSelectionDragStart:W,onSelectionDrag:T,onSelectionDragStop:O,onSelectionContextMenu:N,onSelectionStart:Y,onSelectionEnd:B,connectionMode:D=pa.Strict,connectionLineType:K=Di.Bezier,connectionLineStyle:F,connectionLineComponent:tt,connectionLineContainerStyle:ut,deleteKeyCode:ct="Backspace",selectionKeyCode:gt="Shift",selectionOnDrag:St=!1,selectionMode:Rt=Tl.Full,panActivationKeyCode:wt="Space",multiSelectionKeyCode:zt=co()?"Meta":"Control",zoomActivationKeyCode:Ut=co()?"Meta":"Control",snapToGrid:De=!1,snapGrid:re=M_,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:Ce=!0,nodesDraggable:Pt,nodesConnectable:ue,nodesFocusable:Nt,nodeOrigin:ft=A_,edgesFocusable:ye,edgesUpdatable:Oe,elementsSelectable:An,defaultViewport:He=R_,minZoom:Zt=.5,maxZoom:Ge=2,translateExtent:Pn=Jc,preventScrolling:fn=!0,nodeExtent:qe,defaultMarkerColor:dn="#b1b1b7",zoomOnScroll:ve=!0,zoomOnPinch:nn=!0,panOnScroll:ce=!1,panOnScrollSpeed:Pe=.5,panOnScrollMode:Mn=fa.Free,zoomOnDoubleClick:Rn=!0,panOnDrag:Kn=!0,onPaneClick:an,onPaneMouseEnter:gn,onPaneMouseMove:Ss,onPaneMouseLeave:xa,onPaneScroll:Xi,onPaneContextMenu:Vi,children:qi,onEdgeContextMenu:wn,onEdgeDoubleClick:ba,onEdgeMouseEnter:zl,onEdgeMouseMove:Dl,onEdgeMouseLeave:Qn,onEdgeUpdate:Ol,onEdgeUpdateStart:Hl,onEdgeUpdateEnd:Ca,onReconnect:Pi,onReconnectStart:Ta,onReconnectEnd:Gl,reconnectRadius:Na=10,edgeUpdaterRadius:Aa=10,onNodesChange:Es,onEdgesChange:Zn,noDragClassName:Bl="nodrag",noWheelClassName:Ma="nowheel",noPanClassName:Ra="nopan",fitView:xs=!1,fitViewOptions:zn,connectOnClick:Dn=!0,attributionPosition:Ki,proOptions:bs,defaultEdgeOptions:Qi,elevateNodesOnSelect:Zi=!0,elevateEdgesOnSelect:Ul=!1,disableKeyboardA11y:Cs=!1,autoPanOnConnect:Ll=!0,autoPanOnNodeDrag:Ts=!0,connectionRadius:Ns=20,isValidConnection:On,onError:As,style:Yl,id:mn,nodeDragThreshold:Re,...wa},kt)=>{const ki=mn||"1";return $.createElement("div",{...wa,style:{...Yl,...w_},ref:kt,className:en(["react-flow",l]),"data-testid":"rf__wrapper",id:mn},$.createElement(Og,null,$.createElement(b_,{onInit:d,onMove:m,onMoveStart:y,onMoveEnd:v,onNodeClick:h,onEdgeClick:f,onNodeMouseEnter:A,onNodeMouseMove:w,onNodeMouseLeave:M,onNodeContextMenu:G,onNodeDoubleClick:H,nodeTypes:o,edgeTypes:u,connectionLineType:K,connectionLineStyle:F,connectionLineComponent:tt,connectionLineContainerStyle:ut,selectionKeyCode:gt,selectionOnDrag:St,selectionMode:Rt,deleteKeyCode:ct,multiSelectionKeyCode:zt,panActivationKeyCode:wt,zoomActivationKeyCode:Ut,onlyRenderVisibleElements:oe,selectNodesOnDrag:Ce,defaultViewport:He,translateExtent:Pn,minZoom:Zt,maxZoom:Ge,preventScrolling:fn,zoomOnScroll:ve,zoomOnPinch:nn,zoomOnDoubleClick:Rn,panOnScroll:ce,panOnScrollSpeed:Pe,panOnScrollMode:Mn,panOnDrag:Kn,onPaneClick:an,onPaneMouseEnter:gn,onPaneMouseMove:Ss,onPaneMouseLeave:xa,onPaneScroll:Xi,onPaneContextMenu:Vi,onSelectionContextMenu:N,onSelectionStart:Y,onSelectionEnd:B,onEdgeContextMenu:wn,onEdgeDoubleClick:ba,onEdgeMouseEnter:zl,onEdgeMouseMove:Dl,onEdgeMouseLeave:Qn,onReconnect:Pi??Ol,onReconnectStart:Ta??Hl,onReconnectEnd:Gl??Ca,reconnectRadius:Na??Aa,defaultMarkerColor:dn,noDragClassName:Bl,noWheelClassName:Ma,noPanClassName:Ra,elevateEdgesOnSelect:Ul,rfId:ki,disableKeyboardA11y:Cs,nodeOrigin:ft,nodeExtent:qe}),$.createElement(S7,{nodes:e,edges:t,defaultNodes:i,defaultEdges:s,onConnect:_,onConnectStart:S,onConnectEnd:b,onClickConnectStart:C,onClickConnectEnd:x,nodesDraggable:Pt,nodesConnectable:ue,nodesFocusable:Nt,edgesFocusable:ye,edgesUpdatable:Oe,elementsSelectable:An,elevateNodesOnSelect:Zi,minZoom:Zt,maxZoom:Ge,nodeExtent:qe,onNodesChange:Es,onEdgesChange:Zn,snapToGrid:De,snapGrid:re,connectionMode:D,translateExtent:Pn,connectOnClick:Dn,defaultEdgeOptions:Qi,fitView:xs,fitViewOptions:zn,onNodesDelete:I,onEdgesDelete:J,onNodeDragStart:X,onNodeDrag:q,onNodeDragStop:P,onSelectionDrag:T,onSelectionDragStart:W,onSelectionDragStop:O,noPanClassName:Ra,nodeOrigin:ft,rfId:ki,autoPanOnConnect:Ll,autoPanOnNodeDrag:Ts,onError:As,connectionRadius:Ns,isValidConnection:On,nodeDragThreshold:Re}),$.createElement(v7,{onSelectionChange:j}),qi,$.createElement(Qv,{proOptions:bs,position:Ki}),$.createElement(T7,{rfId:ki,disableKeyboardA11y:Cs})))});z_.displayName="ReactFlow";function Hg(e){return t=>{const[i,s]=k.useState(t),l=k.useCallback(o=>s(u=>e(o,u)),[]);return[i,s,l]}}const iS=Hg(Sg),aS=Hg(Y7);function D_(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,l]of e)if(!Object.is(l,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const s of i)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var Cn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Cn||(Cn={}));function O_({color:e,dimensions:t,lineWidth:i}){return $.createElement("path",{stroke:e,strokeWidth:i,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function H_({color:e,radius:t}){return $.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const G_={[Cn.Dots]:"#91919a",[Cn.Lines]:"#eee",[Cn.Cross]:"#e2e2e2"},B_={[Cn.Dots]:1,[Cn.Lines]:1,[Cn.Cross]:6},U_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gg({id:e,variant:t=Cn.Dots,gap:i=20,size:s,lineWidth:l=1,offset:o=2,color:u,style:h,className:f}){const d=k.useRef(null),{transform:m,patternId:y}=te(U_,D_),v=u||G_[t],_=s||B_[t],S=t===Cn.Dots,b=t===Cn.Cross,C=Array.isArray(i)?i:[i,i],x=[C[0]*m[2]||1,C[1]*m[2]||1],A=_*m[2],w=b?[A,A]:x,M=S?[A/o,A/o]:[w[0]/o,w[1]/o];return $.createElement("svg",{className:en(["react-flow__background",f]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},$.createElement("pattern",{id:y+e,x:m[0]%x[0],y:m[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},S?$.createElement(H_,{color:v,radius:A/o}):$.createElement(O_,{dimensions:w,color:v,lineWidth:l})),$.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+e})`}))}Gg.displayName="Background";var sS=k.memo(Gg);export{sS as B,J_ as C,F_ as G,go as H,k_ as K,j_ as L,ho as M,dt as P,I_ as R,tS as S,$_ as T,W_ as W,uh as a,eS as b,z1 as c,t5 as d,aS as e,z_ as f,Di as g,Yn as i,nS as p,Y_ as r,iS as u,Wy as w};
